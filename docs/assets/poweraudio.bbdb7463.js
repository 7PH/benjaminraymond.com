var at=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yf(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Xo(i){var r=i.default;if(typeof r=="function"){var t=function(){return r.apply(this,arguments)};t.prototype=r.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(e){var n=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,n.get?n:{enumerable:!0,get:function(){return i[e]}})}),t}var vn={},Br={},kr={},tr={},$t={},Za={};(function(i){(function(r){var t=r.Promise,e=t&&"resolve"in t&&"reject"in t&&"all"in t&&"race"in t&&function(){var _;return new t(function(P){_=P}),typeof _=="function"}();i?(i.Promise=e?t:S,i.Polyfill=S):e||(r.Promise=S);var n="pending",a="sealed",s="fulfilled",o="rejected",h=function(){};function u(_){return Object.prototype.toString.call(_)==="[object Array]"}var c=typeof setImmediate<"u"?setImmediate:setTimeout,f=[],l;function d(){for(var _=0;_<f.length;_++)f[_][0](f[_][1]);f=[],l=!1}function p(_,P){f.push([_,P]),l||(l=!0,c(d,0))}function v(_,P){function C(D){x(P,D)}function N(D){w(P,D)}try{_(C,N)}catch(D){N(D)}}function m(_){var P=_.owner,C=P.state_,N=P.data_,D=_[C],$=_.then;if(typeof D=="function"){C=s;try{N=D(N)}catch(R){w($,R)}}y($,N)||(C===s&&x($,N),C===o&&w($,N))}function y(_,P){var C;try{if(_===P)throw new TypeError("A promises callback cannot return that same promise.");if(P&&(typeof P=="function"||typeof P=="object")){var N=P.then;if(typeof N=="function")return N.call(P,function(D){C||(C=!0,P!==D?x(_,D):g(_,D))},function(D){C||(C=!0,w(_,D))}),!0}}catch(D){return C||w(_,D),!0}return!1}function x(_,P){(_===P||!y(_,P))&&g(_,P)}function g(_,P){_.state_===n&&(_.state_=a,_.data_=P,p(T,_))}function w(_,P){_.state_===n&&(_.state_=a,_.data_=P,p(M,_))}function b(_){var P=_.then_;_.then_=void 0;for(var C=0;C<P.length;C++)m(P[C])}function T(_){_.state_=s,b(_)}function M(_){_.state_=o,b(_)}function S(_){if(typeof _!="function")throw new TypeError("Promise constructor takes a function argument");if(!(this instanceof S))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],v(_,this)}S.prototype={constructor:S,state_:n,then_:null,data_:void 0,then:function(_,P){var C={owner:this,then:new this.constructor(h),fulfilled:_,rejected:P};return this.state_===s||this.state_===o?p(m,C):this.then_.push(C),C.then},catch:function(_){return this.then(null,_)}},S.all=function(_){var P=this;if(!u(_))throw new TypeError("You must pass an array to Promise.all().");return new P(function(C,N){var D=[],$=0;function R(St){return $++,function(At){D[St]=At,--$||C(D)}}for(var F=0,A;F<_.length;F++)A=_[F],A&&typeof A.then=="function"?A.then(R(F),N):D[F]=A;$||C(D)})},S.race=function(_){var P=this;if(!u(_))throw new TypeError("You must pass an array to Promise.race().");return new P(function(C,N){for(var D=0,$;D<_.length;D++)$=_[D],$&&typeof $.then=="function"?$.then(C,N):C($)})},S.resolve=function(_){var P=this;return _&&typeof _=="object"&&_.constructor===P?_:new P(function(C){C(_)})},S.reject=function(_){var P=this;return new P(function(C,N){N(_)})}})(typeof window<"u"?window:typeof at<"u"?at:typeof self<"u"?self:at)})(Za);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Bn=Object.getOwnPropertySymbols,Go=Object.prototype.hasOwnProperty,jo=Object.prototype.propertyIsEnumerable;function Ho(i){if(i==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(i)}function zo(){try{if(!Object.assign)return!1;var i=new String("abc");if(i[5]="de",Object.getOwnPropertyNames(i)[0]==="5")return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;var e=Object.getOwnPropertyNames(r).map(function(a){return r[a]});if(e.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(a){n[a]=a}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Vo=zo()?Object.assign:function(i,r){for(var t,e=Ho(i),n,a=1;a<arguments.length;a++){t=Object(arguments[a]);for(var s in t)Go.call(t,s)&&(e[s]=t[s]);if(Bn){n=Bn(t);for(var o=0;o<n.length;o++)jo.call(t,n[o])&&(e[n[o]]=t[n[o]])}}return e};/*!
 * @pixi/polyfill - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */window.Promise||(window.Promise=Za.Polyfill);Object.assign||(Object.assign=Vo);var Yo=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(window.performance&&window.performance.now)){var Wo=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-Wo}}var Jr=Date.now(),kn=["ms","moz","webkit","o"];for(var Qr=0;Qr<kn.length&&!window.requestAnimationFrame;++Qr){var ti=kn[Qr];window.requestAnimationFrame=window[ti+"RequestAnimationFrame"],window.cancelAnimationFrame=window[ti+"CancelAnimationFrame"]||window[ti+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(i){if(typeof i!="function")throw new TypeError(i+"is not a function");var r=Date.now(),t=Yo+Jr-r;return t<0&&(t=0),Jr=r,window.setTimeout(function(){Jr=Date.now(),i(performance.now())},t)});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(i){return clearTimeout(i)});Math.sign||(Math.sign=function(r){return r=Number(r),r===0||isNaN(r)?r:r>0?1:-1});Number.isInteger||(Number.isInteger=function(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r});window.ArrayBuffer||(window.ArrayBuffer=Array);window.Float32Array||(window.Float32Array=Array);window.Uint32Array||(window.Uint32Array=Array);window.Uint16Array||(window.Uint16Array=Array);window.Uint8Array||(window.Uint8Array=Array);window.Int32Array||(window.Int32Array=Array);var ei=/iPhone/i,Xn=/iPod/i,Gn=/iPad/i,jn=/\biOS-universal(?:.+)Mac\b/i,ri=/\bAndroid(?:.+)Mobile\b/i,Hn=/Android/i,pe=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,cr=/Silk/i,Mt=/Windows Phone/i,zn=/\bWindows(?:.+)ARM\b/i,Vn=/BlackBerry/i,Yn=/BB10/i,Wn=/Opera Mini/i,$n=/\b(CriOS|Chrome)(?:.+)Mobile/i,qn=/Mobile(?:.+)Firefox\b/i,Zn=function(i){return typeof i<"u"&&i.platform==="MacIntel"&&typeof i.maxTouchPoints=="number"&&i.maxTouchPoints>1&&typeof MSStream>"u"};function $o(i){return function(r){return r.test(i)}}function qo(i){var r={userAgent:"",platform:"",maxTouchPoints:0};!i&&typeof navigator<"u"?r={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof i=="string"?r.userAgent=i:i&&i.userAgent&&(r={userAgent:i.userAgent,platform:i.platform,maxTouchPoints:i.maxTouchPoints||0});var t=r.userAgent,e=t.split("[FBAN");typeof e[1]<"u"&&(t=e[0]),e=t.split("Twitter"),typeof e[1]<"u"&&(t=e[0]);var n=$o(t),a={apple:{phone:n(ei)&&!n(Mt),ipod:n(Xn),tablet:!n(ei)&&(n(Gn)||Zn(r))&&!n(Mt),universal:n(jn),device:(n(ei)||n(Xn)||n(Gn)||n(jn)||Zn(r))&&!n(Mt)},amazon:{phone:n(pe),tablet:!n(pe)&&n(cr),device:n(pe)||n(cr)},android:{phone:!n(Mt)&&n(pe)||!n(Mt)&&n(ri),tablet:!n(Mt)&&!n(pe)&&!n(ri)&&(n(cr)||n(Hn)),device:!n(Mt)&&(n(pe)||n(cr)||n(ri)||n(Hn))||n(/\bokhttp\b/i)},windows:{phone:n(Mt),tablet:n(zn),device:n(Mt)||n(zn)},other:{blackberry:n(Vn),blackberry10:n(Yn),opera:n(Wn),firefox:n(qn),chrome:n($n),device:n(Vn)||n(Yn)||n(Wn)||n(qn)||n($n)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}/*!
 * @pixi/settings - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var xt=qo(window.navigator);function Zo(i){var r=!0;if(xt.tablet||xt.phone){if(xt.apple.device){var t=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(t){var e=parseInt(t[1],10);e<11&&(r=!1)}}if(xt.android.device){var t=navigator.userAgent.match(/Android\s([0-9.]*)/);if(t){var e=parseInt(t[1],10);e<7&&(r=!1)}}}return r?i:4}function Ko(){return!xt.apple.device}var L={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:Zo(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:xt.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:Ko(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Ka={exports:{}};(function(i){var r=Object.prototype.hasOwnProperty,t="~";function e(){}Object.create&&(e.prototype=Object.create(null),new e().__proto__||(t=!1));function n(h,u,c){this.fn=h,this.context=u,this.once=c||!1}function a(h,u,c,f,l){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new n(c,f||h,l),p=t?t+u:u;return h._events[p]?h._events[p].fn?h._events[p]=[h._events[p],d]:h._events[p].push(d):(h._events[p]=d,h._eventsCount++),h}function s(h,u){--h._eventsCount===0?h._events=new e:delete h._events[u]}function o(){this._events=new e,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)r.call(c,f)&&u.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=t?t+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var l=0,d=f.length,p=new Array(d);l<d;l++)p[l]=f[l].fn;return p},o.prototype.listenerCount=function(u){var c=t?t+u:u,f=this._events[c];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,c,f,l,d,p){var v=t?t+u:u;if(!this._events[v])return!1;var m=this._events[v],y=arguments.length,x,g;if(m.fn){switch(m.once&&this.removeListener(u,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,f),!0;case 4:return m.fn.call(m.context,c,f,l),!0;case 5:return m.fn.call(m.context,c,f,l,d),!0;case 6:return m.fn.call(m.context,c,f,l,d,p),!0}for(g=1,x=new Array(y-1);g<y;g++)x[g-1]=arguments[g];m.fn.apply(m.context,x)}else{var w=m.length,b;for(g=0;g<w;g++)switch(m[g].once&&this.removeListener(u,m[g].fn,void 0,!0),y){case 1:m[g].fn.call(m[g].context);break;case 2:m[g].fn.call(m[g].context,c);break;case 3:m[g].fn.call(m[g].context,c,f);break;case 4:m[g].fn.call(m[g].context,c,f,l);break;default:if(!x)for(b=1,x=new Array(y-1);b<y;b++)x[b-1]=arguments[b];m[g].fn.apply(m[g].context,x)}}return!0},o.prototype.on=function(u,c,f){return a(this,u,c,f,!1)},o.prototype.once=function(u,c,f){return a(this,u,c,f,!0)},o.prototype.removeListener=function(u,c,f,l){var d=t?t+u:u;if(!this._events[d])return this;if(!c)return s(this,d),this;var p=this._events[d];if(p.fn)p.fn===c&&(!l||p.once)&&(!f||p.context===f)&&s(this,d);else{for(var v=0,m=[],y=p.length;v<y;v++)(p[v].fn!==c||l&&!p[v].once||f&&p[v].context!==f)&&m.push(p[v]);m.length?this._events[d]=m.length===1?m[0]:m:s(this,d)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=t?t+u:u,this._events[c]&&s(this,c)):(this._events=new e,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,i.exports=o})(Ka);const Oe=Ka.exports;var er={exports:{}};er.exports=Xr;er.exports.default=Xr;function Xr(i,r,t){t=t||2;var e=r&&r.length,n=e?r[0]*t:i.length,a=Ja(i,0,n,t,!0),s=[];if(!a||a.next===a.prev)return s;var o,h,u,c,f,l,d;if(e&&(a=rh(i,r,a,t)),i.length>80*t){o=u=i[0],h=c=i[1];for(var p=t;p<n;p+=t)f=i[p],l=i[p+1],f<o&&(o=f),l<h&&(h=l),f>u&&(u=f),l>c&&(c=l);d=Math.max(u-o,c-h),d=d!==0?32767/d:0}return ze(a,s,t,o,h,d,0),s}function Ja(i,r,t,e,n){var a,s;if(n===Ei(i,r,t,e)>0)for(a=r;a<t;a+=e)s=Kn(a,i[a],i[a+1],s);else for(a=t-e;a>=r;a-=e)s=Kn(a,i[a],i[a+1],s);return s&&Gr(s,s.next)&&(Ye(s),s=s.next),s}function se(i,r){if(!i)return i;r||(r=i);var t=i,e;do if(e=!1,!t.steiner&&(Gr(t,t.next)||tt(t.prev,t,t.next)===0)){if(Ye(t),t=r=t.prev,t===t.next)break;e=!0}else t=t.next;while(e||t!==r);return r}function ze(i,r,t,e,n,a,s){if(!!i){!s&&a&&oh(i,e,n,a);for(var o=i,h,u;i.prev!==i.next;){if(h=i.prev,u=i.next,a?Qo(i,e,n,a):Jo(i)){r.push(h.i/t|0),r.push(i.i/t|0),r.push(u.i/t|0),Ye(i),i=u.next,o=u.next;continue}if(i=u,i===o){s?s===1?(i=th(se(i),r,t),ze(i,r,t,e,n,a,2)):s===2&&eh(i,r,t,e,n,a):ze(se(i),r,t,e,n,a,1);break}}}}function Jo(i){var r=i.prev,t=i,e=i.next;if(tt(r,t,e)>=0)return!1;for(var n=r.x,a=t.x,s=e.x,o=r.y,h=t.y,u=e.y,c=n<a?n<s?n:s:a<s?a:s,f=o<h?o<u?o:u:h<u?h:u,l=n>a?n>s?n:s:a>s?a:s,d=o>h?o>u?o:u:h>u?h:u,p=e.next;p!==r;){if(p.x>=c&&p.x<=l&&p.y>=f&&p.y<=d&&_e(n,o,a,h,s,u,p.x,p.y)&&tt(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Qo(i,r,t,e){var n=i.prev,a=i,s=i.next;if(tt(n,a,s)>=0)return!1;for(var o=n.x,h=a.x,u=s.x,c=n.y,f=a.y,l=s.y,d=o<h?o<u?o:u:h<u?h:u,p=c<f?c<l?c:l:f<l?f:l,v=o>h?o>u?o:u:h>u?h:u,m=c>f?c>l?c:l:f>l?f:l,y=Pi(d,p,r,t,e),x=Pi(v,m,r,t,e),g=i.prevZ,w=i.nextZ;g&&g.z>=y&&w&&w.z<=x;){if(g.x>=d&&g.x<=v&&g.y>=p&&g.y<=m&&g!==n&&g!==s&&_e(o,c,h,f,u,l,g.x,g.y)&&tt(g.prev,g,g.next)>=0||(g=g.prevZ,w.x>=d&&w.x<=v&&w.y>=p&&w.y<=m&&w!==n&&w!==s&&_e(o,c,h,f,u,l,w.x,w.y)&&tt(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;g&&g.z>=y;){if(g.x>=d&&g.x<=v&&g.y>=p&&g.y<=m&&g!==n&&g!==s&&_e(o,c,h,f,u,l,g.x,g.y)&&tt(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;w&&w.z<=x;){if(w.x>=d&&w.x<=v&&w.y>=p&&w.y<=m&&w!==n&&w!==s&&_e(o,c,h,f,u,l,w.x,w.y)&&tt(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function th(i,r,t){var e=i;do{var n=e.prev,a=e.next.next;!Gr(n,a)&&Qa(n,e,e.next,a)&&Ve(n,a)&&Ve(a,n)&&(r.push(n.i/t|0),r.push(e.i/t|0),r.push(a.i/t|0),Ye(e),Ye(e.next),e=i=a),e=e.next}while(e!==i);return se(e)}function eh(i,r,t,e,n,a){var s=i;do{for(var o=s.next.next;o!==s.prev;){if(s.i!==o.i&&lh(s,o)){var h=ts(s,o);s=se(s,s.next),h=se(h,h.next),ze(s,r,t,e,n,a,0),ze(h,r,t,e,n,a,0);return}o=o.next}s=s.next}while(s!==i)}function rh(i,r,t,e){var n=[],a,s,o,h,u;for(a=0,s=r.length;a<s;a++)o=r[a]*e,h=a<s-1?r[a+1]*e:i.length,u=Ja(i,o,h,e,!1),u===u.next&&(u.steiner=!0),n.push(uh(u));for(n.sort(ih),a=0;a<n.length;a++)t=nh(n[a],t);return t}function ih(i,r){return i.x-r.x}function nh(i,r){var t=ah(i,r);if(!t)return r;var e=ts(t,i);return se(e,e.next),se(t,t.next)}function ah(i,r){var t=r,e=i.x,n=i.y,a=-1/0,s;do{if(n<=t.y&&n>=t.next.y&&t.next.y!==t.y){var o=t.x+(n-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(o<=e&&o>a&&(a=o,s=t.x<t.next.x?t:t.next,o===e))return s}t=t.next}while(t!==r);if(!s)return null;var h=s,u=s.x,c=s.y,f=1/0,l;t=s;do e>=t.x&&t.x>=u&&e!==t.x&&_e(n<c?e:a,n,u,c,n<c?a:e,n,t.x,t.y)&&(l=Math.abs(n-t.y)/(e-t.x),Ve(t,i)&&(l<f||l===f&&(t.x>s.x||t.x===s.x&&sh(s,t)))&&(s=t,f=l)),t=t.next;while(t!==h);return s}function sh(i,r){return tt(i.prev,i,r.prev)<0&&tt(r.next,i,i.next)<0}function oh(i,r,t,e){var n=i;do n.z===0&&(n.z=Pi(n.x,n.y,r,t,e)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==i);n.prevZ.nextZ=null,n.prevZ=null,hh(n)}function hh(i){var r,t,e,n,a,s,o,h,u=1;do{for(t=i,i=null,a=null,s=0;t;){for(s++,e=t,o=0,r=0;r<u&&(o++,e=e.nextZ,!!e);r++);for(h=u;o>0||h>0&&e;)o!==0&&(h===0||!e||t.z<=e.z)?(n=t,t=t.nextZ,o--):(n=e,e=e.nextZ,h--),a?a.nextZ=n:i=n,n.prevZ=a,a=n;t=e}a.nextZ=null,u*=2}while(s>1);return i}function Pi(i,r,t,e,n){return i=(i-t)*n|0,r=(r-e)*n|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,i|r<<1}function uh(i){var r=i,t=i;do(r.x<t.x||r.x===t.x&&r.y<t.y)&&(t=r),r=r.next;while(r!==i);return t}function _e(i,r,t,e,n,a,s,o){return(n-s)*(r-o)>=(i-s)*(a-o)&&(i-s)*(e-o)>=(t-s)*(r-o)&&(t-s)*(a-o)>=(n-s)*(e-o)}function lh(i,r){return i.next.i!==r.i&&i.prev.i!==r.i&&!fh(i,r)&&(Ve(i,r)&&Ve(r,i)&&ch(i,r)&&(tt(i.prev,i,r.prev)||tt(i,r.prev,r))||Gr(i,r)&&tt(i.prev,i,i.next)>0&&tt(r.prev,r,r.next)>0)}function tt(i,r,t){return(r.y-i.y)*(t.x-r.x)-(r.x-i.x)*(t.y-r.y)}function Gr(i,r){return i.x===r.x&&i.y===r.y}function Qa(i,r,t,e){var n=pr(tt(i,r,t)),a=pr(tt(i,r,e)),s=pr(tt(t,e,i)),o=pr(tt(t,e,r));return!!(n!==a&&s!==o||n===0&&dr(i,t,r)||a===0&&dr(i,e,r)||s===0&&dr(t,i,e)||o===0&&dr(t,r,e))}function dr(i,r,t){return r.x<=Math.max(i.x,t.x)&&r.x>=Math.min(i.x,t.x)&&r.y<=Math.max(i.y,t.y)&&r.y>=Math.min(i.y,t.y)}function pr(i){return i>0?1:i<0?-1:0}function fh(i,r){var t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==r.i&&t.next.i!==r.i&&Qa(t,t.next,i,r))return!0;t=t.next}while(t!==i);return!1}function Ve(i,r){return tt(i.prev,i,i.next)<0?tt(i,r,i.next)>=0&&tt(i,i.prev,r)>=0:tt(i,r,i.prev)<0||tt(i,i.next,r)<0}function ch(i,r){var t=i,e=!1,n=(i.x+r.x)/2,a=(i.y+r.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&n<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(e=!e),t=t.next;while(t!==i);return e}function ts(i,r){var t=new Ii(i.i,i.x,i.y),e=new Ii(r.i,r.x,r.y),n=i.next,a=r.prev;return i.next=r,r.prev=i,t.next=n,n.prev=t,e.next=t,t.prev=e,a.next=e,e.prev=a,e}function Kn(i,r,t,e){var n=new Ii(i,r,t);return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function Ye(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Ii(i,r,t){this.i=i,this.x=r,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Xr.deviation=function(i,r,t,e){var n=r&&r.length,a=n?r[0]*t:i.length,s=Math.abs(Ei(i,0,a,t));if(n)for(var o=0,h=r.length;o<h;o++){var u=r[o]*t,c=o<h-1?r[o+1]*t:i.length;s-=Math.abs(Ei(i,u,c,t))}var f=0;for(o=0;o<e.length;o+=3){var l=e[o]*t,d=e[o+1]*t,p=e[o+2]*t;f+=Math.abs((i[l]-i[p])*(i[d+1]-i[l+1])-(i[l]-i[d])*(i[p+1]-i[l+1]))}return s===0&&f===0?0:Math.abs((f-s)/s)};function Ei(i,r,t,e){for(var n=0,a=r,s=t-e;a<t;a+=e)n+=(i[s]-i[a])*(i[a+1]+i[s+1]),s=a;return n}Xr.flatten=function(i){for(var r=i[0][0].length,t={vertices:[],holes:[],dimensions:r},e=0,n=0;n<i.length;n++){for(var a=0;a<i[n].length;a++)for(var s=0;s<r;s++)t.vertices.push(i[n][a][s]);n>0&&(e+=i[n-1].length,t.holes.push(e))}return t};var de={},Si={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(i,r){(function(t){var e=r&&!r.nodeType&&r,n=i&&!i.nodeType&&i,a=typeof at=="object"&&at;(a.global===a||a.window===a||a.self===a)&&(t=a);var s,o=2147483647,h=36,u=1,c=26,f=38,l=700,d=72,p=128,v="-",m=/^xn--/,y=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,g={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=h-u,b=Math.floor,T=String.fromCharCode,M;function S(O){throw RangeError(g[O])}function _(O,B){for(var j=O.length,Y=[];j--;)Y[j]=B(O[j]);return Y}function P(O,B){var j=O.split("@"),Y="";j.length>1&&(Y=j[0]+"@",O=j[1]),O=O.replace(x,".");var q=O.split("."),et=_(q,B).join(".");return Y+et}function C(O){for(var B=[],j=0,Y=O.length,q,et;j<Y;)q=O.charCodeAt(j++),q>=55296&&q<=56319&&j<Y?(et=O.charCodeAt(j++),(et&64512)==56320?B.push(((q&1023)<<10)+(et&1023)+65536):(B.push(q),j--)):B.push(q);return B}function N(O){return _(O,function(B){var j="";return B>65535&&(B-=65536,j+=T(B>>>10&1023|55296),B=56320|B&1023),j+=T(B),j}).join("")}function D(O){return O-48<10?O-22:O-65<26?O-65:O-97<26?O-97:h}function $(O,B){return O+22+75*(O<26)-((B!=0)<<5)}function R(O,B,j){var Y=0;for(O=j?b(O/l):O>>1,O+=b(O/B);O>w*c>>1;Y+=h)O=b(O/w);return b(Y+(w+1)*O/(O+f))}function F(O){var B=[],j=O.length,Y,q=0,et=p,Z=d,Q,st,H,rt,V,X,it,pt,vt;for(Q=O.lastIndexOf(v),Q<0&&(Q=0),st=0;st<Q;++st)O.charCodeAt(st)>=128&&S("not-basic"),B.push(O.charCodeAt(st));for(H=Q>0?Q+1:0;H<j;){for(rt=q,V=1,X=h;H>=j&&S("invalid-input"),it=D(O.charCodeAt(H++)),(it>=h||it>b((o-q)/V))&&S("overflow"),q+=it*V,pt=X<=Z?u:X>=Z+c?c:X-Z,!(it<pt);X+=h)vt=h-pt,V>b(o/vt)&&S("overflow"),V*=vt;Y=B.length+1,Z=R(q-rt,Y,rt==0),b(q/Y)>o-et&&S("overflow"),et+=b(q/Y),q%=Y,B.splice(q++,0,et)}return N(B)}function A(O){var B,j,Y,q,et,Z,Q,st,H,rt,V,X=[],it,pt,vt,Ht;for(O=C(O),it=O.length,B=p,j=0,et=d,Z=0;Z<it;++Z)V=O[Z],V<128&&X.push(T(V));for(Y=q=X.length,q&&X.push(v);Y<it;){for(Q=o,Z=0;Z<it;++Z)V=O[Z],V>=B&&V<Q&&(Q=V);for(pt=Y+1,Q-B>b((o-j)/pt)&&S("overflow"),j+=(Q-B)*pt,B=Q,Z=0;Z<it;++Z)if(V=O[Z],V<B&&++j>o&&S("overflow"),V==B){for(st=j,H=h;rt=H<=et?u:H>=et+c?c:H-et,!(st<rt);H+=h)Ht=st-rt,vt=h-rt,X.push(T($(rt+Ht%vt,0))),st=b(Ht/vt);X.push(T($(st,0))),et=R(j,pt,Y==q),j=0,++Y}++j,++B}return X.join("")}function St(O){return P(O,function(B){return m.test(B)?F(B.slice(4).toLowerCase()):B})}function At(O){return P(O,function(B){return y.test(B)?"xn--"+A(B):B})}if(s={version:"1.3.2",ucs2:{decode:C,encode:N},decode:F,encode:A,toASCII:At,toUnicode:St},e&&n)if(i.exports==e)n.exports=s;else for(M in s)s.hasOwnProperty(M)&&(e[M]=s[M]);else t.punycode=s})(at)})(Si,Si.exports);var dh={isString:function(i){return typeof i=="string"},isObject:function(i){return typeof i=="object"&&i!==null},isNull:function(i){return i===null},isNullOrUndefined:function(i){return i==null}},We={};function ph(i,r){return Object.prototype.hasOwnProperty.call(i,r)}var vh=function(i,r,t,e){r=r||"&",t=t||"=";var n={};if(typeof i!="string"||i.length===0)return n;var a=/\+/g;i=i.split(r);var s=1e3;e&&typeof e.maxKeys=="number"&&(s=e.maxKeys);var o=i.length;s>0&&o>s&&(o=s);for(var h=0;h<o;++h){var u=i[h].replace(a,"%20"),c=u.indexOf(t),f,l,d,p;c>=0?(f=u.substr(0,c),l=u.substr(c+1)):(f=u,l=""),d=decodeURIComponent(f),p=decodeURIComponent(l),ph(n,d)?Array.isArray(n[d])?n[d].push(p):n[d]=[n[d],p]:n[d]=p}return n},Le=function(i){switch(typeof i){case"string":return i;case"boolean":return i?"true":"false";case"number":return isFinite(i)?i:"";default:return""}},mh=function(i,r,t,e){return r=r||"&",t=t||"=",i===null&&(i=void 0),typeof i=="object"?Object.keys(i).map(function(n){var a=encodeURIComponent(Le(n))+t;return Array.isArray(i[n])?i[n].map(function(s){return a+encodeURIComponent(Le(s))}).join(r):a+encodeURIComponent(Le(i[n]))}).join(r):e?encodeURIComponent(Le(e))+t+encodeURIComponent(Le(i)):""};We.decode=We.parse=vh;We.encode=We.stringify=mh;var gh=Si.exports,Ct=dh,yh=de.parse=rr;de.resolve=Ah;de.resolveObject=Ch;de.format=Sh;de.Url=Tt;function Tt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var _h=/^([a-z0-9.+-]+:)/i,xh=/:[0-9]*$/,bh=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Th=["<",">",'"',"`"," ","\r",`
`,"	"],wh=["{","}","|","\\","^","`"].concat(Th),Ai=["'"].concat(wh),Jn=["%","/","?",";","#"].concat(Ai),Qn=["/","?","#"],Ph=255,ta=/^[+a-z0-9A-Z_-]{0,63}$/,Ih=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Eh={javascript:!0,"javascript:":!0},Ci={javascript:!0,"javascript:":!0},xe={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Oi=We;function rr(i,r,t){if(i&&Ct.isObject(i)&&i instanceof Tt)return i;var e=new Tt;return e.parse(i,r,t),e}Tt.prototype.parse=function(i,r,t){if(!Ct.isString(i))throw new TypeError("Parameter 'url' must be a string, not "+typeof i);var e=i.indexOf("?"),n=e!==-1&&e<i.indexOf("#")?"?":"#",a=i.split(n),s=/\\/g;a[0]=a[0].replace(s,"/"),i=a.join(n);var o=i;if(o=o.trim(),!t&&i.split("#").length===1){var h=bh.exec(o);if(h)return this.path=o,this.href=o,this.pathname=h[1],h[2]?(this.search=h[2],r?this.query=Oi.parse(this.search.substr(1)):this.query=this.search.substr(1)):r&&(this.search="",this.query={}),this}var u=_h.exec(o);if(u){u=u[0];var c=u.toLowerCase();this.protocol=c,o=o.substr(u.length)}if(t||u||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var f=o.substr(0,2)==="//";f&&!(u&&Ci[u])&&(o=o.substr(2),this.slashes=!0)}if(!Ci[u]&&(f||u&&!xe[u])){for(var l=-1,d=0;d<Qn.length;d++){var p=o.indexOf(Qn[d]);p!==-1&&(l===-1||p<l)&&(l=p)}var v,m;l===-1?m=o.lastIndexOf("@"):m=o.lastIndexOf("@",l),m!==-1&&(v=o.slice(0,m),o=o.slice(m+1),this.auth=decodeURIComponent(v)),l=-1;for(var d=0;d<Jn.length;d++){var p=o.indexOf(Jn[d]);p!==-1&&(l===-1||p<l)&&(l=p)}l===-1&&(l=o.length),this.host=o.slice(0,l),o=o.slice(l),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var x=this.hostname.split(/\./),d=0,g=x.length;d<g;d++){var w=x[d];if(!!w&&!w.match(ta)){for(var b="",T=0,M=w.length;T<M;T++)w.charCodeAt(T)>127?b+="x":b+=w[T];if(!b.match(ta)){var S=x.slice(0,d),_=x.slice(d+1),P=w.match(Ih);P&&(S.push(P[1]),_.unshift(P[2])),_.length&&(o="/"+_.join(".")+o),this.hostname=S.join(".");break}}}this.hostname.length>Ph?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=gh.toASCII(this.hostname));var C=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+C,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),o[0]!=="/"&&(o="/"+o))}if(!Eh[c])for(var d=0,g=Ai.length;d<g;d++){var D=Ai[d];if(o.indexOf(D)!==-1){var $=encodeURIComponent(D);$===D&&($=escape(D)),o=o.split(D).join($)}}var R=o.indexOf("#");R!==-1&&(this.hash=o.substr(R),o=o.slice(0,R));var F=o.indexOf("?");if(F!==-1?(this.search=o.substr(F),this.query=o.substr(F+1),r&&(this.query=Oi.parse(this.query)),o=o.slice(0,F)):r&&(this.search="",this.query={}),o&&(this.pathname=o),xe[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var C=this.pathname||"",A=this.search||"";this.path=C+A}return this.href=this.format(),this};function Sh(i){return Ct.isString(i)&&(i=rr(i)),i instanceof Tt?i.format():Tt.prototype.format.call(i)}Tt.prototype.format=function(){var i=this.auth||"";i&&(i=encodeURIComponent(i),i=i.replace(/%3A/i,":"),i+="@");var r=this.protocol||"",t=this.pathname||"",e=this.hash||"",n=!1,a="";this.host?n=i+this.host:this.hostname&&(n=i+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&Ct.isObject(this.query)&&Object.keys(this.query).length&&(a=Oi.stringify(this.query));var s=this.search||a&&"?"+a||"";return r&&r.substr(-1)!==":"&&(r+=":"),this.slashes||(!r||xe[r])&&n!==!1?(n="//"+(n||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):n||(n=""),e&&e.charAt(0)!=="#"&&(e="#"+e),s&&s.charAt(0)!=="?"&&(s="?"+s),t=t.replace(/[?#]/g,function(o){return encodeURIComponent(o)}),s=s.replace("#","%23"),r+n+t+s+e};function Ah(i,r){return rr(i,!1,!0).resolve(r)}Tt.prototype.resolve=function(i){return this.resolveObject(rr(i,!1,!0)).format()};function Ch(i,r){return i?rr(i,!1,!0).resolveObject(r):r}Tt.prototype.resolveObject=function(i){if(Ct.isString(i)){var r=new Tt;r.parse(i,!1,!0),i=r}for(var t=new Tt,e=Object.keys(this),n=0;n<e.length;n++){var a=e[n];t[a]=this[a]}if(t.hash=i.hash,i.href==="")return t.href=t.format(),t;if(i.slashes&&!i.protocol){for(var s=Object.keys(i),o=0;o<s.length;o++){var h=s[o];h!=="protocol"&&(t[h]=i[h])}return xe[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(i.protocol&&i.protocol!==t.protocol){if(!xe[i.protocol]){for(var u=Object.keys(i),c=0;c<u.length;c++){var f=u[c];t[f]=i[f]}return t.href=t.format(),t}if(t.protocol=i.protocol,!i.host&&!Ci[i.protocol]){for(var g=(i.pathname||"").split("/");g.length&&!(i.host=g.shift()););i.host||(i.host=""),i.hostname||(i.hostname=""),g[0]!==""&&g.unshift(""),g.length<2&&g.unshift(""),t.pathname=g.join("/")}else t.pathname=i.pathname;if(t.search=i.search,t.query=i.query,t.host=i.host||"",t.auth=i.auth,t.hostname=i.hostname||i.host,t.port=i.port,t.pathname||t.search){var l=t.pathname||"",d=t.search||"";t.path=l+d}return t.slashes=t.slashes||i.slashes,t.href=t.format(),t}var p=t.pathname&&t.pathname.charAt(0)==="/",v=i.host||i.pathname&&i.pathname.charAt(0)==="/",m=v||p||t.host&&i.pathname,y=m,x=t.pathname&&t.pathname.split("/")||[],g=i.pathname&&i.pathname.split("/")||[],w=t.protocol&&!xe[t.protocol];if(w&&(t.hostname="",t.port=null,t.host&&(x[0]===""?x[0]=t.host:x.unshift(t.host)),t.host="",i.protocol&&(i.hostname=null,i.port=null,i.host&&(g[0]===""?g[0]=i.host:g.unshift(i.host)),i.host=null),m=m&&(g[0]===""||x[0]==="")),v)t.host=i.host||i.host===""?i.host:t.host,t.hostname=i.hostname||i.hostname===""?i.hostname:t.hostname,t.search=i.search,t.query=i.query,x=g;else if(g.length)x||(x=[]),x.pop(),x=x.concat(g),t.search=i.search,t.query=i.query;else if(!Ct.isNullOrUndefined(i.search)){if(w){t.hostname=t.host=x.shift();var b=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;b&&(t.auth=b.shift(),t.host=t.hostname=b.shift())}return t.search=i.search,t.query=i.query,(!Ct.isNull(t.pathname)||!Ct.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!x.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var T=x.slice(-1)[0],M=(t.host||i.host||x.length>1)&&(T==="."||T==="..")||T==="",S=0,_=x.length;_>=0;_--)T=x[_],T==="."?x.splice(_,1):T===".."?(x.splice(_,1),S++):S&&(x.splice(_,1),S--);if(!m&&!y)for(;S--;S)x.unshift("..");m&&x[0]!==""&&(!x[0]||x[0].charAt(0)!=="/")&&x.unshift(""),M&&x.join("/").substr(-1)!=="/"&&x.push("");var P=x[0]===""||x[0]&&x[0].charAt(0)==="/";if(w){t.hostname=t.host=P?"":x.length?x.shift():"";var b=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;b&&(t.auth=b.shift(),t.host=t.hostname=b.shift())}return m=m||t.host&&x.length,m&&!P&&x.unshift(""),x.length?t.pathname=x.join("/"):(t.pathname=null,t.path=null),(!Ct.isNull(t.pathname)||!Ct.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=i.auth||t.auth,t.slashes=t.slashes||i.slashes,t.href=t.format(),t};Tt.prototype.parseHost=function(){var i=this.host,r=xh.exec(i);r&&(r=r[0],r!==":"&&(this.port=r.substr(1)),i=i.substr(0,i.length-r.length)),i&&(this.hostname=i)};/*!
 * @pixi/constants - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ft;(function(i){i[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2"})(Ft||(Ft={}));var Te;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS"})(Te||(Te={}));var $e;(function(i){i[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL"})($e||($e={}));var U;(function(i){i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR"})(U||(U={}));var bt;(function(i){i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(bt||(bt={}));var we;(function(i){i[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(we||(we={}));var Vt;(function(i){i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Vt||(Vt={}));var ot;(function(i){i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.FLOAT=5126]="FLOAT",i[i.HALF_FLOAT=36193]="HALF_FLOAT"})(ot||(ot={}));var Ot;(function(i){i[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR"})(Ot||(Ot={}));var Ut;(function(i){i[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Ut||(Ut={}));var Pe;(function(i){i[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON"})(Pe||(Pe={}));var kt;(function(i){i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(kt||(kt={}));var Pt;(function(i){i[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT"})(Pt||(Pt={}));var Rr;(function(i){i[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL"})(Rr||(Rr={}));var It;(function(i){i.LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp"})(It||(It={}));var mt;(function(i){i[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE"})(mt||(mt={}));var oe;(function(i){i[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH"})(oe||(oe={}));/*!
 * @pixi/utils - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */L.RETINA_PREFIX=/@([0-9\.]+)x/;L.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var Fi=!1,ea="5.3.12";function Oh(){Fi=!0}function es(i){var r;if(!Fi){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=[`
 %c %c %c PixiJS `+ea+" - \u2730 "+i+` \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(r=window.console).log.apply(r,t)}else window.console&&window.console.log("PixiJS "+ea+" - "+i+" - http://www.pixijs.com/");Fi=!0}}var ii;function rs(){return typeof ii>"u"&&(ii=function(){var r={stencil:!0,failIfMajorPerformanceCaveat:L.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),e=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),n=!!(e&&e.getContextAttributes().stencil);if(e){var a=e.getExtension("WEBGL_lose_context");a&&a.loseContext()}return e=null,n}catch{return!1}}()),ii}function he(i,r){return r===void 0&&(r=[]),r[0]=(i>>16&255)/255,r[1]=(i>>8&255)/255,r[2]=(i&255)/255,r}function mn(i){var r=i.toString(16);return r="000000".substr(0,6-r.length)+r,"#"+r}function gn(i){return typeof i=="string"&&i[0]==="#"&&(i=i.substr(1)),parseInt(i,16)}function Fh(i){return(i[0]*255<<16)+(i[1]*255<<8)+(i[2]*255|0)}function Rh(){for(var i=[],r=[],t=0;t<32;t++)i[t]=t,r[t]=t;i[U.NORMAL_NPM]=U.NORMAL,i[U.ADD_NPM]=U.ADD,i[U.SCREEN_NPM]=U.SCREEN,r[U.NORMAL]=U.NORMAL_NPM,r[U.ADD]=U.ADD_NPM,r[U.SCREEN]=U.SCREEN_NPM;var e=[];return e.push(r),e.push(i),e}var yn=Rh();function _n(i,r){return yn[r?1:0][i]}function is(i,r,t,e){return t=t||new Float32Array(4),e||e===void 0?(t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r):(t[0]=i[0],t[1]=i[1],t[2]=i[2]),t[3]=r,t}function jr(i,r){if(r===1)return(r*255<<24)+i;if(r===0)return 0;var t=i>>16&255,e=i>>8&255,n=i&255;return t=t*r+.5|0,e=e*r+.5|0,n=n*r+.5|0,(r*255<<24)+(t<<16)+(e<<8)+n}function xn(i,r,t,e){return t=t||new Float32Array(4),t[0]=(i>>16&255)/255,t[1]=(i>>8&255)/255,t[2]=(i&255)/255,(e||e===void 0)&&(t[0]*=r,t[1]*=r,t[2]*=r),t[3]=r,t}function ns(i,r){r===void 0&&(r=null);var t=i*6;if(r=r||new Uint16Array(t),r.length!==t)throw new Error("Out buffer length is incorrect, got "+r.length+" and expected "+t);for(var e=0,n=0;e<t;e+=6,n+=4)r[e+0]=n+0,r[e+1]=n+1,r[e+2]=n+2,r[e+3]=n+0,r[e+4]=n+2,r[e+5]=n+3;return r}function as(i){if(i.BYTES_PER_ELEMENT===4)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(i.BYTES_PER_ELEMENT===2){if(i instanceof Uint16Array)return"Uint16Array"}else if(i.BYTES_PER_ELEMENT===1&&i instanceof Uint8Array)return"Uint8Array";return null}var Mh={Float32Array,Uint32Array,Int32Array,Uint8Array};function Lh(i,r){for(var t=0,e=0,n={},a=0;a<i.length;a++)e+=r[a],t+=i[a].length;for(var s=new ArrayBuffer(t*4),o=null,h=0,a=0;a<i.length;a++){var u=r[a],c=i[a],f=as(c);n[f]||(n[f]=new Mh[f](s)),o=n[f];for(var l=0;l<c.length;l++){var d=(l/u|0)*e+h,p=l%u;o[d+p]=c[l]}h+=u}return new Float32Array(s)}function qe(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function Ri(i){return!(i&i-1)&&!!i}function Mi(i){var r=(i>65535?1:0)<<4;i>>>=r;var t=(i>255?1:0)<<3;return i>>>=t,r|=t,t=(i>15?1:0)<<2,i>>>=t,r|=t,t=(i>3?1:0)<<1,i>>>=t,r|=t,r|i>>1}function ae(i,r,t){var e=i.length,n;if(!(r>=e||t===0)){t=r+t>e?e-r:t;var a=e-t;for(n=r;n<a;++n)i[n]=i[n+t];i.length=a}}function ie(i){return i===0?0:i<0?-1:1}var Nh=0;function ue(){return++Nh}var ra={};function I(i,r,t){if(t===void 0&&(t=3),!ra[r]){var e=new Error().stack;typeof e>"u"?console.warn("PixiJS Deprecation Warning: ",r+`
Deprecated since v`+i):(e=e.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",r+`
Deprecated since v`+i),console.warn(e),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",r+`
Deprecated since v`+i),console.warn(e))),ra[r]=!0}}var Li={},gt=Object.create(null),_t=Object.create(null);function Dh(){var i;for(i in gt)gt[i].destroy();for(i in _t)_t[i].destroy()}function Uh(){var i;for(i in gt)delete gt[i];for(i in _t)delete _t[i]}var Ni=function(){function i(r,t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=e||L.RESOLUTION,this.resize(r,t)}return i.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},i.prototype.resize=function(r,t){this.canvas.width=r*this.resolution,this.canvas.height=t*this.resolution},i.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(i.prototype,"width",{get:function(){return this.canvas.width},set:function(r){this.canvas.width=r},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.canvas.height},set:function(r){this.canvas.height=r},enumerable:!1,configurable:!0}),i}();function ss(i){var r=i.width,t=i.height,e=i.getContext("2d"),n=e.getImageData(0,0,r,t),a=n.data,s=a.length,o={top:null,left:null,right:null,bottom:null},h=null,u,c,f;for(u=0;u<s;u+=4)a[u+3]!==0&&(c=u/4%r,f=~~(u/4/r),o.top===null&&(o.top=f),(o.left===null||c<o.left)&&(o.left=c),(o.right===null||o.right<c)&&(o.right=c+1),(o.bottom===null||o.bottom<f)&&(o.bottom=f));return o.top!==null&&(r=o.right-o.left,t=o.bottom-o.top+1,h=e.getImageData(o.left,o.top,r,t)),{height:t,width:r,data:h}}var os=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Bh(i){var r=os.exec(i);if(r)return{mediaType:r[1]?r[1].toLowerCase():void 0,subType:r[2]?r[2].toLowerCase():void 0,charset:r[3]?r[3].toLowerCase():void 0,encoding:r[4]?r[4].toLowerCase():void 0,data:r[5]}}var vr;function hs(i,r){if(r===void 0&&(r=window.location),i.indexOf("data:")===0)return"";r=r||window.location,vr||(vr=document.createElement("a")),vr.href=i;var t=yh(vr.href),e=!t.port&&r.port===""||t.port===r.port;return t.hostname!==r.hostname||!e||t.protocol!==r.protocol?"anonymous":""}function Ze(i,r){var t=L.RETINA_PREFIX.exec(i);return t?parseFloat(t[1]):r!==void 0?r:1}const kh=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:_t,CanvasRenderTarget:Ni,DATA_URI:os,ProgramCache:Li,TextureCache:gt,clearTextureCache:Uh,correctBlendMode:_n,createIndicesForQuads:ns,decomposeDataUri:Bh,deprecation:I,destroyTextureCache:Dh,determineCrossOrigin:hs,getBufferType:as,getResolutionOfUrl:Ze,hex2rgb:he,hex2string:mn,interleaveTypedArrays:Lh,isPow2:Ri,isWebGLSupported:rs,log2:Mi,nextPow2:qe,premultiplyBlendMode:yn,premultiplyRgba:is,premultiplyTint:jr,premultiplyTintToRgba:xn,removeItems:ae,rgb2hex:Fh,sayHello:es,sign:ie,skipHello:Oh,string2hex:gn,trimCanvas:ss,uid:ue,isMobile:xt,EventEmitter:Oe,earcut:er.exports,url:de},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ie=Math.PI*2,us=180/Math.PI,ls=Math.PI/180,nt;(function(i){i[i.POLY=0]="POLY",i[i.RECT=1]="RECT",i[i.CIRC=2]="CIRC",i[i.ELIP=3]="ELIP",i[i.RREC=4]="RREC"})(nt||(nt={}));var W=function(){function i(r,t,e,n){r===void 0&&(r=0),t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0),this.x=Number(r),this.y=Number(t),this.width=Number(e),this.height=Number(n),this.type=nt.RECT}return Object.defineProperty(i.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(i,"EMPTY",{get:function(){return new i(0,0,0,0)},enumerable:!1,configurable:!0}),i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.copyFrom=function(r){return this.x=r.x,this.y=r.y,this.width=r.width,this.height=r.height,this},i.prototype.copyTo=function(r){return r.x=this.x,r.y=this.y,r.width=this.width,r.height=this.height,r},i.prototype.contains=function(r,t){return this.width<=0||this.height<=0?!1:r>=this.x&&r<this.x+this.width&&t>=this.y&&t<this.y+this.height},i.prototype.pad=function(r,t){return r===void 0&&(r=0),t===void 0&&(t=r),this.x-=r,this.y-=t,this.width+=r*2,this.height+=t*2,this},i.prototype.fit=function(r){var t=Math.max(this.x,r.x),e=Math.min(this.x+this.width,r.x+r.width),n=Math.max(this.y,r.y),a=Math.min(this.y+this.height,r.y+r.height);return this.x=t,this.width=Math.max(e-t,0),this.y=n,this.height=Math.max(a-n,0),this},i.prototype.ceil=function(r,t){r===void 0&&(r=1),t===void 0&&(t=.001);var e=Math.ceil((this.x+this.width-t)*r)/r,n=Math.ceil((this.y+this.height-t)*r)/r;return this.x=Math.floor((this.x+t)*r)/r,this.y=Math.floor((this.y+t)*r)/r,this.width=e-this.x,this.height=n-this.y,this},i.prototype.enlarge=function(r){var t=Math.min(this.x,r.x),e=Math.max(this.x+this.width,r.x+r.width),n=Math.min(this.y,r.y),a=Math.max(this.y+this.height,r.y+r.height);return this.x=t,this.width=e-t,this.y=n,this.height=a-n,this},i}(),fs=function(){function i(r,t,e){r===void 0&&(r=0),t===void 0&&(t=0),e===void 0&&(e=0),this.x=r,this.y=t,this.radius=e,this.type=nt.CIRC}return i.prototype.clone=function(){return new i(this.x,this.y,this.radius)},i.prototype.contains=function(r,t){if(this.radius<=0)return!1;var e=this.radius*this.radius,n=this.x-r,a=this.y-t;return n*=n,a*=a,n+a<=e},i.prototype.getBounds=function(){return new W(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},i}(),cs=function(){function i(r,t,e,n){r===void 0&&(r=0),t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0),this.x=r,this.y=t,this.width=e,this.height=n,this.type=nt.ELIP}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.contains=function(r,t){if(this.width<=0||this.height<=0)return!1;var e=(r-this.x)/this.width,n=(t-this.y)/this.height;return e*=e,n*=n,e+n<=1},i.prototype.getBounds=function(){return new W(this.x-this.width,this.y-this.height,this.width,this.height)},i}(),be=function(){function i(){for(var r=arguments,t=[],e=0;e<arguments.length;e++)t[e]=r[e];var n=Array.isArray(t[0])?t[0]:t;if(typeof n[0]!="number"){for(var a=[],s=0,o=n.length;s<o;s++)a.push(n[s].x,n[s].y);n=a}this.points=n,this.type=nt.POLY,this.closeStroke=!0}return i.prototype.clone=function(){var r=this.points.slice(),t=new i(r);return t.closeStroke=this.closeStroke,t},i.prototype.contains=function(r,t){for(var e=!1,n=this.points.length/2,a=0,s=n-1;a<n;s=a++){var o=this.points[a*2],h=this.points[a*2+1],u=this.points[s*2],c=this.points[s*2+1],f=h>t!=c>t&&r<(u-o)*((t-h)/(c-h))+o;f&&(e=!e)}return e},i}(),ds=function(){function i(r,t,e,n,a){r===void 0&&(r=0),t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0),a===void 0&&(a=20),this.x=r,this.y=t,this.width=e,this.height=n,this.radius=a,this.type=nt.RREC}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.radius)},i.prototype.contains=function(r,t){if(this.width<=0||this.height<=0)return!1;if(r>=this.x&&r<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||r>=this.x+this.radius&&r<=this.x+this.width-this.radius)return!0;var e=r-(this.x+this.radius),n=t-(this.y+this.radius),a=this.radius*this.radius;if(e*e+n*n<=a||(e=r-(this.x+this.width-this.radius),e*e+n*n<=a)||(n=t-(this.y+this.height-this.radius),e*e+n*n<=a)||(e=r-(this.x+this.radius),e*e+n*n<=a))return!0}return!1},i}(),ct=function(){function i(r,t){r===void 0&&(r=0),t===void 0&&(t=0),this.x=r,this.y=t}return i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.copyFrom=function(r){return this.set(r.x,r.y),this},i.prototype.copyTo=function(r){return r.set(this.x,this.y),r},i.prototype.equals=function(r){return r.x===this.x&&r.y===this.y},i.prototype.set=function(r,t){return r===void 0&&(r=0),t===void 0&&(t=r),this.x=r,this.y=t,this},i}(),ne=function(){function i(r,t,e,n){e===void 0&&(e=0),n===void 0&&(n=0),this._x=e,this._y=n,this.cb=r,this.scope=t}return i.prototype.clone=function(r,t){return r===void 0&&(r=this.cb),t===void 0&&(t=this.scope),new i(r,t,this._x,this._y)},i.prototype.set=function(r,t){return r===void 0&&(r=0),t===void 0&&(t=r),(this._x!==r||this._y!==t)&&(this._x=r,this._y=t,this.cb.call(this.scope)),this},i.prototype.copyFrom=function(r){return(this._x!==r.x||this._y!==r.y)&&(this._x=r.x,this._y=r.y,this.cb.call(this.scope)),this},i.prototype.copyTo=function(r){return r.set(this._x,this._y),r},i.prototype.equals=function(r){return r.x===this._x&&r.y===this._y},Object.defineProperty(i.prototype,"x",{get:function(){return this._x},set:function(r){this._x!==r&&(this._x=r,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},set:function(r){this._y!==r&&(this._y=r,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),i}(),ht=function(){function i(r,t,e,n,a,s){r===void 0&&(r=1),t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=1),a===void 0&&(a=0),s===void 0&&(s=0),this.array=null,this.a=r,this.b=t,this.c=e,this.d=n,this.tx=a,this.ty=s}return i.prototype.fromArray=function(r){this.a=r[0],this.b=r[1],this.c=r[3],this.d=r[4],this.tx=r[2],this.ty=r[5]},i.prototype.set=function(r,t,e,n,a,s){return this.a=r,this.b=t,this.c=e,this.d=n,this.tx=a,this.ty=s,this},i.prototype.toArray=function(r,t){this.array||(this.array=new Float32Array(9));var e=t||this.array;return r?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty,e[8]=1):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0,e[8]=1),e},i.prototype.apply=function(r,t){t=t||new ct;var e=r.x,n=r.y;return t.x=this.a*e+this.c*n+this.tx,t.y=this.b*e+this.d*n+this.ty,t},i.prototype.applyInverse=function(r,t){t=t||new ct;var e=1/(this.a*this.d+this.c*-this.b),n=r.x,a=r.y;return t.x=this.d*e*n+-this.c*e*a+(this.ty*this.c-this.tx*this.d)*e,t.y=this.a*e*a+-this.b*e*n+(-this.ty*this.a+this.tx*this.b)*e,t},i.prototype.translate=function(r,t){return this.tx+=r,this.ty+=t,this},i.prototype.scale=function(r,t){return this.a*=r,this.d*=t,this.c*=r,this.b*=t,this.tx*=r,this.ty*=t,this},i.prototype.rotate=function(r){var t=Math.cos(r),e=Math.sin(r),n=this.a,a=this.c,s=this.tx;return this.a=n*t-this.b*e,this.b=n*e+this.b*t,this.c=a*t-this.d*e,this.d=a*e+this.d*t,this.tx=s*t-this.ty*e,this.ty=s*e+this.ty*t,this},i.prototype.append=function(r){var t=this.a,e=this.b,n=this.c,a=this.d;return this.a=r.a*t+r.b*n,this.b=r.a*e+r.b*a,this.c=r.c*t+r.d*n,this.d=r.c*e+r.d*a,this.tx=r.tx*t+r.ty*n+this.tx,this.ty=r.tx*e+r.ty*a+this.ty,this},i.prototype.setTransform=function(r,t,e,n,a,s,o,h,u){return this.a=Math.cos(o+u)*a,this.b=Math.sin(o+u)*a,this.c=-Math.sin(o-h)*s,this.d=Math.cos(o-h)*s,this.tx=r-(e*this.a+n*this.c),this.ty=t-(e*this.b+n*this.d),this},i.prototype.prepend=function(r){var t=this.tx;if(r.a!==1||r.b!==0||r.c!==0||r.d!==1){var e=this.a,n=this.c;this.a=e*r.a+this.b*r.c,this.b=e*r.b+this.b*r.d,this.c=n*r.a+this.d*r.c,this.d=n*r.b+this.d*r.d}return this.tx=t*r.a+this.ty*r.c+r.tx,this.ty=t*r.b+this.ty*r.d+r.ty,this},i.prototype.decompose=function(r){var t=this.a,e=this.b,n=this.c,a=this.d,s=-Math.atan2(-n,a),o=Math.atan2(e,t),h=Math.abs(s+o);return h<1e-5||Math.abs(Ie-h)<1e-5?(r.rotation=o,r.skew.x=r.skew.y=0):(r.rotation=0,r.skew.x=s,r.skew.y=o),r.scale.x=Math.sqrt(t*t+e*e),r.scale.y=Math.sqrt(n*n+a*a),r.position.x=this.tx,r.position.y=this.ty,r},i.prototype.invert=function(){var r=this.a,t=this.b,e=this.c,n=this.d,a=this.tx,s=r*n-t*e;return this.a=n/s,this.b=-t/s,this.c=-e/s,this.d=r/s,this.tx=(e*this.ty-n*a)/s,this.ty=-(r*this.ty-t*a)/s,this},i.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},i.prototype.clone=function(){var r=new i;return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},i.prototype.copyTo=function(r){return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},i.prototype.copyFrom=function(r){return this.a=r.a,this.b=r.b,this.c=r.c,this.d=r.d,this.tx=r.tx,this.ty=r.ty,this},Object.defineProperty(i,"IDENTITY",{get:function(){return new i},enumerable:!1,configurable:!0}),Object.defineProperty(i,"TEMP_MATRIX",{get:function(){return new i},enumerable:!1,configurable:!0}),i}(),Qt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],te=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ee=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],re=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Di=[],ps=[],mr=Math.sign;function Xh(){for(var i=0;i<16;i++){var r=[];Di.push(r);for(var t=0;t<16;t++)for(var e=mr(Qt[i]*Qt[t]+ee[i]*te[t]),n=mr(te[i]*Qt[t]+re[i]*te[t]),a=mr(Qt[i]*ee[t]+ee[i]*re[t]),s=mr(te[i]*ee[t]+re[i]*re[t]),o=0;o<16;o++)if(Qt[o]===e&&te[o]===n&&ee[o]===a&&re[o]===s){r.push(o);break}}for(var i=0;i<16;i++){var h=new ht;h.set(Qt[i],te[i],ee[i],re[i],0,0),ps.push(h)}}Xh();var J={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(i){return Qt[i]},uY:function(i){return te[i]},vX:function(i){return ee[i]},vY:function(i){return re[i]},inv:function(i){return i&8?i&15:-i&7},add:function(i,r){return Di[i][r]},sub:function(i,r){return Di[i][J.inv(r)]},rotate180:function(i){return i^4},isVertical:function(i){return(i&3)===2},byDirection:function(i,r){return Math.abs(i)*2<=Math.abs(r)?r>=0?J.S:J.N:Math.abs(r)*2<=Math.abs(i)?i>0?J.E:J.W:r>0?i>0?J.SE:J.SW:i>0?J.NE:J.NW},matrixAppendRotationInv:function(i,r,t,e){t===void 0&&(t=0),e===void 0&&(e=0);var n=ps[J.inv(r)];n.tx=t,n.ty=e,i.append(n)}},bn=function(){function i(){this.worldTransform=new ht,this.localTransform=new ht,this.position=new ne(this.onChange,this,0,0),this.scale=new ne(this.onChange,this,1,1),this.pivot=new ne(this.onChange,this,0,0),this.skew=new ne(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return i.prototype.onChange=function(){this._localID++},i.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},i.prototype.updateLocalTransform=function(){var r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)},i.prototype.updateTransform=function(r){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){var e=r.worldTransform,n=this.worldTransform;n.a=t.a*e.a+t.b*e.c,n.b=t.a*e.b+t.b*e.d,n.c=t.c*e.a+t.d*e.c,n.d=t.c*e.b+t.d*e.d,n.tx=t.tx*e.a+t.ty*e.c+e.tx,n.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=r._worldID,this._worldID++}},i.prototype.setFromMatrix=function(r){r.decompose(this),this._localID++},Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())},enumerable:!1,configurable:!0}),i.IDENTITY=new i,i}();/*!
 * @pixi/display - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */L.SORTABLE_CHILDREN=!1;var Ke=function(){function i(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return i.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},i.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},i.prototype.getRectangle=function(r){return this.minX>this.maxX||this.minY>this.maxY?W.EMPTY:(r=r||new W(0,0,1,1),r.x=this.minX,r.y=this.minY,r.width=this.maxX-this.minX,r.height=this.maxY-this.minY,r)},i.prototype.addPoint=function(r){this.minX=Math.min(this.minX,r.x),this.maxX=Math.max(this.maxX,r.x),this.minY=Math.min(this.minY,r.y),this.maxY=Math.max(this.maxY,r.y)},i.prototype.addQuad=function(r){var t=this.minX,e=this.minY,n=this.maxX,a=this.maxY,s=r[0],o=r[1];t=s<t?s:t,e=o<e?o:e,n=s>n?s:n,a=o>a?o:a,s=r[2],o=r[3],t=s<t?s:t,e=o<e?o:e,n=s>n?s:n,a=o>a?o:a,s=r[4],o=r[5],t=s<t?s:t,e=o<e?o:e,n=s>n?s:n,a=o>a?o:a,s=r[6],o=r[7],t=s<t?s:t,e=o<e?o:e,n=s>n?s:n,a=o>a?o:a,this.minX=t,this.minY=e,this.maxX=n,this.maxY=a},i.prototype.addFrame=function(r,t,e,n,a){this.addFrameMatrix(r.worldTransform,t,e,n,a)},i.prototype.addFrameMatrix=function(r,t,e,n,a){var s=r.a,o=r.b,h=r.c,u=r.d,c=r.tx,f=r.ty,l=this.minX,d=this.minY,p=this.maxX,v=this.maxY,m=s*t+h*e+c,y=o*t+u*e+f;l=m<l?m:l,d=y<d?y:d,p=m>p?m:p,v=y>v?y:v,m=s*n+h*e+c,y=o*n+u*e+f,l=m<l?m:l,d=y<d?y:d,p=m>p?m:p,v=y>v?y:v,m=s*t+h*a+c,y=o*t+u*a+f,l=m<l?m:l,d=y<d?y:d,p=m>p?m:p,v=y>v?y:v,m=s*n+h*a+c,y=o*n+u*a+f,l=m<l?m:l,d=y<d?y:d,p=m>p?m:p,v=y>v?y:v,this.minX=l,this.minY=d,this.maxX=p,this.maxY=v},i.prototype.addVertexData=function(r,t,e){for(var n=this.minX,a=this.minY,s=this.maxX,o=this.maxY,h=t;h<e;h+=2){var u=r[h],c=r[h+1];n=u<n?u:n,a=c<a?c:a,s=u>s?u:s,o=c>o?c:o}this.minX=n,this.minY=a,this.maxX=s,this.maxY=o},i.prototype.addVertices=function(r,t,e,n){this.addVerticesMatrix(r.worldTransform,t,e,n)},i.prototype.addVerticesMatrix=function(r,t,e,n,a,s){a===void 0&&(a=0),s===void 0&&(s=a);for(var o=r.a,h=r.b,u=r.c,c=r.d,f=r.tx,l=r.ty,d=this.minX,p=this.minY,v=this.maxX,m=this.maxY,y=e;y<n;y+=2){var x=t[y],g=t[y+1],w=o*x+u*g+f,b=c*g+h*x+l;d=Math.min(d,w-a),v=Math.max(v,w+a),p=Math.min(p,b-s),m=Math.max(m,b+s)}this.minX=d,this.minY=p,this.maxX=v,this.maxY=m},i.prototype.addBounds=function(r){var t=this.minX,e=this.minY,n=this.maxX,a=this.maxY;this.minX=r.minX<t?r.minX:t,this.minY=r.minY<e?r.minY:e,this.maxX=r.maxX>n?r.maxX:n,this.maxY=r.maxY>a?r.maxY:a},i.prototype.addBoundsMask=function(r,t){var e=r.minX>t.minX?r.minX:t.minX,n=r.minY>t.minY?r.minY:t.minY,a=r.maxX<t.maxX?r.maxX:t.maxX,s=r.maxY<t.maxY?r.maxY:t.maxY;if(e<=a&&n<=s){var o=this.minX,h=this.minY,u=this.maxX,c=this.maxY;this.minX=e<o?e:o,this.minY=n<h?n:h,this.maxX=a>u?a:u,this.maxY=s>c?s:c}},i.prototype.addBoundsMatrix=function(r,t){this.addFrameMatrix(t,r.minX,r.minY,r.maxX,r.maxY)},i.prototype.addBoundsArea=function(r,t){var e=r.minX>t.x?r.minX:t.x,n=r.minY>t.y?r.minY:t.y,a=r.maxX<t.x+t.width?r.maxX:t.x+t.width,s=r.maxY<t.y+t.height?r.maxY:t.y+t.height;if(e<=a&&n<=s){var o=this.minX,h=this.minY,u=this.maxX,c=this.maxY;this.minX=e<o?e:o,this.minY=n<h?n:h,this.maxX=a>u?a:u,this.maxY=s>c?s:c}},i.prototype.pad=function(r,t){r===void 0&&(r=0),t===void 0&&(t=r),this.isEmpty()||(this.minX-=r,this.maxX+=r,this.minY-=t,this.maxY+=t)},i.prototype.addFramePad=function(r,t,e,n,a,s){r-=a,t-=s,e+=a,n+=s,this.minX=this.minX<r?this.minX:r,this.maxX=this.maxX>e?this.maxX:e,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>n?this.maxY:n},i}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ui=function(i,r){return Ui=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Ui(i,r)};function Tn(i,r){Ui(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var ut=function(i){Tn(r,i);function r(){var t=i.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new bn,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new Ke,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return r.mixin=function(t){for(var e=Object.keys(t),n=0;n<e.length;++n){var a=e[n];Object.defineProperty(r.prototype,a,Object.getOwnPropertyDescriptor(t,a))}},r.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},r.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},r.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new W),e=this._boundsRect),this._bounds.getRectangle(e)},r.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new W),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Ke);var e=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var a=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,t);return this.parent=n,this.transform=e,this._bounds=a,this._bounds.updateID+=this._boundsID-s,o},r.prototype.toGlobal=function(t,e,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},r.prototype.toLocal=function(t,e,n,a){return e&&(t=e.toGlobal(t,n,a)),a||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},r.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},r.prototype.setTransform=function(t,e,n,a,s,o,h,u,c){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=1),a===void 0&&(a=1),s===void 0&&(s=0),o===void 0&&(o=0),h===void 0&&(h=0),u===void 0&&(u=0),c===void 0&&(c=0),this.position.x=t,this.position.y=e,this.scale.x=n||1,this.scale.y=a||1,this.rotation=s,this.skew.x=o,this.skew.y=h,this.pivot.x=u,this.pivot.y=c,this},r.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(r.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new wn),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),r.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},r.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(r.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"angle",{get:function(){return this.transform.rotation*us},set:function(t){this.transform.rotation=t*ls},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mask",{get:function(){return this._mask},set:function(t){if(this._mask){var e=this._mask.maskObject||this._mask;e.renderable=!0,e.isMask=!1}if(this._mask=t,this._mask){var e=this._mask.maskObject||this._mask;e.renderable=!1,e.isMask=!0}},enumerable:!1,configurable:!0}),r}(Oe),wn=function(i){Tn(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.sortDirty=null,t}return r}(ut);ut.prototype.displayObjectUpdateTransform=ut.prototype.updateTransform;function Gh(i,r){return i.zIndex===r.zIndex?i._lastSortedIndex-r._lastSortedIndex:i.zIndex-r.zIndex}var Et=function(i){Tn(r,i);function r(){var t=i.call(this)||this;return t.children=[],t.sortableChildren=L.SORTABLE_CHILDREN,t.sortDirty=!1,t}return r.prototype.onChildrenChange=function(t){},r.prototype.addChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var a=0;a<e.length;a++)this.addChild(e[a]);else{var s=e[0];s.parent&&s.parent.removeChild(s),s.parent=this,this.sortDirty=!0,s.transform._parentID=-1,this.children.push(s),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this)}return e[0]},r.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},r.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),a=this.getChildIndex(e);this.children[n]=e,this.children[a]=t,this.onChildrenChange(n<a?n:a)}},r.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e},r.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);ae(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)},r.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},r.prototype.removeChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var a=0;a<e.length;a++)this.removeChild(e[a]);else{var s=e[0],o=this.children.indexOf(s);if(o===-1)return null;s.parent=null,s.transform._parentID=-1,ae(this.children,o,1),this._boundsID++,this.onChildrenChange(o),s.emit("removed",this),this.emit("childRemoved",s,this,o)}return e[0]},r.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,ae(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},r.prototype.removeChildren=function(t,e){t===void 0&&(t=0),e===void 0&&(e=this.children.length);var n=t,a=e,s=a-n,o;if(s>0&&s<=a){o=this.children.splice(n,s);for(var h=0;h<o.length;++h)o[h].parent=null,o[h].transform&&(o[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var h=0;h<o.length;++h)o[h].emit("removed",this),this.emit("childRemoved",o[h],this,h);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},r.prototype.sortChildren=function(){for(var t=!1,e=0,n=this.children.length;e<n;++e){var a=this.children[e];a._lastSortedIndex=e,!t&&a.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(Gh),this.sortDirty=!1},r.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var n=this.children[t];n.visible&&n.updateTransform()}},r.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){var n=e._mask.maskObject||e._mask;n.calculateBounds(),this._bounds.addBoundsMask(e._bounds,n._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},r.prototype.getLocalBounds=function(t,e){e===void 0&&(e=!1);var n=i.prototype.getLocalBounds.call(this,t);if(!e)for(var a=0,s=this.children.length;a<s;++a){var o=this.children[a];o.visible&&o.updateTransform()}return n},r.prototype._calculateBounds=function(){},r.prototype.render=function(t){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].render(t)}},r.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var a=0;a<e.length;a++)e[a].enabled&&this._enabledFilters.push(e[a]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}n&&t.mask.push(this,this._mask),this._render(t);for(var a=0,s=this.children.length;a<s;a++)this.children[a].render(t);t.batch.flush(),n&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},r.prototype._render=function(t){},r.prototype.destroy=function(t){i.prototype.destroy.call(this),this.sortDirty=!1;var e=typeof t=="boolean"?t:t&&t.children,n=this.removeChildren(0,this.children.length);if(e)for(var a=0;a<n.length;++a)n[a].destroy(t)},Object.defineProperty(r.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t},enumerable:!1,configurable:!0}),r}(ut);Et.prototype.containerUpdateTransform=Et.prototype.updateTransform;/*!
 * @pixi/accessibility - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var vs={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};ut.mixin(vs);var jh=9,gr=100,Hh=0,zh=0,ia=2,na=1,Vh=-1e3,Yh=-1e3,Wh=2,ms=function(){function i(r){this._hookDiv=null,(xt.tablet||xt.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width=gr+"px",t.style.height=gr+"px",t.style.position="absolute",t.style.top=Hh+"px",t.style.left=zh+"px",t.style.zIndex=ia.toString(),this.div=t,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=r,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(i.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),i.prototype.createTouchHook=function(){var r=this,t=document.createElement("button");t.style.width=na+"px",t.style.height=na+"px",t.style.position="absolute",t.style.top=Vh+"px",t.style.left=Yh+"px",t.style.zIndex=Wh.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessability for this content",t.addEventListener("focus",function(){r._isMobileAccessibility=!0,r.activate(),r.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},i.prototype.destroyTouchHook=function(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)},i.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},i.prototype.deactivate=function(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},i.prototype.updateAccessibleObjects=function(r){if(!(!r.visible||!r.accessibleChildren)){r.accessible&&r.interactive&&(r._accessibleActive||this.addChild(r),r.renderId=this.renderId);for(var t=r.children,e=0;e<t.length;e++)this.updateAccessibleObjects(t[e])}},i.prototype.update=function(){var r=performance.now();if(!(xt.android.device&&r<this.androidUpdateCount)&&(this.androidUpdateCount=r+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=this.renderer.resolution,n=t.width/this.renderer.width*e,a=t.height/this.renderer.height*e,s=this.div;s.style.left=t.left+"px",s.style.top=t.top+"px",s.style.width=this.renderer.width+"px",s.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var h=this.children[o];if(h.renderId!==this.renderId)h._accessibleActive=!1,ae(this.children,o,1),this.div.removeChild(h._accessibleDiv),this.pool.push(h._accessibleDiv),h._accessibleDiv=null,o--;else{s=h._accessibleDiv;var u=h.hitArea,c=h.worldTransform;h.hitArea?(s.style.left=(c.tx+u.x*c.a)*n+"px",s.style.top=(c.ty+u.y*c.d)*a+"px",s.style.width=u.width*c.a*n+"px",s.style.height=u.height*c.d*a+"px"):(u=h.getBounds(),this.capHitArea(u),s.style.left=u.x*n+"px",s.style.top=u.y*a+"px",s.style.width=u.width*n+"px",s.style.height=u.height*a+"px",s.title!==h.accessibleTitle&&h.accessibleTitle!==null&&(s.title=h.accessibleTitle),s.getAttribute("aria-label")!==h.accessibleHint&&h.accessibleHint!==null&&s.setAttribute("aria-label",h.accessibleHint)),(h.accessibleTitle!==s.title||h.tabIndex!==s.tabIndex)&&(s.title=h.accessibleTitle,s.tabIndex=h.tabIndex,this.debug&&this.updateDebugHTML(s))}}this.renderId++}},i.prototype.updateDebugHTML=function(r){r.innerHTML="type: "+r.type+"</br> title : "+r.title+"</br> tabIndex: "+r.tabIndex},i.prototype.capHitArea=function(r){r.x<0&&(r.width+=r.x,r.x=0),r.y<0&&(r.height+=r.y,r.y=0),r.x+r.width>this.renderer.width&&(r.width=this.renderer.width-r.x),r.y+r.height>this.renderer.height&&(r.height=this.renderer.height-r.y)},i.prototype.addChild=function(r){var t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=gr+"px",t.style.height=gr+"px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=ia.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=r.accessiblePointerEvents,t.type=r.accessibleType,r.accessibleTitle&&r.accessibleTitle!==null?t.title=r.accessibleTitle:(!r.accessibleHint||r.accessibleHint===null)&&(t.title="displayObject "+r.tabIndex),r.accessibleHint&&r.accessibleHint!==null&&t.setAttribute("aria-label",r.accessibleHint),this.debug&&this.updateDebugHTML(t),r._accessibleActive=!0,r._accessibleDiv=t,t.displayObject=r,this.children.push(r),this.div.appendChild(r._accessibleDiv),r._accessibleDiv.tabIndex=r.tabIndex},i.prototype._onClick=function(r){var t=this.renderer.plugins.interaction;t.dispatchEvent(r.target.displayObject,"click",t.eventData),t.dispatchEvent(r.target.displayObject,"pointertap",t.eventData),t.dispatchEvent(r.target.displayObject,"tap",t.eventData)},i.prototype._onFocus=function(r){r.target.getAttribute("aria-live")||r.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction;t.dispatchEvent(r.target.displayObject,"mouseover",t.eventData)},i.prototype._onFocusOut=function(r){r.target.getAttribute("aria-live")||r.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction;t.dispatchEvent(r.target.displayObject,"mouseout",t.eventData)},i.prototype._onKeyDown=function(r){r.keyCode===jh&&this.activate()},i.prototype._onMouseMove=function(r){r.movementX===0&&r.movementY===0||this.deactivate()},i.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},i}();/*!
 * @pixi/ticker - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */L.TARGET_FPMS=.06;var Rt;(function(i){i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY"})(Rt||(Rt={}));var ni=function(){function i(r,t,e,n){t===void 0&&(t=null),e===void 0&&(e=0),n===void 0&&(n=!1),this.fn=r,this.context=t,this.priority=e,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}return i.prototype.match=function(r,t){return t===void 0&&(t=null),this.fn===r&&this.context===t},i.prototype.emit=function(r){this.fn&&(this.context?this.fn.call(this.context,r):this.fn(r));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},i.prototype.connect=function(r){this.previous=r,r.next&&(r.next.previous=this),this.next=r.next,r.next=this},i.prototype.destroy=function(r){r===void 0&&(r=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=r?null:t,this.previous=null,t},i}(),ft=function(){function i(){var r=this;this._head=new ni(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/L.TARGET_FPMS,this.elapsedMS=1/L.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(t){r._requestId=null,r.started&&(r.update(t),r.started&&r._requestId===null&&r._head.next&&(r._requestId=requestAnimationFrame(r._tick)))}}return i.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},i.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},i.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},i.prototype.add=function(r,t,e){return e===void 0&&(e=Rt.NORMAL),this._addListener(new ni(r,t,e))},i.prototype.addOnce=function(r,t,e){return e===void 0&&(e=Rt.NORMAL),this._addListener(new ni(r,t,e,!0))},i.prototype._addListener=function(r){var t=this._head.next,e=this._head;if(!t)r.connect(e);else{for(;t;){if(r.priority>t.priority){r.connect(e);break}e=t,t=t.next}r.previous||r.connect(e)}return this._startIfPossible(),this},i.prototype.remove=function(r,t){for(var e=this._head.next;e;)e.match(r,t)?e=e.destroy():e=e.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(i.prototype,"count",{get:function(){if(!this._head)return 0;for(var r=0,t=this._head;t=t.next;)r++;return r},enumerable:!1,configurable:!0}),i.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},i.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},i.prototype.destroy=function(){if(!this._protected){this.stop();for(var r=this._head.next;r;)r=r.destroy(!0);this._head.destroy(),this._head=null}},i.prototype.update=function(r){r===void 0&&(r=performance.now());var t;if(r>this.lastTime){if(t=this.elapsedMS=r-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var e=r-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=r-e%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*L.TARGET_FPMS;for(var n=this._head,a=n.next;a;)a=a.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=r},Object.defineProperty(i.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(r){var t=Math.min(this.maxFPS,r),e=Math.min(Math.max(0,t)/1e3,L.TARGET_FPMS);this._maxElapsedMS=1/e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(r){if(r===0)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,r);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"shared",{get:function(){if(!i._shared){var r=i._shared=new i;r.autoStart=!0,r._protected=!0}return i._shared},enumerable:!1,configurable:!0}),Object.defineProperty(i,"system",{get:function(){if(!i._system){var r=i._system=new i;r.autoStart=!0,r._protected=!0}return i._system},enumerable:!1,configurable:!0}),i}(),gs=function(){function i(){}return i.init=function(r){var t=this;r=Object.assign({autoStart:!0,sharedTicker:!1},r),Object.defineProperty(this,"ticker",{set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Rt.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=r.sharedTicker?ft.shared:new ft,r.autoStart&&this.start()},i.destroy=function(){if(this._ticker){var r=this._ticker;this.ticker=null,r.destroy()}},i}();/*!
 * @pixi/interaction - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Bi=function(){function i(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new ct,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(i.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),i.prototype.getLocalPosition=function(r,t,e){return r.worldTransform.applyInverse(e||this.global,t)},i.prototype.copyEvent=function(r){"isPrimary"in r&&r.isPrimary&&(this.isPrimary=!0),this.button="button"in r&&r.button;var t="buttons"in r&&r.buttons;this.buttons=Number.isInteger(t)?t:"which"in r&&r.which,this.width="width"in r&&r.width,this.height="height"in r&&r.height,this.tiltX="tiltX"in r&&r.tiltX,this.tiltY="tiltY"in r&&r.tiltY,this.pointerType="pointerType"in r&&r.pointerType,this.pressure="pressure"in r&&r.pressure,this.rotationAngle="rotationAngle"in r&&r.rotationAngle,this.twist="twist"in r&&r.twist||0,this.tangentialPressure="tangentialPressure"in r&&r.tangentialPressure||0},i.prototype.reset=function(){this.isPrimary=!1},i}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ki=function(i,r){return ki=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},ki(i,r)};function $h(i,r){ki(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var ys=function(){function i(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return i.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},i.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},i}(),Ar=function(){function i(r){this._pointerId=r,this._flags=i.FLAGS.NONE}return i.prototype._doSet=function(r,t){t?this._flags=this._flags|r:this._flags=this._flags&~r},Object.defineProperty(i.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"flags",{get:function(){return this._flags},set:function(r){this._flags=r},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"none",{get:function(){return this._flags===i.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"over",{get:function(){return(this._flags&i.FLAGS.OVER)!==0},set:function(r){this._doSet(i.FLAGS.OVER,r)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightDown",{get:function(){return(this._flags&i.FLAGS.RIGHT_DOWN)!==0},set:function(r){this._doSet(i.FLAGS.RIGHT_DOWN,r)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftDown",{get:function(){return(this._flags&i.FLAGS.LEFT_DOWN)!==0},set:function(r){this._doSet(i.FLAGS.LEFT_DOWN,r)},enumerable:!1,configurable:!0}),i.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2}),i}(),qh=function(){function i(){this._tempPoint=new ct}return i.prototype.recursiveFindHit=function(r,t,e,n,a){if(!t||!t.visible)return!1;var s=r.data.global;a=t.interactive||a;var o=!1,h=a,u=!0;if(t.hitArea?(n&&(t.worldTransform.applyInverse(s,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(n=!1,u=!1)),h=!1):t._mask&&n&&(t._mask.containsPoint&&t._mask.containsPoint(s)||(n=!1)),u&&t.interactiveChildren&&t.children)for(var c=t.children,f=c.length-1;f>=0;f--){var l=c[f],d=this.recursiveFindHit(r,l,e,n,h);if(d){if(!l.parent)continue;h=!1,d&&(r.target&&(n=!1),o=!0)}}return a&&(n&&!r.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(s)&&(o=!0),t.interactive&&(o&&!r.target&&(r.target=t),e&&e(r,t,!!o))),o},i.prototype.findHit=function(r,t,e,n){this.recursiveFindHit(r,t,e,n,!1)},i}(),_s={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(i){i?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};ut.mixin(_s);var yr=1,_r={target:null,data:{global:null}},xs=function(i){$h(r,i);function r(t,e){var n=i.call(this)||this;return e=e||{},n.renderer=t,n.autoPreventDefault=e.autoPreventDefault!==void 0?e.autoPreventDefault:!0,n.interactionFrequency=e.interactionFrequency||10,n.mouse=new Bi,n.mouse.identifier=yr,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[yr]=n.mouse,n.interactionDataPool=[],n.eventData=new ys,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!1,n.supportsTouchEvents="ontouchstart"in window,n.supportsPointerEvents=!!window.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new qh,n._tempDisplayObject=new wn,n._useSystemTicker=e.useSystemTicker!==void 0?e.useSystemTicker:!0,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return Object.defineProperty(r.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),r.prototype.hitTest=function(t,e){return _r.target=null,_r.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(_r,e,null,!0),_r.target},r.prototype.setTargetElement=function(t,e){e===void 0&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},r.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(ft.system.add(this.tickerUpdate,this,Rt.INTERACTION),this.tickerAdded=!0)},r.prototype.removeTickerListener=function(){!this.tickerAdded||(ft.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},r.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},r.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},r.prototype.tickerUpdate=function(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},r.prototype.update=function(){if(!!this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var t in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&e.pointerType!=="touch"){var n=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},r.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(typeof e){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e);break}else typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},r.prototype.dispatchEvent=function(t,e,n){(!n.stopPropagationHint||t===n.stopsPropagatingAt)&&(n.currentTarget=t,n.type=e,t.emit(e,n),t[e]&&t[e](n))},r.prototype.delayDispatchEvent=function(t,e,n){this.delayedEvents.push({displayObject:t,eventString:e,eventData:n})},r.prototype.mapPositionToPoint=function(t,e,n){var a;this.interactionDOMElement.parentElement?a=this.interactionDOMElement.getBoundingClientRect():a={x:0,y:0,width:0,height:0};var s=1/this.resolution;t.x=(e-a.left)*(this.interactionDOMElement.width/a.width)*s,t.y=(n-a.top)*(this.interactionDOMElement.height/a.height)*s},r.prototype.processInteractive=function(t,e,n,a){var s=this.search.findHit(t,e,n,a),o=this.delayedEvents;if(!o.length)return s;t.stopPropagationHint=!1;var h=o.length;this.delayedEvents=[];for(var u=0;u<h;u++){var c=o[u],f=c.displayObject,l=c.eventString,d=c.eventData;d.stopsPropagatingAt===f&&(d.stopPropagationHint=!0),this.dispatchEvent(f,l,d)}return s},r.prototype.onPointerDown=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized){var n=t.cancelable||!("cancelable"in t);n&&t.preventDefault()}for(var a=e.length,s=0;s<a;s++){var o=e[s],h=this.getInteractionDataForPointerId(o),u=this.configureInteractionEventForDOMEvent(this.eventData,o,h);if(u.data.originalEvent=t,this.processInteractive(u,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",u),o.pointerType==="touch")this.emit("touchstart",u);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var c=o.button===2;this.emit(c?"rightdown":"mousedown",this.eventData)}}}},r.prototype.processPointerDown=function(t,e,n){var a=t.data,s=t.data.identifier;if(n){if(e.trackedPointers[s]||(e.trackedPointers[s]=new Ar(s)),this.dispatchEvent(e,"pointerdown",t),a.pointerType==="touch")this.dispatchEvent(e,"touchstart",t);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var o=a.button===2;o?e.trackedPointers[s].rightDown=!0:e.trackedPointers[s].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}}},r.prototype.onPointerComplete=function(t,e,n){for(var a=this.normalizeToPointerData(t),s=a.length,o=t.target!==this.interactionDOMElement?"outside":"",h=0;h<s;h++){var u=a[h],c=this.getInteractionDataForPointerId(u),f=this.configureInteractionEventForDOMEvent(this.eventData,u,c);if(f.data.originalEvent=t,this.processInteractive(f,this.lastObjectRendered,n,e||!o),this.emit(e?"pointercancel":"pointerup"+o,f),u.pointerType==="mouse"||u.pointerType==="pen"){var l=u.button===2;this.emit(l?"rightup"+o:"mouseup"+o,f)}else u.pointerType==="touch"&&(this.emit(e?"touchcancel":"touchend"+o,f),this.releaseInteractionDataForPointerId(u.pointerId))}},r.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!0,this.processPointerCancel)},r.prototype.processPointerCancel=function(t,e){var n=t.data,a=t.data.identifier;e.trackedPointers[a]!==void 0&&(delete e.trackedPointers[a],this.dispatchEvent(e,"pointercancel",t),n.pointerType==="touch"&&this.dispatchEvent(e,"touchcancel",t))},r.prototype.onPointerUp=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!1,this.processPointerUp)},r.prototype.processPointerUp=function(t,e,n){var a=t.data,s=t.data.identifier,o=e.trackedPointers[s],h=a.pointerType==="touch",u=a.pointerType==="mouse"||a.pointerType==="pen",c=!1;if(u){var f=a.button===2,l=Ar.FLAGS,d=f?l.RIGHT_DOWN:l.LEFT_DOWN,p=o!==void 0&&o.flags&d;n?(this.dispatchEvent(e,f?"rightup":"mouseup",t),p&&(this.dispatchEvent(e,f?"rightclick":"click",t),c=!0)):p&&this.dispatchEvent(e,f?"rightupoutside":"mouseupoutside",t),o&&(f?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(e,"pointerup",t),h&&this.dispatchEvent(e,"touchend",t),o&&((!u||c)&&this.dispatchEvent(e,"pointertap",t),h&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),h&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[s]},r.prototype.onPointerMove=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var e=this.normalizeToPointerData(t);(e[0].pointerType==="mouse"||e[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var n=e.length,a=0;a<n;a++){var s=e[a],o=this.getInteractionDataForPointerId(s),h=this.configureInteractionEventForDOMEvent(this.eventData,s,o);h.data.originalEvent=t,this.processInteractive(h,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",h),s.pointerType==="touch"&&this.emit("touchmove",h),(s.pointerType==="mouse"||s.pointerType==="pen")&&this.emit("mousemove",h)}e[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},r.prototype.processPointerMove=function(t,e,n){var a=t.data,s=a.pointerType==="touch",o=a.pointerType==="mouse"||a.pointerType==="pen";o&&this.processPointerOverOut(t,e,n),(!this.moveWhenInside||n)&&(this.dispatchEvent(e,"pointermove",t),s&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},r.prototype.onPointerOut=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var e=this.normalizeToPointerData(t),n=e[0];n.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var a=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,a);s.data.originalEvent=n,this.processInteractive(s,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",s),n.pointerType==="mouse"||n.pointerType==="pen"?this.emit("mouseout",s):this.releaseInteractionDataForPointerId(a.identifier)}},r.prototype.processPointerOverOut=function(t,e,n){var a=t.data,s=t.data.identifier,o=a.pointerType==="mouse"||a.pointerType==="pen",h=e.trackedPointers[s];n&&!h&&(h=e.trackedPointers[s]=new Ar(s)),h!==void 0&&(n&&this.mouseOverRenderer?(h.over||(h.over=!0,this.delayDispatchEvent(e,"pointerover",t),o&&this.delayDispatchEvent(e,"mouseover",t)),o&&this.cursor===null&&(this.cursor=e.cursor)):h.over&&(h.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),h.none&&delete e.trackedPointers[s]))},r.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t),n=e[0],a=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,a);s.data.originalEvent=n,n.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",s),(n.pointerType==="mouse"||n.pointerType==="pen")&&this.emit("mouseover",s)},r.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,n;return e===yr||t.pointerType==="mouse"?n=this.mouse:this.activeInteractionData[e]?n=this.activeInteractionData[e]:(n=this.interactionDataPool.pop()||new Bi,n.identifier=e,this.activeInteractionData[e]=n),n.copyEvent(t),n},r.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},r.prototype.configureInteractionEventForDOMEvent=function(t,e,n){return t.data=n,this.mapPositionToPoint(n.global,e.clientX,e.clientY),e.pointerType==="touch"&&(e.globalX=n.global.x,e.globalY=n.global.y),n.originalEvent=e,t.reset(),t},r.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,a=t.changedTouches.length;n<a;n++){var s=t.changedTouches[n];typeof s.button>"u"&&(s.button=t.touches.length?1:0),typeof s.buttons>"u"&&(s.buttons=t.touches.length?1:0),typeof s.isPrimary>"u"&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,e.push(s)}else if(t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof window.PointerEvent))){var o=t;typeof o.isPrimary>"u"&&(o.isPrimary=!0),typeof o.width>"u"&&(o.width=1),typeof o.height>"u"&&(o.height=1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="mouse"),typeof o.pointerId>"u"&&(o.pointerId=yr),typeof o.pressure>"u"&&(o.pressure=.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),o.isNormalized=!0,e.push(o)}else e.push(t);return e},r.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},r}(Oe);/*!
 * @pixi/runner - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var dt=function(){function i(r){this.items=[],this._name=r,this._aliasCount=0}return i.prototype.emit=function(r,t,e,n,a,s,o,h){if(arguments.length>8)throw new Error("max arguments reached");var u=this,c=u.name,f=u.items;this._aliasCount++;for(var l=0,d=f.length;l<d;l++)f[l][c](r,t,e,n,a,s,o,h);return f===this.items&&this._aliasCount--,this},i.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},i.prototype.add=function(r){return r[this._name]&&(this.ensureNonAliasedItems(),this.remove(r),this.items.push(r)),this},i.prototype.remove=function(r){var t=this.items.indexOf(r);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},i.prototype.contains=function(r){return this.items.indexOf(r)!==-1},i.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},i.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(i.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),i}();Object.defineProperties(dt.prototype,{dispatch:{value:dt.prototype.emit},run:{value:dt.prototype.emit}});/*!
 * @pixi/core - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */L.PREFER_ENV=xt.any?Ft.WEBGL:Ft.WEBGL2;L.STRICT_TEXTURE_CACHE=!1;var Mr=[];function Pn(i,r){if(!i)return null;var t="";if(typeof i=="string"){var e=/\.(\w{3,4})(?:$|\?|#)/i.exec(i);e&&(t=e[1].toLowerCase())}for(var n=Mr.length-1;n>=0;--n){var a=Mr[n];if(a.test&&a.test(i,t))return new a(i,r)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Xi=function(i,r){return Xi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Xi(i,r)};function z(i,r){Xi(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Ee=function(){function i(r,t){r===void 0&&(r=0),t===void 0&&(t=0),this._width=r,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new dt("setRealSize"),this.onUpdate=new dt("update"),this.onError=new dt("onError")}return i.prototype.bind=function(r){this.onResize.add(r),this.onUpdate.add(r),this.onError.add(r),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},i.prototype.unbind=function(r){this.onResize.remove(r),this.onUpdate.remove(r),this.onError.remove(r)},i.prototype.resize=function(r,t){(r!==this._width||t!==this._height)&&(this._width=r,this._height=t,this.onResize.emit(r,t))},Object.defineProperty(i.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),i.prototype.update=function(){this.destroyed||this.onUpdate.emit()},i.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),i.prototype.style=function(r,t,e){return!1},i.prototype.dispose=function(){},i.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},i.test=function(r,t){return!1},i}(),Hr=function(i){z(r,i);function r(t,e){var n=this,a=e||{},s=a.width,o=a.height;if(!s||!o)throw new Error("BufferResource width or height invalid");return n=i.call(this,s,o)||this,n.data=t,n}return r.prototype.upload=function(t,e,n){var a=t.gl;return a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===kt.UNPACK),n.width===e.width&&n.height===e.height?a.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(n.width=e.width,n.height=e.height,a.texImage2D(e.target,0,n.internalFormat,e.width,e.height,0,e.format,n.type,this.data)),!0},r.prototype.dispose=function(){this.data=null},r.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},r}(Ee),Zh={scaleMode:Ot.NEAREST,format:we.RGBA,alphaMode:kt.NPM},K=function(i){z(r,i);function r(t,e){t===void 0&&(t=null),e===void 0&&(e=null);var n=i.call(this)||this;e=e||{};var a=e.alphaMode,s=e.mipmap,o=e.anisotropicLevel,h=e.scaleMode,u=e.width,c=e.height,f=e.wrapMode,l=e.format,d=e.type,p=e.target,v=e.resolution,m=e.resourceOptions;return t&&!(t instanceof Ee)&&(t=Pn(t,m),t.internal=!0),n.width=u||0,n.height=c||0,n.resolution=v||L.RESOLUTION,n.mipmap=s!==void 0?s:L.MIPMAP_TEXTURES,n.anisotropicLevel=o!==void 0?o:L.ANISOTROPIC_LEVEL,n.wrapMode=f||L.WRAP_MODE,n.scaleMode=h!==void 0?h:L.SCALE_MODE,n.format=l||we.RGBA,n.type=d||ot.UNSIGNED_BYTE,n.target=p||Vt.TEXTURE_2D,n.alphaMode=a!==void 0?a:kt.UNPACK,e.premultiplyAlpha!==void 0&&(n.premultiplyAlpha=e.premultiplyAlpha),n.uid=ue(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&c>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(t),n}return Object.defineProperty(r.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),r.prototype.setStyle=function(t,e){var n;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this},r.prototype.setSize=function(t,e,n){return this.resolution=n||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},r.prototype.setRealSize=function(t,e,n){return this.resolution=n||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},r.prototype._refreshPOT=function(){this.isPowerOfTwo=Ri(this.realWidth)&&Ri(this.realHeight)},r.prototype.setResolution=function(t){var e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT(),this)},r.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},r.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},r.prototype.onError=function(t){this.emit("error",this,t)},r.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete _t[this.cacheId],delete gt[this.cacheId],this.cacheId=null),this.dispose(),r.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},r.prototype.dispose=function(){this.emit("dispose",this)},r.prototype.castToBaseTexture=function(){return this},r.from=function(t,e,n){n===void 0&&(n=L.STRICT_TEXTURE_CACHE);var a=typeof t=="string",s=null;a?s=t:(t._pixiId||(t._pixiId="pixiid_"+ue()),s=t._pixiId);var o=_t[s];if(a&&n&&!o)throw new Error('The cacheId "'+s+'" does not exist in BaseTextureCache.');return o||(o=new r(t,e),o.cacheId=s,r.addToCache(o,s)),o},r.fromBuffer=function(t,e,n,a){t=t||new Float32Array(e*n*4);var s=new Hr(t,{width:e,height:n}),o=t instanceof Float32Array?ot.FLOAT:ot.UNSIGNED_BYTE;return new r(s,Object.assign(Zh,a||{width:e,height:n,type:o}))},r.addToCache=function(t,e){e&&(t.textureCacheIds.indexOf(e)===-1&&t.textureCacheIds.push(e),_t[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),_t[e]=t)},r.removeFromCache=function(t){if(typeof t=="string"){var e=_t[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete _t[t],e}}else if(t&&t.textureCacheIds){for(var a=0;a<t.textureCacheIds.length;++a)delete _t[t.textureCacheIds[a]];return t.textureCacheIds.length=0,t}return null},r._globalBatch=0,r}(Oe),In=function(i){z(r,i);function r(t,e){var n=this,a=e||{},s=a.width,o=a.height;n=i.call(this,s,o)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<t;h++){var u=new K;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=t,n._load=null,n.baseTexture=null,n}return r.prototype.initFromArray=function(t,e){for(var n=0;n<this.length;n++)!t[n]||(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof Ee?this.addResourceAt(t[n],n):this.addResourceAt(Pn(t[n],e),n))},r.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},r.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},r.prototype.bind=function(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");i.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},r.prototype.unbind=function(t){i.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},r.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map(function(a){return a.resource}).filter(function(a){return a}),n=e.map(function(a){return a.load()});return this._load=Promise.all(n).then(function(){var a=t.items[0],s=a.realWidth,o=a.realHeight;return t.resize(s,o),Promise.resolve(t)}),this._load},r}(Ee),bs=function(i){z(r,i);function r(t,e){var n=this,a=e||{},s=a.width,o=a.height,h,u;return Array.isArray(t)?(h=t,u=t.length):u=t,n=i.call(this,u,{width:s,height:o})||this,h&&n.initFromArray(h,e),n}return r.prototype.addBaseTextureAt=function(t,e){if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("ArrayResource does not support RenderTexture");return this},r.prototype.bind=function(t){i.prototype.bind.call(this,t),t.target=Vt.TEXTURE_2D_ARRAY},r.prototype.upload=function(t,e,n){var a=this,s=a.length,o=a.itemDirtyIds,h=a.items,u=t.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,s,0,e.format,e.type,null);for(var c=0;c<s;c++){var f=h[c];o[c]<f.dirtyId&&(o[c]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,c,f.resource.width,f.resource.height,1,e.format,e.type,f.resource.source))}return!0},r}(In),Xt=function(i){z(r,i);function r(t){var e=this,n=t,a=n.naturalWidth||n.videoWidth||n.width,s=n.naturalHeight||n.videoHeight||n.height;return e=i.call(this,a,s)||this,e.source=t,e.noSubImage=!1,e}return r.crossOrigin=function(t,e,n){n===void 0&&e.indexOf("data:")!==0?t.crossOrigin=hs(e):n!==!1&&(t.crossOrigin=typeof n=="string"?n:"anonymous")},r.prototype.upload=function(t,e,n,a){var s=t.gl,o=e.realWidth,h=e.realHeight;return a=a||this.source,s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===kt.UNPACK),!this.noSubImage&&e.target===s.TEXTURE_2D&&n.width===o&&n.height===h?s.texSubImage2D(s.TEXTURE_2D,0,0,0,e.format,e.type,a):(n.width=o,n.height=h,s.texImage2D(e.target,0,e.format,e.format,e.type,a)),!0},r.prototype.update=function(){if(!this.destroyed){var t=this.source,e=t.naturalWidth||t.videoWidth||t.width,n=t.naturalHeight||t.videoHeight||t.height;this.resize(e,n),i.prototype.update.call(this)}},r.prototype.dispose=function(){this.source=null},r}(Ee),En=function(i){z(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.test=function(t){var e=window.OffscreenCanvas;return e&&t instanceof e?!0:t instanceof HTMLCanvasElement},r}(Xt),Ts=function(i){z(r,i);function r(t,e){var n=this,a=e||{},s=a.width,o=a.height,h=a.autoLoad,u=a.linkBaseTexture;if(t&&t.length!==r.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");n=i.call(this,6,{width:s,height:o})||this;for(var c=0;c<r.SIDES;c++)n.items[c].target=Vt.TEXTURE_CUBE_MAP_POSITIVE_X+c;return n.linkBaseTexture=u!==!1,t&&n.initFromArray(t,e),h!==!1&&n.load(),n}return r.prototype.bind=function(t){i.prototype.bind.call(this,t),t.target=Vt.TEXTURE_CUBE_MAP},r.prototype.addBaseTextureAt=function(t,e,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=Vt.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},r.prototype.upload=function(t,e,n){for(var a=this.itemDirtyIds,s=0;s<r.SIDES;s++){var o=this.items[s];a[s]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(t,o,n),a[s]=o.dirtyId):a[s]<-1&&(t.gl.texImage2D(o.target,0,n.internalFormat,e.realWidth,e.realHeight,0,e.format,n.type,null),a[s]=-1))}return!0},r.test=function(t){return Array.isArray(t)&&t.length===r.SIDES},r.SIDES=6,r}(In),Sn=function(i){z(r,i);function r(t,e){var n=this;if(e=e||{},!(t instanceof HTMLImageElement)){var a=new Image;Xt.crossOrigin(a,t,e.crossorigin),a.src=t,t=a}return n=i.call(this,t)||this,!t.complete&&!!n._width&&!!n._height&&(n._width=0,n._height=0),n.url=t.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(e.createBitmap!==void 0?e.createBitmap:L.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,n.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,e.premultiplyAlpha!==void 0&&(n.premultiplyAlpha=e.premultiplyAlpha),n.bitmap=null,n._load=null,e.autoLoad!==!1&&n.load(),n}return r.prototype.load=function(t){var e=this;return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise(function(n,a){var s=e.source;e.url=s.src;var o=function(){e.destroyed||(s.onload=null,s.onerror=null,e.resize(s.width,s.height),e._load=null,e.createBitmap?n(e.process()):n(e))};s.complete&&s.src?o():(s.onload=o,s.onerror=function(h){a(h),e.onError.emit(h)})}),this._load)},r.prototype.process=function(){var t=this,e=this.source;return this._process!==null?this._process:this.bitmap!==null||!window.createImageBitmap?Promise.resolve(this):(this._process=window.createImageBitmap(e,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===kt.UNPACK?"premultiply":"none"}).then(function(n){return t.destroyed?Promise.reject():(t.bitmap=n,t.update(),t._process=null,Promise.resolve(t))}),this._process)},r.prototype.upload=function(t,e,n){if(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),!this.createBitmap)return i.prototype.upload.call(this,t,e,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(i.prototype.upload.call(this,t,e,n,this.bitmap),!this.preserveBitmap){var a=!0,s=e._glTextures;for(var o in s){var h=s[o];if(h!==n&&h.dirtyId!==e.dirtyId){a=!1;break}}a&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},r.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,i.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},r.test=function(t){return typeof t=="string"||t instanceof HTMLImageElement},r}(Xt),ws=function(i){z(r,i);function r(t,e){var n=this;return e=e||{},n=i.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=t,n.scale=e.scale||1,n._overrideWidth=e.width,n._overrideHeight=e.height,n._resolve=null,n._crossorigin=e.crossorigin,n._load=null,e.autoLoad!==!1&&n.load(),n}return r.prototype.load=function(){var t=this;return this._load?this._load:(this._load=new Promise(function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}),this._load)},r.prototype._loadSvg=function(){var t=this,e=new Image;Xt.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(n){!t._resolve||(e.onerror=null,t.onError.emit(n))},e.onload=function(){if(!!t._resolve){var n=e.width,a=e.height;if(!n||!a)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var s=n*t.scale,o=a*t.scale;(t._overrideWidth||t._overrideHeight)&&(s=t._overrideWidth||t._overrideHeight/a*n,o=t._overrideHeight||t._overrideWidth/n*a),s=Math.round(s),o=Math.round(o);var h=t.source;h.width=s,h.height=o,h._pixiId="canvas_"+ue(),h.getContext("2d").drawImage(e,0,0,n,a,0,0,s,o),t._resolve(),t._resolve=null}}},r.getSize=function(t){var e=r.SVG_SIZE.exec(t),n={};return e&&(n[e[1]]=Math.round(parseFloat(e[3])),n[e[5]]=Math.round(parseFloat(e[7]))),n},r.prototype.dispose=function(){i.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},r.test=function(t,e){return e==="svg"||typeof t=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||typeof t=="string"&&t.indexOf("<svg")===0},r.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,r}(Xt),Ps=function(i){z(r,i);function r(t,e){var n=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var a=document.createElement("video");a.setAttribute("preload","auto"),a.setAttribute("webkit-playsinline",""),a.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);var s=t[0].src||t[0];Xt.crossOrigin(a,s,e.crossorigin);for(var o=0;o<t.length;++o){var h=document.createElement("source"),u=t[o],c=u.src,f=u.mime;c=c||t[o];var l=c.split("?").shift().toLowerCase(),d=l.substr(l.lastIndexOf(".")+1);f=f||r.MIME_TYPES[d]||"video/"+d,h.src=c,h.type=f,a.appendChild(h)}t=a}return n=i.call(this,t)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=e.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=e.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),e.autoLoad!==!1&&n.load(),n}return r.prototype.update=function(t){if(!this.destroyed){var e=ft.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(i.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},r.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){t.valid?n(t):(t._resolve=n,e.load())}),this._load},r.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},r.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&t.paused===!1&&t.ended===!1&&t.readyState>2},r.prototype._isSourceReady=function(){var t=this.source;return t.readyState===3||t.readyState===4},r.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(ft.shared.add(this.update,this),this._isConnectedToTicker=!0)},r.prototype._onPlayStop=function(){this._isConnectedToTicker&&(ft.shared.remove(this.update,this),this._isConnectedToTicker=!1)},r.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},r.prototype.dispose=function(){this._isConnectedToTicker&&ft.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),i.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(ft.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(ft.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),r.test=function(t,e){return t instanceof HTMLVideoElement||r.TYPES.indexOf(e)>-1},r.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],r.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},r}(Xt),Is=function(i){z(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},r}(Xt);Mr.push(Sn,Is,En,Ps,ws,Hr,Ts,bs);var Kh={Resource:Ee,BaseImageResource:Xt,INSTALLED:Mr,autoDetectResource:Pn,AbstractMultiResource:In,ArrayResource:bs,BufferResource:Hr,CanvasResource:En,CubeResource:Ts,ImageResource:Sn,SVGResource:ws,VideoResource:Ps,ImageBitmapResource:Is},yt=function(){function i(r){this.renderer=r}return i.prototype.destroy=function(){this.renderer=null},i}(),Jh=function(i){z(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.upload=function(t,e,n){var a=t.gl;return a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===kt.UNPACK),n.width===e.width&&n.height===e.height?a.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(n.width=e.width,n.height=e.height,a.texImage2D(e.target,0,t.context.webGLVersion===1?a.DEPTH_COMPONENT:a.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0},r}(Hr),Lr=function(){function i(r,t){this.width=Math.ceil(r||100),this.height=Math.ceil(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new dt("disposeFramebuffer"),this.multisample=oe.NONE}return Object.defineProperty(i.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),i.prototype.addColorTexture=function(r,t){return r===void 0&&(r=0),this.colorTextures[r]=t||new K(null,{scaleMode:Ot.NEAREST,resolution:1,mipmap:Pe.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},i.prototype.addDepthTexture=function(r){return this.depthTexture=r||new K(new Jh(null,{width:this.width,height:this.height}),{scaleMode:Ot.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Pe.OFF,format:we.DEPTH_COMPONENT,type:ot.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},i.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},i.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},i.prototype.resize=function(r,t){if(r=Math.ceil(r),t=Math.ceil(t),!(r===this.width&&t===this.height)){this.width=r,this.height=t,this.dirtyId++,this.dirtySize++;for(var e=0;e<this.colorTextures.length;e++){var n=this.colorTextures[e],a=n.resolution;n.setSize(r/a,t/a)}if(this.depthTexture){var a=this.depthTexture.resolution;this.depthTexture.setSize(r/a,t/a)}}},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},i}(),je=function(i){z(r,i);function r(t){var e=this;if(typeof t=="number"){var n=arguments[0],a=arguments[1],s=arguments[2],o=arguments[3];t={width:n,height:a,scaleMode:s,resolution:o}}e=i.call(this,null,t)||this;var h=t||{},u=h.width,c=h.height;return e.mipmap=0,e.width=Math.ceil(u)||100,e.height=Math.ceil(c)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new Lr(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}return r.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},r.prototype.dispose=function(){this.framebuffer.dispose(),i.prototype.dispose.call(this)},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},r}(K),An=function(){function i(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return i.prototype.set=function(r,t,e){var n=t.width,a=t.height;if(e){var s=r.width/2/n,o=r.height/2/a,h=r.x/n+s,u=r.y/a+o;e=J.add(e,J.NW),this.x0=h+s*J.uX(e),this.y0=u+o*J.uY(e),e=J.add(e,2),this.x1=h+s*J.uX(e),this.y1=u+o*J.uY(e),e=J.add(e,2),this.x2=h+s*J.uX(e),this.y2=u+o*J.uY(e),e=J.add(e,2),this.x3=h+s*J.uX(e),this.y3=u+o*J.uY(e)}else this.x0=r.x/n,this.y0=r.y/a,this.x1=(r.x+r.width)/n,this.y1=r.y/a,this.x2=(r.x+r.width)/n,this.y2=(r.y+r.height)/a,this.x3=r.x/n,this.y3=(r.y+r.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},i}(),aa=new An,G=function(i){z(r,i);function r(t,e,n,a,s,o){var h=i.call(this)||this;if(h.noFrame=!1,e||(h.noFrame=!0,e=new W(0,0,1,1)),t instanceof r&&(t=t.baseTexture),h.baseTexture=t,h._frame=e,h.trim=a,h.valid=!1,h._uvs=aa,h.uvMatrix=null,h.orig=n||e,h._rotate=Number(s||0),s===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new ct(o.x,o.y):new ct(0,0),h._updateID=0,h.textureCacheIds=[],t.valid?h.noFrame?t.valid&&h.onBaseTextureUpdated(t):h.frame=e:t.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&t.on("update",h.onBaseTextureUpdated,h),h}return r.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},r.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},r.prototype.destroy=function(t){if(this.baseTexture){if(t){var e=this.baseTexture;e&&e.url&&gt[e.url]&&r.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,r.removeFromCache(this),this.textureCacheIds=null},r.prototype.clone=function(){return new r(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},r.prototype.updateUvs=function(){this._uvs===aa&&(this._uvs=new An),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},r.from=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n=L.STRICT_TEXTURE_CACHE);var a=typeof t=="string",s=null;a?s=t:(t._pixiId||(t._pixiId="pixiid_"+ue()),s=t._pixiId);var o=gt[s];if(a&&n&&!o)throw new Error('The cacheId "'+s+'" does not exist in TextureCache.');return o||(e.resolution||(e.resolution=Ze(t)),o=new r(new K(t,e)),o.baseTexture.cacheId=s,K.addToCache(o.baseTexture,s),r.addToCache(o,s)),o},r.fromURL=function(t,e){var n=Object.assign({autoLoad:!1},e==null?void 0:e.resourceOptions),a=r.from(t,Object.assign({resourceOptions:n},e),!1),s=a.baseTexture.resource;return a.baseTexture.valid?Promise.resolve(a):s.load().then(function(){return Promise.resolve(a)})},r.fromBuffer=function(t,e,n,a){return new r(K.fromBuffer(t,e,n,a))},r.fromLoader=function(t,e,n){var a=new Sn(t);a.url=e;var s=new K(a,{scaleMode:L.SCALE_MODE,resolution:Ze(e)}),o=new r(s);return n||(n=e),K.addToCache(o.baseTexture,n),r.addToCache(o,n),n!==e&&(K.addToCache(o.baseTexture,e),r.addToCache(o,e)),o},r.addToCache=function(t,e){e&&(t.textureCacheIds.indexOf(e)===-1&&t.textureCacheIds.push(e),gt[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),gt[e]=t)},r.removeFromCache=function(t){if(typeof t=="string"){var e=gt[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete gt[t],e}}else if(t&&t.textureCacheIds){for(var a=0;a<t.textureCacheIds.length;++a)gt[t.textureCacheIds[a]]===t&&delete gt[t.textureCacheIds[a]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(r.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,n=t.y,a=t.width,s=t.height,o=e+a>this.baseTexture.width,h=n+s>this.baseTexture.height;if(o||h){var u=o&&h?"and":"or",c="X: "+e+" + "+a+" = "+(e+a)+" > "+this.baseTexture.width,f="Y: "+n+" + "+s+" = "+(n+s)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(c+" "+u+" "+f))}this.valid=a&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),r.prototype.castToBaseTexture=function(){return this.baseTexture},r}(Oe);function Qh(){var i=document.createElement("canvas");i.width=16,i.height=16;var r=i.getContext("2d");return r.fillStyle="white",r.fillRect(0,0,16,16),new G(new K(new En(i)))}function zr(i){i.destroy=function(){},i.on=function(){},i.once=function(){},i.emit=function(){}}G.EMPTY=new G(new K);zr(G.EMPTY);zr(G.EMPTY.baseTexture);G.WHITE=Qh();zr(G.WHITE);zr(G.WHITE.baseTexture);var le=function(i){z(r,i);function r(t,e){var n=this,a=null;if(!(t instanceof je)){var s=arguments[1],o=arguments[2],h=arguments[3],u=arguments[4];console.warn("Please use RenderTexture.create("+s+", "+o+") instead of the ctor directly."),a=arguments[0],e=null,t=new je({width:s,height:o,scaleMode:h,resolution:u})}return n=i.call(this,t,e)||this,n.legacyRenderer=a,n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(r.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),r.prototype.resize=function(t,e,n){n===void 0&&(n=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,n&&this.baseTexture.resize(t,e),this.updateUvs()},r.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},r.create=function(t){return typeof t=="number"&&(t={width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new r(new je(t))},r}(G),Es=function(){function i(r){this.texturePool={},this.textureOptions=r||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return i.prototype.createTexture=function(r,t){var e=new je(Object.assign({width:r,height:t,resolution:1},this.textureOptions));return new le(e)},i.prototype.getOptimalTexture=function(r,t,e){e===void 0&&(e=1);var n=i.SCREEN_KEY;r*=e,t*=e,(!this.enableFullScreen||r!==this._pixelsWidth||t!==this._pixelsHeight)&&(r=qe(r),t=qe(t),n=(r&65535)<<16|t&65535),this.texturePool[n]||(this.texturePool[n]=[]);var a=this.texturePool[n].pop();return a||(a=this.createTexture(r,t)),a.filterPoolKey=n,a.setResolution(e),a},i.prototype.getFilterTexture=function(r,t){var e=this.getOptimalTexture(r.width,r.height,t||r.resolution);return e.filterFrame=r.filterFrame,e},i.prototype.returnTexture=function(r){var t=r.filterPoolKey;r.filterFrame=null,this.texturePool[t].push(r)},i.prototype.returnFilterTexture=function(r){this.returnTexture(r)},i.prototype.clear=function(r){if(r=r!==!1,r)for(var t in this.texturePool){var e=this.texturePool[t];if(e)for(var n=0;n<e.length;n++)e[n].destroy(!0)}this.texturePool={}},i.prototype.setScreenSize=function(r){if(!(r.width===this._pixelsWidth&&r.height===this._pixelsHeight)){var t=i.SCREEN_KEY,e=this.texturePool[t];if(this.enableFullScreen=r.width>0&&r.height>0,e)for(var n=0;n<e.length;n++)e[n].destroy(!0);this.texturePool[t]=[],this._pixelsWidth=r.width,this._pixelsHeight=r.height}},i.SCREEN_KEY="screen",i}(),Gi=function(){function i(r,t,e,n,a,s,o){t===void 0&&(t=0),e===void 0&&(e=!1),n===void 0&&(n=5126),this.buffer=r,this.size=t,this.normalized=e,this.type=n,this.stride=a,this.start=s,this.instance=o}return i.prototype.destroy=function(){this.buffer=null},i.from=function(r,t,e,n,a){return new i(r,t,e,n,a)},i}(),tu=0,lt=function(){function i(r,t,e){t===void 0&&(t=!0),e===void 0&&(e=!1),this.data=r||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=e,this.static=t,this.id=tu++,this.disposeRunner=new dt("disposeBuffer")}return i.prototype.update=function(r){this.data=r||this.data,this._updateID++},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroy=function(){this.dispose(),this.data=null},i.from=function(r){return r instanceof Array&&(r=new Float32Array(r)),new i(r)},i}();function Ss(i){if(i.BYTES_PER_ELEMENT===4)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(i.BYTES_PER_ELEMENT===2){if(i instanceof Uint16Array)return"Uint16Array"}else if(i.BYTES_PER_ELEMENT===1&&i instanceof Uint8Array)return"Uint8Array";return null}var eu={Float32Array,Uint32Array,Int32Array,Uint8Array};function ru(i,r){for(var t=0,e=0,n={},a=0;a<i.length;a++)e+=r[a],t+=i[a].length;for(var s=new ArrayBuffer(t*4),o=null,h=0,a=0;a<i.length;a++){var u=r[a],c=i[a],f=Ss(c);n[f]||(n[f]=new eu[f](s)),o=n[f];for(var l=0;l<c.length;l++){var d=(l/u|0)*e+h,p=l%u;o[d+p]=c[l]}h+=u}return new Float32Array(s)}var sa={5126:4,5123:2,5121:1},iu=0,nu={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Fe=function(){function i(r,t){r===void 0&&(r=[]),t===void 0&&(t={}),this.buffers=r,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=iu++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new dt("disposeGeometry"),this.refCount=0}return i.prototype.addAttribute=function(r,t,e,n,a,s,o,h){if(e===void 0&&(e=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof lt||(t instanceof Array&&(t=new Float32Array(t)),t=new lt(t));var u=r.split("|");if(u.length>1){for(var c=0;c<u.length;c++)this.addAttribute(u[c],t,e,n,a);return this}var f=this.buffers.indexOf(t);return f===-1&&(this.buffers.push(t),f=this.buffers.length-1),this.attributes[r]=new Gi(f,e,n,a,s,o,h),this.instanced=this.instanced||h,this},i.prototype.getAttribute=function(r){return this.attributes[r]},i.prototype.getBuffer=function(r){return this.buffers[this.getAttribute(r).buffer]},i.prototype.addIndex=function(r){return r instanceof lt||(r instanceof Array&&(r=new Uint16Array(r)),r=new lt(r)),r.index=!0,this.indexBuffer=r,this.buffers.indexOf(r)===-1&&this.buffers.push(r),this},i.prototype.getIndex=function(){return this.indexBuffer},i.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var r=[],t=[],e=new lt,n;for(n in this.attributes){var a=this.attributes[n],s=this.buffers[a.buffer];r.push(s.data),t.push(a.size*sa[a.type]/4),a.buffer=0}for(e.data=ru(r,t),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[e],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},i.prototype.getSize=function(){for(var r in this.attributes){var t=this.attributes[r],e=this.buffers[t.buffer];return e.data.length/(t.stride/4||t.size)}return 0},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},i.prototype.clone=function(){for(var r=new i,t=0;t<this.buffers.length;t++)r.buffers[t]=new lt(this.buffers[t].data.slice(0));for(var t in this.attributes){var e=this.attributes[t];r.attributes[t]=new Gi(e.buffer,e.size,e.normalized,e.type,e.stride,e.start,e.instance)}return this.indexBuffer&&(r.indexBuffer=r.buffers[this.buffers.indexOf(this.indexBuffer)],r.indexBuffer.index=!0),r},i.merge=function(r){for(var t=new i,e=[],n=[],a=[],s,o=0;o<r.length;o++){s=r[o];for(var h=0;h<s.buffers.length;h++)n[h]=n[h]||0,n[h]+=s.buffers[h].data.length,a[h]=0}for(var o=0;o<s.buffers.length;o++)e[o]=new nu[Ss(s.buffers[o].data)](n[o]),t.buffers[o]=new lt(e[o]);for(var o=0;o<r.length;o++){s=r[o];for(var h=0;h<s.buffers.length;h++)e[h].set(s.buffers[h].data,a[h]),a[h]+=s.buffers[h].data.length}if(t.attributes=s.attributes,s.indexBuffer){t.indexBuffer=t.buffers[s.buffers.indexOf(s.indexBuffer)],t.indexBuffer.index=!0;for(var u=0,c=0,f=0,l=0,o=0;o<s.buffers.length;o++)if(s.buffers[o]!==s.indexBuffer){l=o;break}for(var o in s.attributes){var d=s.attributes[o];(d.buffer|0)===l&&(c+=d.size*sa[d.type]/4)}for(var o=0;o<r.length;o++){for(var p=r[o].indexBuffer.data,h=0;h<p.length;h++)t.indexBuffer.data[h+f]+=u;u+=s.buffers[l].data.length/c,f+=p.length}}return t},i}(),As=function(i){z(r,i);function r(){var t=i.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return r}(Fe),Cn=function(i){z(r,i);function r(){var t=i.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new lt(t.vertices),t.uvBuffer=new lt(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return r.prototype.map=function(t,e){var n=0,a=0;return this.uvs[0]=n,this.uvs[1]=a,this.uvs[2]=n+e.width/t.width,this.uvs[3]=a,this.uvs[4]=n+e.width/t.width,this.uvs[5]=a+e.height/t.height,this.uvs[6]=n,this.uvs[7]=a+e.height/t.height,n=e.x,a=e.y,this.vertices[0]=n,this.vertices[1]=a,this.vertices[2]=n+e.width,this.vertices[3]=a,this.vertices[4]=n+e.width,this.vertices[5]=a+e.height,this.vertices[6]=n,this.vertices[7]=a+e.height,this.invalidate(),this},r.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},r}(Fe),au=0,Yt=function(){function i(r,t){this.uniforms=r,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=au++,this.static=!!t}return i.prototype.update=function(){this.dirtyId++},i.prototype.add=function(r,t,e){this.uniforms[r]=new i(t,e)},i.from=function(r,t){return new i(r,t)},i}(),Cs=function(){function i(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new W,this.destinationFrame=new W,this.filters=[]}return i.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},i}(),Os=function(i){z(r,i);function r(t){var e=i.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new Es,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new As,e.quadUv=new Cn,e.tempRect=new W,e.activeState={},e.globalUniforms=new Yt({outputFrame:e.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}return r.prototype.push=function(t,e){for(var n=this.renderer,a=this.defaultFilterStack,s=this.statePool.pop()||new Cs,o=e[0].resolution,h=e[0].padding,u=e[0].autoFit,c=e[0].legacy,f=1;f<e.length;f++){var l=e[f];o=Math.min(o,l.resolution),h=this.useMaxPadding?Math.max(h,l.padding):h+l.padding,u=u&&l.autoFit,c=c||l.legacy}a.length===1&&(this.defaultFilterStack[0].renderTexture=n.renderTexture.current),a.push(s),s.resolution=o,s.legacy=c,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(h),u&&s.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),s.sourceFrame.ceil(o),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,o),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var d=this.tempRect;d.width=s.sourceFrame.width,d.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,n.renderTexture.bind(s.renderTexture,s.sourceFrame,d),n.renderTexture.clear()},r.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),n=e.filters;this.activeState=e;var a=this.globalUniforms.uniforms;a.outputFrame=e.sourceFrame,a.resolution=e.resolution;var s=a.inputSize,o=a.inputPixel,h=a.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=s[0]*e.resolution,o[1]=s[1]*e.resolution,o[2]=1/o[0],o[3]=1/o[1],h[0]=.5*o[2],h[1]=.5*o[3],h[2]=e.sourceFrame.width*s[2]-.5*o[2],h[3]=e.sourceFrame.height*s[3]-.5*o[3],e.legacy){var u=a.filterArea;u[0]=e.destinationFrame.width,u[1]=e.destinationFrame.height,u[2]=e.sourceFrame.x,u[3]=e.sourceFrame.y,a.filterClamp=a.inputClamp}this.globalUniforms.update();var c=t[t.length-1];if(e.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,e.renderTexture,c.renderTexture,Pt.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var f=e.renderTexture,l=this.getOptimalFilterTexture(f.width,f.height,e.resolution);l.filterFrame=f.filterFrame;var d=0;for(d=0;d<n.length-1;++d){n[d].apply(this,f,l,Pt.CLEAR,e);var p=f;f=l,l=p}n[d].apply(this,f,c.renderTexture,Pt.BLEND,e),this.returnFilterTexture(f),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},r.prototype.bindAndClear=function(t,e){if(e===void 0&&(e=Pt.CLEAR),t&&t.filterFrame){var n=this.tempRect;n.width=t.filterFrame.width,n.height=t.filterFrame.height,this.renderer.renderTexture.bind(t,t.filterFrame,n)}else this.renderer.renderTexture.bind(t);typeof e=="boolean"&&(e=e?Pt.CLEAR:Pt.BLEND,I("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(e===Pt.CLEAR||e===Pt.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},r.prototype.applyFilter=function(t,e,n,a){var s=this.renderer;this.bindAndClear(n,a),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.state.set(t.state),s.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(bt.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(bt.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(t,e){var n=this.activeState,a=n.sourceFrame,s=n.destinationFrame,o=e._texture.orig,h=t.set(s.width,0,0,s.height,a.x,a.y),u=e.worldTransform.copyTo(ht.TEMP_MATRIX);return u.invert(),h.prepend(u),h.scale(1/o.width,1/o.height),h.translate(e.anchor.x,e.anchor.y),h},r.prototype.destroy=function(){this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(t,e,n){return n===void 0&&(n=1),this.texturePool.getOptimalTexture(t,e,n)},r.prototype.getFilterTexture=function(t,e){if(typeof t=="number"){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var a=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return a.filterFrame=t.filterFrame,a},r.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r}(yt),ir=function(){function i(r){this.renderer=r}return i.prototype.flush=function(){},i.prototype.destroy=function(){this.renderer=null},i.prototype.start=function(){},i.prototype.stop=function(){this.flush()},i.prototype.render=function(r){},i}(),Fs=function(i){z(r,i);function r(t){var e=i.call(this,t)||this;return e.emptyRenderer=new ir(t),e.currentRenderer=e.emptyRenderer,e}return r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(t,e){for(var n=this.renderer.texture.boundTextures,a=e-1;a>=0;--a)t[a]=n[a]||null,t[a]&&(t[a]._batchLocation=a)},r.prototype.boundArray=function(t,e,n,a){for(var s=t.elements,o=t.ids,h=t.count,u=0,c=0;c<h;c++){var f=s[c],l=f._batchLocation;if(l>=0&&l<a&&e[l]===f){o[c]=l;continue}for(;u<a;){var d=e[u];if(d&&d._batchEnabled===n&&d._batchLocation===u){u++;continue}o[c]=u,f._batchLocation=u,e[u]=f;break}}},r}(yt),oa=0,Rs=function(i){z(r,i);function r(t){var e=i.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}return Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=oa++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},r.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=oa++,this.renderer.runners.contextChange.emit(t)},r.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},r.prototype.createContext=function(t,e){var n;if(L.PREFER_ENV>=Ft.WEBGL2&&(n=t.getContext("webgl2",e)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var t=this.gl;this.webGLVersion===1?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(t){var e=t.getContextAttributes(),n="WebGL2RenderingContext"in window&&t instanceof window.WebGL2RenderingContext;n&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var a=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=a,a||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(yt),Ms=function(){function i(r){this.framebuffer=r,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=oe.NONE,this.msaaBuffer=null,this.blitFramebuffer=null}return i}(),su=new W,Ls=function(i){z(r,i);function r(t){var e=i.call(this,t)||this;return e.managedFramebuffers=[],e.unknownFramebuffer=new Lr(10,10),e.msaaSamples=null,e}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new W,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;L.PREFER_ENV===Ft.WEBGL_LEGACY&&(e=null,n=null),e?t.drawBuffers=function(a){return e.drawBuffersWEBGL(a)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},r.prototype.bind=function(t,e){var n=this.gl;if(t){var a=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,a.framebuffer)),a.dirtyId!==t.dirtyId&&(a.dirtyId=t.dirtyId,a.dirtyFormat!==t.dirtyFormat?(a.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):a.dirtySize!==t.dirtySize&&(a.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var s=0;s<t.colorTextures.length;s++){var o=t.colorTextures[s];this.renderer.texture.unbind(o.parentTextureArray||o)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(t,e,n,a){var s=this.viewport;(s.width!==n||s.height!==a||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=n,s.height=a,this.gl.viewport(t,e,n,a))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(t,e,n,a,s){s===void 0&&(s=$e.COLOR|$e.DEPTH);var o=this.gl;o.clearColor(t,e,n,a),o.clear(s)},r.prototype.initFramebuffer=function(t){var e=this.gl,n=new Ms(e.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},r.prototype.resizeFramebuffer=function(t){var e=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var a=t.colorTextures,s=0;s<a.length;s++)this.renderer.texture.bind(a[s],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},r.prototype.updateFramebuffer=function(t){var e=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],a=t.colorTextures,s=a.length;e.drawBuffers||(s=Math.min(s,1)),n.multisample>1&&(n.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,n.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,n.msaaBuffer));for(var o=[],h=0;h<s;h++)if(!(h===0&&n.multisample>1)){var u=t.colorTextures[h],c=u.parentTextureArray||u;this.renderer.texture.bind(c,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,u.target,c._glTextures[this.CONTEXT_UID].texture,0),o.push(e.COLOR_ATTACHMENT0+h)}if(o.length>1&&e.drawBuffers(o),t.depthTexture){var f=this.writeDepthTexture;if(f){var l=t.depthTexture;this.renderer.texture.bind(l,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,0)}}!n.stencil&&(t.stencil||t.depth)&&(n.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,n.stencil))},r.prototype.detectSamples=function(t){var e=this.msaaSamples,n=oe.NONE;if(t<=1||e===null)return n;for(var a=0;a<e.length;a++)if(e[a]<=t){n=e[a];break}return n===1&&(n=oe.NONE),n},r.prototype.blit=function(t,e,n){var a=this,s=a.current,o=a.renderer,h=a.gl,u=a.CONTEXT_UID;if(o.context.webGLVersion===2&&!!s){var c=s.glFramebuffers[u];if(!!c){if(!t){if(c.multisample<=1)return;c.blitFramebuffer||(c.blitFramebuffer=new Lr(s.width,s.height),c.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),t=c.blitFramebuffer,t.width=s.width,t.height=s.height}e||(e=su,e.width=s.width,e.height=s.height),n||(n=e);var f=e.width===n.width&&e.height===n.height;this.bind(t),h.bindFramebuffer(h.READ_FRAMEBUFFER,c.framebuffer),h.blitFramebuffer(e.x,e.y,e.width,e.height,n.x,n.y,n.width,n.height,h.COLOR_BUFFER_BIT,f?h.NEAREST:h.LINEAR)}}},r.prototype.disposeFramebuffer=function(t,e){var n=t.glFramebuffers[this.CONTEXT_UID],a=this.gl;if(!!n){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(a.deleteFramebuffer(n.framebuffer),n.stencil&&a.deleteRenderbuffer(n.stencil))}},r.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<e.length;n++)this.disposeFramebuffer(e[n],t)},r.prototype.forceStencil=function(){var t=this.current;if(!!t){var e=t.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){t.enableStencil();var n=t.width,a=t.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,n,a),e.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new W},r}(yt),ou=function(){function i(r){this.buffer=r||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return i}(),ai={5126:4,5123:2,5121:1},Ns=function(i){z(r,i);function r(t){var e=i.call(this,t)||this;return e._activeGeometry=null,e._activeVao=null,e.hasVao=!0,e.hasInstance=!0,e.canUseUInt32ElementIndex=!1,e.managedGeometries={},e.managedBuffers={},e}return r.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var n=this.renderer.context.extensions.vertexArrayObject;L.PREFER_ENV===Ft.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(s){return n.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return n.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var a=t.getExtension("ANGLE_instanced_arrays");a?(t.vertexAttribDivisor=function(s,o){return a.vertexAttribDivisorANGLE(s,o)},t.drawElementsInstanced=function(s,o,h,u,c){return a.drawElementsInstancedANGLE(s,o,h,u,c)},t.drawArraysInstanced=function(s,o,h,u){return a.drawArraysInstancedANGLE(s,o,h,u)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},r.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var n=this.gl,a=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;a||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=a={},s=!0);var o=a[e.program.id]||this.initGeometryVao(t,e.program,s);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,n=0;n<t.buffers.length;n++){var a=t.buffers[n],s=a._glBuffers[this.CONTEXT_UID];if(a._updateID!==s.updateID){s.updateID=a._updateID;var o=a.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;if(e.bindBuffer(o,s.buffer),this._boundBuffer=s,s.byteLength>=a.data.byteLength)e.bufferSubData(o,0,a.data);else{var h=a.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;s.byteLength=a.data.byteLength,e.bufferData(o,a.data,h)}}}},r.prototype.checkCompatibility=function(t,e){var n=t.attributes,a=e.attributeData;for(var s in a)if(!n[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},r.prototype.getSignature=function(t,e){var n=t.attributes,a=e.attributeData,s=["g",t.id];for(var o in n)a[o]&&s.push(o);return s.join("-")},r.prototype.initGeometryVao=function(t,e,n){n===void 0&&(n=!0),this.checkCompatibility(t,e);var a=this.gl,s=this.CONTEXT_UID,o=this.getSignature(t,e),h=t.glVertexArrayObjects[this.CONTEXT_UID],u=h[o];if(u)return h[e.id]=u,u;var c=t.buffers,f=t.attributes,l={},d={};for(var p in c)l[p]=0,d[p]=0;for(var p in f)!f[p].size&&e.attributeData[p]?f[p].size=e.attributeData[p].size:f[p].size||console.warn("PIXI Geometry attribute '"+p+"' size cannot be determined (likely the bound shader does not have the attribute)"),l[f[p].buffer]+=f[p].size*ai[f[p].type];for(var p in f){var v=f[p],m=v.size;v.stride===void 0&&(l[v.buffer]===m*ai[v.type]?v.stride=0:v.stride=l[v.buffer]),v.start===void 0&&(v.start=d[v.buffer],d[v.buffer]+=m*ai[v.type])}u=a.createVertexArray(),a.bindVertexArray(u);for(var y=0;y<c.length;y++){var x=c[y];x._glBuffers[s]||(x._glBuffers[s]=new ou(a.createBuffer()),this.managedBuffers[x.id]=x,x.disposeRunner.add(this)),n&&x._glBuffers[s].refCount++}return this.activateVao(t,e),this._activeVao=u,h[e.id]=u,h[o]=u,u},r.prototype.disposeBuffer=function(t,e){if(!!this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],a=this.gl;t.disposeRunner.remove(this),n&&(e||a.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeGeometry=function(t,e){if(!!this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],a=this.gl,s=t.buffers;if(t.disposeRunner.remove(this),!!n){for(var o=0;o<s.length;o++){var h=s[o]._glBuffers[this.CONTEXT_UID];h.refCount--,h.refCount===0&&!e&&this.disposeBuffer(s[o],e)}if(!e){for(var u in n)if(u[0]==="g"){var c=n[u];this._activeVao===c&&this.unbind(),a.deleteVertexArray(c)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),n=0;n<e.length;n++)this.disposeGeometry(this.managedGeometries[e[n]],t);e=Object.keys(this.managedBuffers);for(var n=0;n<e.length;n++)this.disposeBuffer(this.managedBuffers[e[n]],t)},r.prototype.activateVao=function(t,e){var n=this.gl,a=this.CONTEXT_UID,s=t.buffers,o=t.attributes;t.indexBuffer&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[a].buffer);var h=null;for(var u in o){var c=o[u],f=s[c.buffer],l=f._glBuffers[a];if(e.attributeData[u]){h!==l&&(n.bindBuffer(n.ARRAY_BUFFER,l.buffer),h=l);var d=e.attributeData[u].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,c.size,c.type||n.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)n.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(t,e,n,a){var s=this.gl,o=this._activeGeometry;if(o.indexBuffer){var h=o.indexBuffer.data.BYTES_PER_ELEMENT,u=h===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;h===2||h===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(t,e||o.indexBuffer.data.length,u,(n||0)*h,a||1):s.drawElements(t,e||o.indexBuffer.data.length,u,(n||0)*h):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(t,n,e||o.getSize(),a||1):s.drawArrays(t,n,e||o.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r}(yt),Ds=function(){function i(r){r===void 0&&(r=null),this.type=mt.NONE,this.autoDetect=!0,this.maskObject=r||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return i.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=mt.NONE,this.autoDetect=!0),this._target=null},i.prototype.copyCountersOrReset=function(r){r?(this._stencilCounter=r._stencilCounter,this._scissorCounter=r._scissorCounter,this._scissorRect=r._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},i}();function ha(i,r,t){var e=i.createShader(r);return i.shaderSource(e,t),i.compileShader(e),e}function Us(i,r,t,e){var n=ha(i,i.VERTEX_SHADER,r),a=ha(i,i.FRAGMENT_SHADER,t),s=i.createProgram();if(i.attachShader(s,n),i.attachShader(s,a),e)for(var o in e)i.bindAttribLocation(s,e[o],o);return i.linkProgram(s),i.getProgramParameter(s,i.LINK_STATUS)||(i.getShaderParameter(n,i.COMPILE_STATUS)||(console.warn(r),console.error(i.getShaderInfoLog(n))),i.getShaderParameter(a,i.COMPILE_STATUS)||(console.warn(t),console.error(i.getShaderInfoLog(a))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",i.getProgramParameter(s,i.VALIDATE_STATUS)),console.error("gl.getError()",i.getError()),i.getProgramInfoLog(s)!==""&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",i.getProgramInfoLog(s)),i.deleteProgram(s),s=null),i.deleteShader(n),i.deleteShader(a),s}function si(i){for(var r=new Array(i),t=0;t<r.length;t++)r[t]=!1;return r}function Bs(i,r){switch(i){case"float":return 0;case"vec2":return new Float32Array(2*r);case"vec3":return new Float32Array(3*r);case"vec4":return new Float32Array(4*r);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*r);case"ivec3":return new Int32Array(3*r);case"ivec4":return new Int32Array(4*r);case"bool":return!1;case"bvec2":return si(2*r);case"bvec3":return si(3*r);case"bvec4":return si(4*r);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var ks={},Ne=ks;function Xs(){if(Ne===ks||Ne&&Ne.isContextLost()){var i=document.createElement("canvas"),r=void 0;L.PREFER_ENV>=Ft.WEBGL2&&(r=i.getContext("webgl2",{})),r||(r=i.getContext("webgl",{})||i.getContext("experimental-webgl",{}),r?r.getExtension("WEBGL_draw_buffers"):r=null),Ne=r}return Ne}var xr;function hu(){if(!xr){xr=It.MEDIUM;var i=Xs();if(i&&i.getShaderPrecisionFormat){var r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);xr=r.precision?It.HIGH:It.MEDIUM}}return xr}function ua(i,r,t){if(i.substring(0,9)!=="precision"){var e=r;return r===It.HIGH&&t!==It.HIGH&&(e=It.MEDIUM),"precision "+e+` float;
`+i}else if(t!==It.HIGH&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}var uu={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function lu(i){return uu[i]}var br=null,la={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function fa(i,r){if(!br){var t=Object.keys(la);br={};for(var e=0;e<t.length;++e){var n=t[e];br[i[n]]=la[n]}}return br[r]}var Cr=[{test:function(i){return i.type==="float"&&i.size===1},code:function(i){return`
            if(uv["`+i+'"] !== ud["'+i+`"].value)
            {
                ud["`+i+'"].value = uv["'+i+`"]
                gl.uniform1f(ud["`+i+'"].location, uv["'+i+`"])
            }
            `}},{test:function(i){return(i.type==="sampler2D"||i.type==="samplerCube"||i.type==="sampler2DArray")&&i.size===1&&!i.isArray},code:function(i){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+i+`"], t);

            if(ud["`+i+`"].value !== t)
            {
                ud["`+i+`"].value = t;
                gl.uniform1i(ud["`+i+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(i,r){return i.type==="mat3"&&i.size===1&&r.a!==void 0},code:function(i){return`
            gl.uniformMatrix3fv(ud["`+i+'"].location, false, uv["'+i+`"].toArray(true));
            `}},{test:function(i,r){return i.type==="vec2"&&i.size===1&&r.x!==void 0},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+i+`"].location, v.x, v.y);
                }`}},{test:function(i){return i.type==="vec2"&&i.size===1},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+i+`"].location, v[0], v[1]);
                }
            `}},{test:function(i,r){return i.type==="vec4"&&i.size===1&&r.width!==void 0},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+i+`"].location, v.x, v.y, v.width, v.height)
                }`}},{test:function(i){return i.type==="vec4"&&i.size===1},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+i+`"].location, v[0], v[1], v[2], v[3])
                }`}}],fu={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},cu={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function du(i,r){var t=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var e in i.uniforms){var n=r[e];if(!n){i.uniforms[e].group&&t.push(`
                    renderer.shader.syncUniformGroup(uv["`+e+`"], syncData);
                `);continue}for(var a=i.uniforms[e],s=!1,o=0;o<Cr.length;o++)if(Cr[o].test(n,a)){t.push(Cr[o].code(e,a)),s=!0;break}if(!s){var h=n.size===1?fu:cu,u=h[n.type].replace("location",'ud["'+e+'"].location');t.push(`
            cv = ud["`+e+`"].value;
            v = uv["`+e+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}var pu=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function vu(i){for(var r="",t=0;t<i;++t)t>0&&(r+=`
else `),t<i-1&&(r+="if(test == "+t+".0){}");return r}function Gs(i,r){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var t=r.createShader(r.FRAGMENT_SHADER);;){var e=pu.replace(/%forloop%/gi,vu(i));if(r.shaderSource(t,e),r.compileShader(t),!r.getShaderParameter(t,r.COMPILE_STATUS))i=i/2|0;else break}return i}var De;function mu(){if(typeof De=="boolean")return De;try{var i=new Function("param1","param2","param3","return param1[param2] === param3;");De=i({a:"b"},"a","b")===!0}catch{De=!1}return De}var gu=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,yu=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,_u=0,Tr={},nr=function(){function i(r,t,e){e===void 0&&(e="pixi-shader"),this.id=_u++,this.vertexSrc=r||i.defaultVertexSrc,this.fragmentSrc=t||i.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(e=e.replace(/\s+/g,"-"),Tr[e]?(Tr[e]++,e+="-"+Tr[e]):Tr[e]=1,this.vertexSrc="#define SHADER_NAME "+e+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+e+`
`+this.fragmentSrc,this.vertexSrc=ua(this.vertexSrc,L.PRECISION_VERTEX,It.HIGH),this.fragmentSrc=ua(this.fragmentSrc,L.PRECISION_FRAGMENT,hu())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return i.prototype.extractData=function(r,t){var e=Xs();if(e){var n=Us(e,r,t);this.attributeData=this.getAttributeData(n,e),this.uniformData=this.getUniformData(n,e),e.deleteProgram(n)}else this.uniformData={},this.attributeData={}},i.prototype.getAttributeData=function(r,t){for(var e={},n=[],a=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),s=0;s<a;s++){var o=t.getActiveAttrib(r,s),h=fa(t,o.type),u={type:h,name:o.name,size:lu(h),location:0};e[o.name]=u,n.push(u)}n.sort(function(c,f){return c.name>f.name?1:-1});for(var s=0;s<n.length;s++)n[s].location=s;return e},i.prototype.getUniformData=function(r,t){for(var e={},n=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),a=0;a<n;a++){var s=t.getActiveUniform(r,a),o=s.name.replace(/\[.*?\]$/,""),h=s.name.match(/\[.*?\]$/),u=fa(t,s.type);e[o]={type:u,size:s.size,isArray:h,value:Bs(u,s.size)}}return e},Object.defineProperty(i,"defaultVertexSrc",{get:function(){return yu},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentSrc",{get:function(){return gu},enumerable:!1,configurable:!0}),i.from=function(r,t,e){var n=r+t,a=Li[n];return a||(Li[n]=a=new i(r,t,e)),a},i}(),Wt=function(){function i(r,t){this.program=r,t?t instanceof Yt?this.uniformGroup=t:this.uniformGroup=new Yt(t):this.uniformGroup=new Yt({});for(var e in r.uniformData)this.uniformGroup.uniforms[e]instanceof Array&&(this.uniformGroup.uniforms[e]=new Float32Array(this.uniformGroup.uniforms[e]))}return i.prototype.checkUniformExists=function(r,t){if(t.uniforms[r])return!0;for(var e in t.uniforms){var n=t.uniforms[e];if(n.group&&this.checkUniformExists(r,n))return!0}return!1},i.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(i.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),i.from=function(r,t,e){var n=nr.from(r,t);return new i(n,e)},i}(),oi=0,hi=1,ui=2,li=3,fi=4,qt=function(){function i(){this.data=0,this.blendMode=U.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(i.prototype,"blend",{get:function(){return!!(this.data&1<<oi)},set:function(r){!!(this.data&1<<oi)!==r&&(this.data^=1<<oi)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offsets",{get:function(){return!!(this.data&1<<hi)},set:function(r){!!(this.data&1<<hi)!==r&&(this.data^=1<<hi)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"culling",{get:function(){return!!(this.data&1<<ui)},set:function(r){!!(this.data&1<<ui)!==r&&(this.data^=1<<ui)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"depthTest",{get:function(){return!!(this.data&1<<li)},set:function(r){!!(this.data&1<<li)!==r&&(this.data^=1<<li)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<fi)},set:function(r){!!(this.data&1<<fi)!==r&&(this.data^=1<<fi)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this._blendMode},set:function(r){this.blend=r!==U.NONE,this._blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(r){this.offsets=!!r,this._polygonOffset=r},enumerable:!1,configurable:!0}),i.for2d=function(){var r=new i;return r.depthTest=!1,r.blend=!0,r},i}(),xu=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,bu=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Gt=function(i){z(r,i);function r(t,e,n){var a=this,s=nr.from(t||r.defaultVertexSrc,e||r.defaultFragmentSrc);return a=i.call(this,s,n)||this,a.padding=0,a.resolution=L.FILTER_RESOLUTION,a.enabled=!0,a.autoFit=!0,a.legacy=!!a.program.attributeData.aTextureCoord,a.state=new qt,a}return r.prototype.apply=function(t,e,n,a,s){t.applyFilter(this,e,n,a)},Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultVertexSrc",{get:function(){return xu},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return bu},enumerable:!1,configurable:!0}),r}(Wt),Tu=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,wu=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,ca=new ht,Vr=function(){function i(r,t){this._texture=r,this.mapCoord=new ht,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}return Object.defineProperty(i.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture=r,this._textureID=-1},enumerable:!1,configurable:!0}),i.prototype.multiplyUvs=function(r,t){t===void 0&&(t=r);for(var e=this.mapCoord,n=0;n<r.length;n+=2){var a=r[n],s=r[n+1];t[n]=a*e.a+s*e.c+e.tx,t[n+1]=a*e.b+s*e.d+e.ty}return t},i.prototype.update=function(r){var t=this._texture;if(!t||!t.valid||!r&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var e=t._uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);var n=t.orig,a=t.trim;a&&(ca.set(n.width/a.width,0,0,n.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(ca));var s=t.baseTexture,o=this.uClampFrame,h=this.clampMargin/s.resolution,u=this.clampOffset;return o[0]=(t._frame.x+h+u)/s.width,o[1]=(t._frame.y+h+u)/s.height,o[2]=(t._frame.x+t._frame.width-h+u)/s.width,o[3]=(t._frame.y+t._frame.height-h+u)/s.height,this.uClampOffset[0]=u/s.realWidth,this.uClampOffset[1]=u/s.realHeight,this.isSimple=t._frame.width===s.width&&t._frame.height===s.height&&t.rotate===0,!0},i}(),js=function(i){z(r,i);function r(t){var e=this,n=new ht;return e=i.call(this,Tu,wu)||this,t.renderable=!1,e.maskSprite=t,e.maskMatrix=n,e}return r.prototype.apply=function(t,e,n,a){var s=this.maskSprite,o=s._texture;!o.valid||(o.uvMatrix||(o.uvMatrix=new Vr(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,n,a))},r}(Gt),Hs=function(i){z(r,i);function r(t){var e=i.call(this,t)||this;return e.enableScissor=!1,e.alphaMaskPool=[],e.maskDataPool=[],e.maskStack=[],e.alphaMaskIndex=0,e}return r.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},r.prototype.push=function(t,e){var n=e;if(!n.isMaskData){var a=this.maskDataPool.pop()||new Ds;a.pooled=!0,a.maskObject=e,n=a}switch(n.autoDetect&&this.detect(n),n.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),n._target=t,n.type){case mt.SCISSOR:this.maskStack.push(n),this.renderer.scissor.push(n);break;case mt.STENCIL:this.maskStack.push(n),this.renderer.stencil.push(n);break;case mt.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n),this.maskStack.push(n);break}},r.prototype.pop=function(t){var e=this.maskStack.pop();if(!(!e||e._target!==t)){switch(e.type){case mt.SCISSOR:this.renderer.scissor.pop();break;case mt.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case mt.SPRITE:this.popSpriteMask();break}e.reset(),e.pooled&&this.maskDataPool.push(e)}},r.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite){t.type=mt.SPRITE;return}if(t.type=mt.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var n=e.worldTransform,a=Math.atan2(n.b,n.a),s=Math.atan2(n.d,n.c);a=Math.round(a*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-a,a=(a%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,a===0&&s===9e3&&(t.type=mt.SCISSOR)}},r.prototype.pushSpriteMask=function(t){var e=t.maskObject,n=t._target,a=this.alphaMaskPool[this.alphaMaskIndex];a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new js(e)]),a[0].resolution=this.renderer.resolution,a[0].maskSprite=e;var s=n.filterArea;n.filterArea=e.getBounds(!0),this.renderer.filter.push(n,a),n.filterArea=s,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},r}(yt),zs=function(i){z(r,i);function r(t){var e=i.call(this,t)||this;return e.maskStack=[],e.glConst=0,e}return r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(t){var e=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var a=this.getStackLength();a!==n&&(a===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.maskStack=null},r}(yt),Vs=function(i){z(r,i);function r(t){var e=i.call(this,t)||this;return e.glConst=WebGLRenderingContext.SCISSOR_TEST,e}return r.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},r.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var n=t._scissorRect,a=e.getBounds(!0),s=this.renderer.gl;e.renderable=!1,n?a.fit(n):s.enable(s.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=a,this._useCurrent()},r.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},r.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,n=this.renderer.projection,a=n.transform,s=n.sourceFrame,o=n.destinationFrame,h=e?e.resolution:this.renderer.resolution,u=(t.x-s.x)*h+o.x,c=(t.y-s.y)*h+o.y,f=t.width*h,l=t.height*h;a&&(u+=a.tx*h,c+=a.ty*h),e||(c=this.renderer.height-l-c),this.renderer.gl.scissor(u,c,f,l)},r}(zs),Ys=function(i){z(r,i);function r(t){var e=i.call(this,t)||this;return e.glConst=WebGLRenderingContext.STENCIL_TEST,e}return r.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},r.prototype.push=function(t){var e=t.maskObject,n=this.renderer.gl,a=t._stencilCounter;a===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),t._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,a,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},r.prototype.pop=function(t){var e=this.renderer.gl;this.getStackLength()===0?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},r.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},r.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},r}(zs),Ws=function(i){z(r,i);function r(t){var e=i.call(this,t)||this;return e.destinationFrame=null,e.sourceFrame=null,e.defaultFrame=null,e.projectionMatrix=new ht,e.transform=null,e}return r.prototype.update=function(t,e,n,a){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,a),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(t,e,n,a){var s=this.projectionMatrix,o=a?-1:1;s.identity(),s.a=1/e.width*2,s.d=o*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-o-e.y*s.d},r.prototype.setTransform=function(t){},r}(yt),Zt=new W,Ue=new W,Be=new W,$s=function(i){z(r,i);function r(t){var e=i.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new W,e.destinationFrame=new W,e}return r.prototype.bind=function(t,e,n){t===void 0&&(t=null);var a=this.renderer;this.current=t;var s,o,h;t?(s=t.baseTexture,h=s.resolution,e||(Zt.width=t.frame.width,Zt.height=t.frame.height,e=Zt),n||(Ue.x=t.frame.x,Ue.y=t.frame.y,Ue.width=e.width,Ue.height=e.height,n=Ue),o=s.framebuffer):(h=a.resolution,e||(Zt.width=a.screen.width,Zt.height=a.screen.height,e=Zt),n||(n=Zt,n.width=e.width,n.height=e.height)),Be.x=n.x*h,Be.y=n.y*h,Be.width=n.width*h,Be.height=n.height*h,this.renderer.framebuffer.bind(o,Be),this.renderer.projection.update(n,e,h,!o),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(n)},r.prototype.clear=function(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e)},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r}(yt),Pu=function(){function i(){}return i}(),qs=function(){function i(r,t){this.program=r,this.uniformData=t,this.uniformGroups={}}return i.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},i}(),Iu=0,da={textureCount:0},Zs=function(i){z(r,i);function r(t){var e=i.call(this,t)||this;return e.destroyed=!1,e.systemCheck(),e.gl=null,e.shader=null,e.program=null,e.cache={},e.id=Iu++,e}return r.prototype.systemCheck=function(){if(!mu())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(t){this.gl=t,this.reset()},r.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,a=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(a.program)),e||(da.textureCount=0,this.syncUniformGroup(t.uniformGroup,da)),a},r.prototype.setUniforms=function(t){var e=this.shader.program,n=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(n.uniformData,t,this.renderer)},r.prototype.syncUniformGroup=function(t,e){var n=this.getglProgram();(!t.static||t.dirtyId!==n.uniformGroups[t.id])&&(n.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,e))},r.prototype.syncUniforms=function(t,e,n){var a=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);a(e.uniformData,t.uniforms,this.renderer,n)},r.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=du(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},r.prototype.getSignature=function(t,e){var n=t.uniforms,a=[];for(var s in n)a.push(s),e[s]&&a.push(e[s].type);return a.join("-")},r.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateShader=function(t){var e=this.gl,n=t.program,a={};for(var s in n.attributeData)a[s]=n.attributeData[s].location;var o=Us(e,n.vertexSrc,n.fragmentSrc,a),h={};for(var s in n.uniformData){var u=n.uniformData[s];h[s]={location:e.getUniformLocation(o,s),value:Bs(u.type,u.size)}}var c=new qs(o,h);return n.glPrograms[this.renderer.CONTEXT_UID]=c,c},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.destroy=function(){this.destroyed=!0},r}(yt);function Eu(i,r){return r===void 0&&(r=[]),r[U.NORMAL]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],r[U.ADD]=[i.ONE,i.ONE],r[U.MULTIPLY]=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],r[U.SCREEN]=[i.ONE,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],r[U.OVERLAY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],r[U.DARKEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],r[U.LIGHTEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],r[U.COLOR_DODGE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],r[U.COLOR_BURN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],r[U.HARD_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],r[U.SOFT_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],r[U.DIFFERENCE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],r[U.EXCLUSION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],r[U.HUE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],r[U.SATURATION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],r[U.COLOR]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],r[U.LUMINOSITY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],r[U.NONE]=[0,0],r[U.NORMAL_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],r[U.ADD_NPM]=[i.SRC_ALPHA,i.ONE,i.ONE,i.ONE],r[U.SCREEN_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],r[U.SRC_IN]=[i.DST_ALPHA,i.ZERO],r[U.SRC_OUT]=[i.ONE_MINUS_DST_ALPHA,i.ZERO],r[U.SRC_ATOP]=[i.DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],r[U.DST_OVER]=[i.ONE_MINUS_DST_ALPHA,i.ONE],r[U.DST_IN]=[i.ZERO,i.SRC_ALPHA],r[U.DST_OUT]=[i.ZERO,i.ONE_MINUS_SRC_ALPHA],r[U.DST_ATOP]=[i.ONE_MINUS_DST_ALPHA,i.SRC_ALPHA],r[U.XOR]=[i.ONE_MINUS_DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],r[U.SUBTRACT]=[i.ONE,i.ONE,i.ONE,i.ONE,i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD],r}var Su=0,Au=1,Cu=2,Ou=3,Fu=4,Ks=function(i){z(r,i);function r(t){var e=i.call(this,t)||this;return e.gl=null,e.stateId=0,e.polygonOffset=0,e.blendMode=U.NONE,e._blendEq=!1,e.map=[],e.map[Su]=e.setBlend,e.map[Au]=e.setOffset,e.map[Cu]=e.setCullFace,e.map[Ou]=e.setDepthTest,e.map[Fu]=e.setFrontFace,e.checks=[],e.defaultState=new qt,e.defaultState.blend=!0,e}return r.prototype.contextChange=function(t){this.gl=t,this.blendModes=Eu(t),this.set(this.defaultState),this.reset()},r.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,n=0;e;)e&1&&this.map[n].call(this,!!(t.data&1<<n)),e=e>>1,n++;this.stateId=t.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,t)},r.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},r.prototype.setBlend=function(t){this.updateCheck(r.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(t){this.updateCheck(r.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},r.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],n=this.gl;e.length===2?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},r.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(t,e){var n=this.checks.indexOf(t);e&&n===-1?this.checks.push(t):!e&&n!==-1&&this.checks.splice(n,1)},r.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},r.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},r}(yt),Js=function(i){z(r,i);function r(t){var e=i.call(this,t)||this;return e.count=0,e.checkCount=0,e.maxIdle=L.GC_MAX_IDLE,e.checkCountMax=L.GC_MAX_CHECK_COUNT,e.mode=L.GC_MODE,e}return r.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==Rr.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,n=!1,a=0;a<e.length;a++){var s=e[a];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[a]=null,n=!0)}if(n){for(var o=0,a=0;a<e.length;a++)e[a]!==null&&(e[o++]=e[a]);e.length=o}},r.prototype.unload=function(t){var e=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&e.destroyTexture(n);for(var a=t.children.length-1;a>=0;a--)this.unload(t.children[a])},r}(yt),Or=function(){function i(r){this.texture=r,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121}return i}(),Qs=function(i){z(r,i);function r(t){var e=i.call(this,t)||this;return e.boundTextures=[],e.currentLocation=-1,e.managedTextures=[],e._unknownBoundTextures=!1,e.unknownTexture=new K,e}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};var a=new Or(t.createTexture());t.bindTexture(t.TEXTURE_2D,a.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=a,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Or(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var n=0;n<this.boundTextures.length;n++)this.bind(null,n)},r.prototype.bind=function(t,e){e===void 0&&(e=0);var n=this.gl;if(t){if(t=t.castToBaseTexture(),t.parentTextureArray)return;if(t.valid){t.touched=this.renderer.textureGC.count;var a=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(t.target,a.texture)),a.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[e]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},r.prototype.unbind=function(t){var e=this,n=e.gl,a=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<a.length;s++)a[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<a.length;s++)a[s]===t&&(this.currentLocation!==s&&(n.activeTexture(n.TEXTURE0+s),this.currentLocation=s),n.bindTexture(t.target,this.emptyTextures[t.target].texture),a[s]=null)},r.prototype.initTexture=function(t){var e=new Or(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},r.prototype.initTextureType=function(t,e){if(e.internalFormat=t.format,e.type=t.type,this.webGLVersion===2){var n=this.renderer.gl;t.type===n.FLOAT&&t.format===n.RGBA&&(e.internalFormat=n.RGBA32F),t.type===ot.HALF_FLOAT&&(e.type=n.HALF_FLOAT),e.type===n.HALF_FLOAT&&t.format===n.RGBA&&(e.internalFormat=n.RGBA16F)}},r.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(!!e){var n=this.renderer;if(this.initTextureType(t,e),!(t.resource&&t.resource.upload(n,t,e))){var a=t.realWidth,s=t.realHeight,o=n.gl;(e.width!==a||e.height!==s||e.dirtyId<0)&&(e.width=a,e.height=s,o.texImage2D(t.target,0,e.internalFormat,a,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},r.prototype.destroyTexture=function(t,e){var n=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var a=this.managedTextures.indexOf(t);a!==-1&&ae(this.managedTextures,a,1)}},r.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];!e||((t.mipmap===Pe.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=Ut.CLAMP:e.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},r.prototype.setStyle=function(t,e){var n=this.gl;if(e.mipmap&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Ot.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var a=this.renderer.context.extensions.anisotropicFiltering;if(a&&t.anisotropicLevel>0&&t.scaleMode===Ot.LINEAR){var s=Math.min(t.anisotropicLevel,n.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,a.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Ot.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===Ot.LINEAR?n.LINEAR:n.NEAREST)},r}(yt),Ru={FilterSystem:Os,BatchSystem:Fs,ContextSystem:Rs,FramebufferSystem:Ls,GeometrySystem:Ns,MaskSystem:Hs,ScissorSystem:Vs,StencilSystem:Ys,ProjectionSystem:Ws,RenderTextureSystem:$s,ShaderSystem:Zs,StateSystem:Ks,TextureGCSystem:Js,TextureSystem:Qs},ci=new ht,to=function(i){z(r,i);function r(t,e){t===void 0&&(t=Te.UNKNOWN);var n=i.call(this)||this;return e=Object.assign({},L.RENDER_OPTIONS,e),e.roundPixels&&(L.ROUND_PIXELS=e.roundPixels,I("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),n.options=e,n.type=t,n.screen=new W(0,0,e.width,e.height),n.view=e.view||document.createElement("canvas"),n.resolution=e.resolution||L.RESOLUTION,n.transparent=e.transparent,n.autoDensity=e.autoDensity||e.autoResize||!1,n.preserveDrawingBuffer=e.preserveDrawingBuffer,n.clearBeforeRender=e.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,0],n._backgroundColorString="#000000",n.backgroundColor=e.backgroundColor||n._backgroundColor,n._lastObjectRendered=null,n.plugins={},n}return r.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(r.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),r.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},r.prototype.generateTexture=function(t,e,n,a){a=a||t.getLocalBounds(null,!0),a.width===0&&(a.width=1),a.height===0&&(a.height=1);var s=le.create({width:a.width|0,height:a.height|0,scaleMode:e,resolution:n});return ci.tx=-a.x,ci.ty=-a.y,this.render(t,s,!1,ci,!!t.parent),s},r.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=Te.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(r.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=mn(t),he(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),r}(Oe),jt=function(i){z(r,i);function r(t){var e=i.call(this,Te.WEBGL,t)||this;return t=e.options,e.gl=null,e.CONTEXT_UID=0,e.runners={destroy:new dt("destroy"),contextChange:new dt("contextChange"),reset:new dt("reset"),update:new dt("update"),postrender:new dt("postrender"),prerender:new dt("prerender"),resize:new dt("resize")},e.globalUniforms=new Yt({projectionMatrix:new ht},!0),e.addSystem(Hs,"mask").addSystem(Rs,"context").addSystem(Ks,"state").addSystem(Zs,"shader").addSystem(Qs,"texture").addSystem(Ns,"geometry").addSystem(Ls,"framebuffer").addSystem(Vs,"scissor").addSystem(Ys,"stencil").addSystem(Ws,"projection").addSystem(Js,"textureGC").addSystem(Os,"filter").addSystem($s,"renderTexture").addSystem(Fs,"batch"),e.initPlugins(r.__plugins),t.context?e.context.initFromContext(t.context):e.context.initFromOptions({alpha:!!e.transparent,antialias:t.antialias,premultipliedAlpha:e.transparent&&e.transparent!=="notMultiplied",stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:e.options.powerPreference}),e.renderingToScreen=!0,es(e.context.webGLVersion===2?"WebGL 2":"WebGL 1"),e.resize(e.options.width,e.options.height),e}return r.create=function(t){if(rs())return new r(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},r.prototype.addSystem=function(t,e){e||(e=t.name);var n=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');this[e]=n;for(var a in this.runners)this.runners[a].add(n);return this},r.prototype.render=function(t,e,n,a,s){if(this.renderingToScreen=!e,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(e||(this._lastObjectRendered=t),!s){var o=t.enableTempParent();t.updateTransform(),t.disableTempParent(o)}this.renderTexture.bind(e),this.batch.currentRenderer.start(),(n!==void 0?n:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},r.prototype.resize=function(t,e){i.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},r.prototype.reset=function(){return this.runners.reset.emit(),this},r.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},r.prototype.destroy=function(t){this.runners.destroy.emit();for(var e in this.runners)this.runners[e].destroy();i.prototype.destroy.call(this,t),this.gl=null},r.registerPlugin=function(t,e){r.__plugins=r.__plugins||{},r.__plugins[t]=e},r}(to);function eo(i){return jt.create(i)}var ro=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,On=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Nr=function(){function i(){this.texArray=null,this.blend=0,this.type=bt.TRIANGLES,this.start=0,this.size=0,this.data=null}return i}(),Dr=function(){function i(){this.elements=[],this.ids=[],this.count=0}return i.prototype.clear=function(){for(var r=0;r<this.count;r++)this.elements[r]=null;this.count=0},i}(),io=function(){function i(r){this.rawBinaryData=new ArrayBuffer(r),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(i.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),i.prototype.view=function(r){return this[r+"View"]},i.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},i.sizeOf=function(r){switch(r){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(r+" isn't a valid view type")}},i}(),no=function(i){z(r,i);function r(t){var e=i.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=qt.for2d(),e.size=L.SPRITE_BATCH_SIZE*4,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}return r.prototype.contextChange=function(){var t=this.renderer.gl;L.PREFER_ENV===Ft.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),L.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Gs(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},r.prototype.initFlushBuffers=function(){for(var t=r._drawCallPool,e=r._textureArrayPool,n=this.size/4,a=Math.floor(n/this.MAX_TEXTURES)+1;t.length<n;)t.push(new Nr);for(;e.length<a;)e.push(new Dr);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},r.prototype.onPrerender=function(){this._flushId=0},r.prototype.render=function(t){!t._texture.valid||(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},r.prototype.buildTexturesAndDrawCalls=function(){var t=this,e=t._bufferedTextures,n=t.MAX_TEXTURES,a=r._textureArrayPool,s=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count,u=++K._globalBatch,c=0,f=a[0],l=0;s.copyBoundTextures(o,n);for(var d=0;d<this._bufferSize;++d){var p=e[d];e[d]=null,p._batchEnabled!==u&&(f.count>=n&&(s.boundArray(f,o,u,n),this.buildDrawCalls(f,l,d),l=d,f=a[++c],++u),p._batchEnabled=u,p.touched=h,f.elements[f.count++]=p)}f.count>0&&(s.boundArray(f,o,u,n),this.buildDrawCalls(f,l,this._bufferSize),++c,++u);for(var d=0;d<o.length;d++)o[d]=null;K._globalBatch=u},r.prototype.buildDrawCalls=function(t,e,n){var a=this,s=a._bufferedElements,o=a._attributeBuffer,h=a._indexBuffer,u=a.vertexSize,c=r._drawCallPool,f=this._dcIndex,l=this._aIndex,d=this._iIndex,p=c[f];p.start=this._iIndex,p.texArray=t;for(var v=e;v<n;++v){var m=s[v],y=m._texture.baseTexture,x=yn[y.alphaMode?1:0][m.blendMode];s[v]=null,e<v&&p.blend!==x&&(p.size=d-p.start,e=v,p=c[++f],p.texArray=t,p.start=d),this.packInterleavedGeometry(m,o,h,l,d),l+=m.vertexData.length/2*u,d+=m.indices.length,p.blend=x}e<n&&(p.size=d-p.start,++f),this._dcIndex=f,this._aIndex=l,this._iIndex=d},r.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0},r.prototype.updateGeometry=function(){var t=this,e=t._packedGeometries,n=t._attributeBuffer,a=t._indexBuffer;L.CAN_UPLOAD_SAME_BUFFER?(e[this._flushId]._buffer.update(n.rawBinaryData),e[this._flushId]._indexBuffer.update(a),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(n.rawBinaryData),e[this._flushId]._indexBuffer.update(a),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},r.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,n=e.gl,a=e.state,s=r._drawCallPool,o=null,h=0;h<t;h++){var u=s[h],c=u.texArray,f=u.type,l=u.size,d=u.start,p=u.blend;o!==c&&(o=c,this.bindAndClearTexArray(c)),this.state.blendMode=p,a.set(this.state),n.drawElements(f,l,n.UNSIGNED_SHORT,d*2)}},r.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},r.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),L.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},r.prototype.stop=function(){this.flush()},r.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),i.prototype.destroy.call(this)},r.prototype.getAttributeBuffer=function(t){var e=qe(Math.ceil(t/8)),n=Mi(e),a=e*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var s=this._aBuffers[a];return s||(this._aBuffers[a]=s=new io(a*this.vertexSize*4)),s},r.prototype.getIndexBuffer=function(t){var e=qe(Math.ceil(t/12)),n=Mi(e),a=e*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var s=this._iBuffers[n];return s||(this._iBuffers[n]=s=new Uint16Array(a)),s},r.prototype.packInterleavedGeometry=function(t,e,n,a,s){for(var o=e.uint32View,h=e.float32View,u=a/this.vertexSize,c=t.uvs,f=t.indices,l=t.vertexData,d=t._texture.baseTexture._batchLocation,p=Math.min(t.worldAlpha,1),v=p<1&&t._texture.baseTexture.alphaMode?jr(t._tintRGB,p):t._tintRGB+(p*255<<24),m=0;m<l.length;m+=2)h[a++]=l[m],h[a++]=l[m+1],h[a++]=c[m],h[a++]=c[m+1],o[a++]=v,h[a++]=d;for(var m=0;m<f.length;m++)n[s++]=u+f[m]},r._drawCallPool=[],r._textureArrayPool=[],r}(ir),ao=function(){function i(r,t){if(this.vertexSrc=r,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return i.prototype.generateShader=function(r){if(!this.programCache[r]){for(var t=new Int32Array(r),e=0;e<r;e++)t[e]=e;this.defaultGroupCache[r]=Yt.from({uSamplers:t},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+r),n=n.replace(/%forloop%/gi,this.generateSampleSrc(r)),this.programCache[r]=new nr(this.vertexSrc,n)}var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new ht,default:this.defaultGroupCache[r]};return new Wt(this.programCache[r],a)},i.prototype.generateSampleSrc=function(r){var t="";t+=`
`,t+=`
`;for(var e=0;e<r;e++)e>0&&(t+=`
else `),e<r-1&&(t+="if(vTextureId < "+e+".5)"),t+=`
{`,t+=`
	color = texture2D(uSamplers[`+e+"], vTextureCoord);",t+=`
}`;return t+=`
`,t+=`
`,t},i}(),Fn=function(i){z(r,i);function r(t){t===void 0&&(t=!1);var e=i.call(this)||this;return e._buffer=new lt(null,t,!1),e._indexBuffer=new lt(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,ot.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,ot.FLOAT).addAttribute("aColor",e._buffer,4,!0,ot.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,ot.FLOAT).addIndex(e._indexBuffer),e}return r}(Fe),pa=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,va=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,so=function(){function i(){}return i.create=function(r){var t=Object.assign({vertex:pa,fragment:va,geometryClass:Fn,vertexSize:6},r),e=t.vertex,n=t.fragment,a=t.vertexSize,s=t.geometryClass;return function(o){z(h,o);function h(u){var c=o.call(this,u)||this;return c.shaderGenerator=new ao(e,n),c.geometryClass=s,c.vertexSize=a,c}return h}(no)},Object.defineProperty(i,"defaultVertexSrc",{get:function(){return pa},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentTemplate",{get:function(){return va},enumerable:!1,configurable:!0}),i}(),oo=so.create();/*!
 * @pixi/app - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ar=function(){function i(r){var t=this;r=Object.assign({forceCanvas:!1},r),this.renderer=eo(r),this.stage=new Et,i._plugins.forEach(function(e){e.init.call(t,r)})}return i.registerPlugin=function(r){i._plugins.push(r)},i.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(i.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),i.prototype.destroy=function(r,t){var e=this,n=i._plugins.slice(0);n.reverse(),n.forEach(function(a){a.destroy.call(e)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(r),this.renderer=null},i}();ar._plugins=[];var Mu=function(){function i(){}return i.init=function(r){var t=this;Object.defineProperty(this,"resizeTo",{set:function(e){window.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){!t._resizeTo||(t.cancelResize(),t._resizeId=requestAnimationFrame(function(){return t.resize()}))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(!!t._resizeTo){t.cancelResize();var e,n;if(t._resizeTo===window)e=window.innerWidth,n=window.innerHeight;else{var a=t._resizeTo,s=a.clientWidth,o=a.clientHeight;e=s,n=o}t.renderer.resize(e,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=r.resizeTo||null},i.destroy=function(){window.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},i}();ar.registerPlugin(Mu);/*!
 * @pixi/extract - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ma=new W,ga=4,ho=function(){function i(r){this.renderer=r,r.extract=this}return i.prototype.image=function(r,t,e){var n=new Image;return n.src=this.base64(r,t,e),n},i.prototype.base64=function(r,t,e){return this.canvas(r).toDataURL(t,e)},i.prototype.canvas=function(r){var t=this.renderer,e,n,a=!1,s,o=!1;r&&(r instanceof le?s=r:(s=this.renderer.generateTexture(r),o=!0)),s?(e=s.baseTexture.resolution,n=s.frame,a=!1,t.renderTexture.bind(s)):(e=this.renderer.resolution,a=!0,n=ma,n.width=this.renderer.width,n.height=this.renderer.height,t.renderTexture.bind(null));var h=Math.floor(n.width*e+1e-4),u=Math.floor(n.height*e+1e-4),c=new Ni(h,u,1),f=new Uint8Array(ga*h*u),l=t.gl;l.readPixels(n.x*e,n.y*e,h,u,l.RGBA,l.UNSIGNED_BYTE,f);var d=c.context.getImageData(0,0,h,u);if(i.arrayPostDivide(f,d.data),c.context.putImageData(d,0,0),a){var p=new Ni(c.width,c.height,1);p.context.scale(1,-1),p.context.drawImage(c.canvas,0,-u),c.destroy(),c=p}return o&&s.destroy(!0),c.canvas},i.prototype.pixels=function(r){var t=this.renderer,e,n,a,s=!1;r&&(r instanceof le?a=r:(a=this.renderer.generateTexture(r),s=!0)),a?(e=a.baseTexture.resolution,n=a.frame,t.renderTexture.bind(a)):(e=t.resolution,n=ma,n.width=t.width,n.height=t.height,t.renderTexture.bind(null));var o=n.width*e,h=n.height*e,u=new Uint8Array(ga*o*h),c=t.gl;return c.readPixels(n.x*e,n.y*e,o,h,c.RGBA,c.UNSIGNED_BYTE,u),s&&a.destroy(!0),i.arrayPostDivide(u,u),u},i.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},i.arrayPostDivide=function(r,t){for(var e=0;e<r.length;e+=4){var n=t[e+3]=r[e+3];n!==0?(t[e]=Math.round(Math.min(r[e]*255/n,255)),t[e+1]=Math.round(Math.min(r[e+1]*255/n,255)),t[e+2]=Math.round(Math.min(r[e+2]*255/n,255))):(t[e]=r[e],t[e+1]=r[e+1],t[e+2]=r[e+2])}},i}(),uo=(i,r={})=>{if(!i)return;const t={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}},e=t.parser[r.strictMode?"strict":"loose"].exec(i),n={};let a=14;for(;a--;)n[t.key[a]]=e[a]||"";return n[t.q.name]={},n[t.key[12]].replace(t.q.parser,function(s,o,h){o&&(n[t.q.name][o]=h)}),n};class wr{constructor(r,t=!1,e){this._fn=r,this._once=t,this._thisArg=e,this._next=this._prev=this._owner=null}detach(){return this._owner===null?!1:(this._owner.detach(this),!0)}}function ya(i,r){return i._head?(i._tail._next=r,r._prev=i._tail,i._tail=r):(i._head=r,i._tail=r),r._owner=i,r}class Lt{constructor(){this._head=this._tail=void 0}handlers(r=!1){let t=this._head;if(r)return!!t;const e=[];for(;t;)e.push(t),t=t._next;return e}has(r){if(!(r instanceof wr))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return r._owner===this}dispatch(){let r=this._head;if(!r)return!1;for(;r;)r._once&&this.detach(r),r._fn.apply(r._thisArg,arguments),r=r._next;return!0}add(r,t=null){if(typeof r!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return ya(this,new wr(r,!1,t))}once(r,t=null){if(typeof r!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return ya(this,new wr(r,!0,t))}detach(r){if(!(r instanceof wr))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return r._owner!==this?this:(r._prev&&(r._prev._next=r._next),r._next&&(r._next._prev=r._prev),r===this._head?(this._head=r._next,r._next===null&&(this._tail=null)):r===this._tail&&(this._tail=r._prev,this._tail._next=null),r._owner=null,this)}detachAll(){let r=this._head;if(!r)return this;for(this._head=this._tail=null;r;)r._owner=null,r=r._next;return this}}/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */function Kt(){}function _a(i,r,t,e){var n=0,a=i.length;(function s(o){if(o||n===a){t&&t(o);return}e?setTimeout(function(){r(i[n++],s)},1):r(i[n++],s)})()}function Lu(i){return function(){if(i===null)throw new Error("Callback was already called.");var t=i;i=null,t.apply(this,arguments)}}function Nu(i,r){if(r==null)r=1;else if(r===0)throw new Error("Concurrency must not be zero");var t=0,e={_tasks:[],concurrency:r,saturated:Kt,unsaturated:Kt,buffer:r/4,empty:Kt,drain:Kt,error:Kt,started:!1,paused:!1,push:function(o,h){n(o,!1,h)},kill:function(){t=0,e.drain=Kt,e.started=!1,e._tasks=[]},unshift:function(o,h){n(o,!0,h)},process:function(){for(;!e.paused&&t<e.concurrency&&e._tasks.length;){var o=e._tasks.shift();e._tasks.length===0&&e.empty(),t+=1,t===e.concurrency&&e.saturated(),i(o.data,Lu(a(o)))}},length:function(){return e._tasks.length},running:function(){return t},idle:function(){return e._tasks.length+t===0},pause:function(){e.paused!==!0&&(e.paused=!0)},resume:function(){if(e.paused!==!1){e.paused=!1;for(var o=1;o<=e.concurrency;o++)e.process()}}};function n(s,o,h){if(h!=null&&typeof h!="function")throw new Error("task callback must be a function");if(e.started=!0,s==null&&e.idle()){setTimeout(function(){return e.drain()},1);return}var u={data:s,callback:typeof h=="function"?h:Kt};o?e._tasks.unshift(u):e._tasks.push(u),setTimeout(function(){return e.process()},1)}function a(s){return function(){t-=1,s.callback.apply(s,arguments),arguments[0]!=null&&e.error(arguments[0],s.data),t<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}}return e}var di={};function Du(i,r){var t=this;di[i.url]?(i.data=di[i.url],i.complete()):i.onComplete.once(function(){return di[t.url]=t.data}),r()}function xa(i,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}function lo(i,r,t){return r&&xa(i.prototype,r),t&&xa(i,t),i}var Uu=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),Pr=null,Bu=0,ba=200,ku=204,Xu=1223,Gu=2;function ju(){}var k=function(){i.setExtensionLoadType=function(e,n){Ta(i._loadTypeMap,e,n)},i.setExtensionXhrType=function(e,n){Ta(i._xhrTypeMap,e,n)};function i(t,e,n){if(typeof t!="string"||typeof e!="string")throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(i.STATUS_FLAGS.DATA_URL,e.indexOf("data:")===0),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=i.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=ju,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Lt,this.onProgress=new Lt,this.onComplete=new Lt,this.onAfterMiddleware=new Lt}var r=i.prototype;return r.complete=function(){this._clearEvents(),this._finish()},r.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=i.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},r.load=function(e){var n=this;if(!this.isLoading){if(this.isComplete){e&&setTimeout(function(){return e(n)},1);return}else e&&this.onComplete.once(e);switch(this._setFlag(i.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case i.LOAD_TYPE.IMAGE:this.type=i.TYPE.IMAGE,this._loadElement("image");break;case i.LOAD_TYPE.AUDIO:this.type=i.TYPE.AUDIO,this._loadSourceElement("audio");break;case i.LOAD_TYPE.VIDEO:this.type=i.TYPE.VIDEO,this._loadSourceElement("video");break;case i.LOAD_TYPE.XHR:default:Uu&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},r._hasFlag=function(e){return(this._flags&e)!==0},r._setFlag=function(e,n){this._flags=n?this._flags|e:this._flags&~e},r._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},r._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(i.STATUS_FLAGS.COMPLETE,!0),this._setFlag(i.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},r._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:e==="image"&&typeof window.Image<"u"?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},r._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:e==="audio"&&typeof window.Audio<"u"?this.data=new Audio:this.data=document.createElement(e),this.data===null){this.abort("Unsupported element: "+e);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var n=this.metadata.mimeType,a=0;a<this.url.length;++a)this.data.appendChild(this._createSource(e,this.url[a],Array.isArray(n)?n[a]:n));else{var s=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(s)?s[0]:s))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},r._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===i.XHR_RESPONSE_TYPE.JSON||this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=i.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},r._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},r._createSource=function(e,n,a){a||(a=e+"/"+this._getExtension(n));var s=document.createElement("source");return s.src=n,s.type=a,s},r._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},r._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},r._onTimeout=function(){this.abort("Load timed out.")},r._xhrOnError=function(){var e=this.xhr;this.abort(pi(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},r._xhrOnTimeout=function(){var e=this.xhr;this.abort(pi(e)+" Request timed out.")},r._xhrOnAbort=function(){var e=this.xhr;this.abort(pi(e)+" Request was aborted by the user.")},r._xhrOnLoad=function(){var e=this.xhr,n="",a=typeof e.status>"u"?ba:e.status;(e.responseType===""||e.responseType==="text"||typeof e.responseType>"u")&&(n=e.responseText),a===Bu&&(n.length>0||e.responseType===i.XHR_RESPONSE_TYPE.BUFFER)?a=ba:a===Xu&&(a=ku);var s=a/100|0;if(s===Gu)if(this.xhrType===i.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=i.TYPE.TEXT;else if(this.xhrType===i.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=i.TYPE.JSON}catch(u){this.abort("Error trying to parse loaded json: "+u);return}else if(this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var o=new DOMParser;this.data=o.parseFromString(n,"text/xml")}else{var h=document.createElement("div");h.innerHTML=n,this.data=h}this.type=i.TYPE.XML}catch(u){this.abort("Error trying to parse loaded xml: "+u);return}else this.data=e.response||n;else{this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);return}this.complete()},r._determineCrossOrigin=function(e,n){if(e.indexOf("data:")===0)return"";if(window.origin!==window.location.origin)return"anonymous";n=n||window.location,Pr||(Pr=document.createElement("a")),Pr.href=e,e=uo(Pr.href,{strictMode:!0});var a=!e.port&&n.port===""||e.port===n.port,s=e.protocol?e.protocol+":":"";return e.host!==n.hostname||!a||s!==n.protocol?"anonymous":""},r._determineXhrType=function(){return i._xhrTypeMap[this.extension]||i.XHR_RESPONSE_TYPE.TEXT},r._determineLoadType=function(){return i._loadTypeMap[this.extension]||i.LOAD_TYPE.XHR},r._getExtension=function(){var e=this.url,n="";if(this.isDataUrl){var a=e.indexOf("/");n=e.substring(a+1,e.indexOf(";",a))}else{var s=e.indexOf("?"),o=e.indexOf("#"),h=Math.min(s>-1?s:e.length,o>-1?o:e.length);e=e.substring(0,h),n=e.substring(e.lastIndexOf(".")+1)}return n.toLowerCase()},r._getMimeFromXhrType=function(e){switch(e){case i.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case i.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case i.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case i.XHR_RESPONSE_TYPE.JSON:return"application/json";case i.XHR_RESPONSE_TYPE.DEFAULT:case i.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},lo(i,[{key:"isDataUrl",get:function(){return this._hasFlag(i.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(i.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(i.STATUS_FLAGS.LOADING)}}]),i}();k.STATUS_FLAGS={NONE:0,DATA_URL:1<<0,COMPLETE:1<<1,LOADING:1<<2};k.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6};k.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};k.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};k._loadTypeMap={gif:k.LOAD_TYPE.IMAGE,png:k.LOAD_TYPE.IMAGE,bmp:k.LOAD_TYPE.IMAGE,jpg:k.LOAD_TYPE.IMAGE,jpeg:k.LOAD_TYPE.IMAGE,tif:k.LOAD_TYPE.IMAGE,tiff:k.LOAD_TYPE.IMAGE,webp:k.LOAD_TYPE.IMAGE,tga:k.LOAD_TYPE.IMAGE,svg:k.LOAD_TYPE.IMAGE,"svg+xml":k.LOAD_TYPE.IMAGE,mp3:k.LOAD_TYPE.AUDIO,ogg:k.LOAD_TYPE.AUDIO,wav:k.LOAD_TYPE.AUDIO,mp4:k.LOAD_TYPE.VIDEO,webm:k.LOAD_TYPE.VIDEO};k._xhrTypeMap={xhtml:k.XHR_RESPONSE_TYPE.DOCUMENT,html:k.XHR_RESPONSE_TYPE.DOCUMENT,htm:k.XHR_RESPONSE_TYPE.DOCUMENT,xml:k.XHR_RESPONSE_TYPE.DOCUMENT,tmx:k.XHR_RESPONSE_TYPE.DOCUMENT,svg:k.XHR_RESPONSE_TYPE.DOCUMENT,tsx:k.XHR_RESPONSE_TYPE.DOCUMENT,gif:k.XHR_RESPONSE_TYPE.BLOB,png:k.XHR_RESPONSE_TYPE.BLOB,bmp:k.XHR_RESPONSE_TYPE.BLOB,jpg:k.XHR_RESPONSE_TYPE.BLOB,jpeg:k.XHR_RESPONSE_TYPE.BLOB,tif:k.XHR_RESPONSE_TYPE.BLOB,tiff:k.XHR_RESPONSE_TYPE.BLOB,webp:k.XHR_RESPONSE_TYPE.BLOB,tga:k.XHR_RESPONSE_TYPE.BLOB,json:k.XHR_RESPONSE_TYPE.JSON,text:k.XHR_RESPONSE_TYPE.TEXT,txt:k.XHR_RESPONSE_TYPE.TEXT,ttf:k.XHR_RESPONSE_TYPE.BUFFER,otf:k.XHR_RESPONSE_TYPE.BUFFER};k.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";function Ta(i,r,t){r&&r.indexOf(".")===0&&(r=r.substring(1)),r&&(i[r]=t)}function pi(i){return i.toString().replace("object ","")}var Hu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function zu(i){for(var r="",t=0;t<i.length;){for(var e=[0,0,0],n=[0,0,0,0],a=0;a<e.length;++a)t<i.length?e[a]=i.charCodeAt(t++)&255:e[a]=0;n[0]=e[0]>>2,n[1]=(e[0]&3)<<4|e[1]>>4,n[2]=(e[1]&15)<<2|e[2]>>6,n[3]=e[2]&63;var s=t-(i.length-1);switch(s){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64;break}for(var o=0;o<n.length;++o)r+=Hu.charAt(n[o])}return r}var wa=window.URL||window.webkitURL;function Vu(i,r){if(!i.data){r();return}if(i.xhr&&i.xhrType===k.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof i.data=="string"){var t=i.xhr.getResponseHeader("content-type");if(t&&t.indexOf("image")===0){i.data=new Image,i.data.src="data:"+t+";base64,"+zu(i.xhr.responseText),i.type=k.TYPE.IMAGE,i.data.onload=function(){i.data.onload=null,r()};return}}else if(i.data.type.indexOf("image")===0){var e=wa.createObjectURL(i.data);i.blob=i.data,i.data=new Image,i.data.src=e,i.type=k.TYPE.IMAGE,i.data.onload=function(){wa.revokeObjectURL(e),i.data.onload=null,r()};return}}r()}var Yu={caching:Du,parsing:Vu},vi=100,Wu=/(#[\w-]+)?$/,Bt=function(){function i(t,e){var n=this;t===void 0&&(t=""),e===void 0&&(e=10),this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(o,h){return n._loadResource(o,h)},this._queue=Nu(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new Lt,this.onError=new Lt,this.onLoad=new Lt,this.onStart=new Lt,this.onComplete=new Lt;for(var a=0;a<i._defaultBeforeMiddleware.length;++a)this.pre(i._defaultBeforeMiddleware[a]);for(var s=0;s<i._defaultAfterMiddleware.length;++s)this.use(i._defaultAfterMiddleware[s])}var r=i.prototype;return r.add=function(e,n,a,s){if(Array.isArray(e)){for(var o=0;o<e.length;++o)this.add(e[o]);return this}if(typeof e=="object"&&(s=n||e.callback||e.onComplete,a=e,n=e.url,e=e.name||e.key||e.url),typeof n!="string"&&(s=a,a=n,n=e),typeof n!="string")throw new Error("No url passed to add resource to loader.");if(typeof a=="function"&&(s=a,a=null),this.loading&&(!a||!a.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(n=this._prepareUrl(n),this.resources[e]=new k(e,n,a),typeof s=="function"&&this.resources[e].onAfterMiddleware.once(s),this.loading){for(var h=a.parentResource,u=[],c=0;c<h.children.length;++c)h.children[c].isComplete||u.push(h.children[c]);var f=h.progressChunk*(u.length+1),l=f/(u.length+2);h.children.push(this.resources[e]),h.progressChunk=l;for(var d=0;d<u.length;++d)u[d].progressChunk=l;this.resources[e].progressChunk=l}return this._queue.push(this.resources[e]),this},r.pre=function(e){return this._beforeMiddleware.push(e),this},r.use=function(e){return this._afterMiddleware.push(e),this},r.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var n=this.resources[e];n._onLoadBinding&&n._onLoadBinding.detach(),n.isLoading&&n.abort()}return this.resources={},this},r.load=function(e){if(typeof e=="function"&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var n=this._queue._tasks.length,a=vi/n,s=0;s<this._queue._tasks.length;++s)this._queue._tasks[s].data.progressChunk=a;this._onStart(),this._queue.resume()}return this},r._prepareUrl=function(e){var n=uo(e,{strictMode:!0}),a;if(n.protocol||!n.path||e.indexOf("//")===0?a=e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&e.charAt(0)!=="/"?a=this.baseUrl+"/"+e:a=this.baseUrl+e,this.defaultQueryString){var s=Wu.exec(a)[0];a=a.substr(0,a.length-s.length),a.indexOf("?")!==-1?a+="&"+this.defaultQueryString:a+="?"+this.defaultQueryString,a+=s}return a},r._loadResource=function(e,n){var a=this;e._dequeue=n,_a(this._beforeMiddleware,function(s,o){s.call(a,e,function(){o(e.isComplete?{}:null)})},function(){e.isComplete?a._onLoad(e):(e._onLoadBinding=e.onComplete.once(a._onLoad,a),e.load())},!0)},r._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},r._onComplete=function(){this.progress=vi,this.loading=!1,this.onComplete.dispatch(this,this.resources)},r._onLoad=function(e){var n=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),_a(this._afterMiddleware,function(a,s){a.call(n,e,s)},function(){e.onAfterMiddleware.dispatch(e),n.progress=Math.min(vi,n.progress+e.progressChunk),n.onProgress.dispatch(n,e),e.error?n.onError.dispatch(e.error,n,e):n.onLoad.dispatch(n,e),n._resourcesParsing.splice(n._resourcesParsing.indexOf(e),1),n._queue.idle()&&n._resourcesParsing.length===0&&n._onComplete()},!0)},lo(i,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e}}]),i}();Bt._defaultBeforeMiddleware=[];Bt._defaultAfterMiddleware=[];Bt.pre=function(r){return Bt._defaultBeforeMiddleware.push(r),Bt};Bt.use=function(r){return Bt._defaultAfterMiddleware.push(r),Bt};/*!
 * @pixi/loaders - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var He=k;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ji=function(i,r){return ji=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},ji(i,r)};function $u(i,r){ji(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var fo=function(){function i(){}return i.use=function(r,t){r.data&&r.type===k.TYPE.IMAGE&&(r.texture=G.fromLoader(r.data,r.url,r.name)),t()},i}(),fe=function(i){$u(r,i);function r(t,e){for(var n=i.call(this,t,e)||this,a=0;a<r._plugins.length;++a){var s=r._plugins[a],o=s.pre,h=s.use;o&&n.pre(o),h&&n.use(h)}return n._protected=!1,n}return r.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(r,"shared",{get:function(){var t=r._shared;return t||(t=new r,t._protected=!0,r._shared=t),t},enumerable:!1,configurable:!0}),r.registerPlugin=function(t){return r._plugins.push(t),t.add&&t.add(),r},r._plugins=[],r}(Bt);fe.registerPlugin({use:Yu.parsing});fe.registerPlugin(fo);var co=function(){function i(){}return i.init=function(r){r=Object.assign({sharedLoader:!1},r),this.loader=r.sharedLoader?fe.shared:new fe},i.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},i}();/*!
 * @pixi/particles - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/particles is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Hi=function(i,r){return Hi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Hi(i,r)};function po(i,r){Hi(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var qu=function(i){po(r,i);function r(t,e,n,a){t===void 0&&(t=1500),n===void 0&&(n=16384),a===void 0&&(a=!1);var s=i.call(this)||this,o=16384;return n>o&&(n=o),s._properties=[!1,!0,!1,!1,!1],s._maxSize=t,s._batchSize=n,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=U.NORMAL,s.autoResize=a,s.roundPixels=!0,s.baseTexture=null,s.setProperties(e),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return r.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},r.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,he(t,this.tintRgb)},enumerable:!1,configurable:!0}),r.prototype.render=function(t){var e=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},r.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},r.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},r.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},r}(Et),Pa=function(){function i(r,t,e){this.geometry=new Fe,this.indexBuffer=null,this.size=e,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<r.length;++n){var a=r[n];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||ot.FLOAT,offset:a.offset},t[n]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return i.prototype.initBuffers=function(){var r=this.geometry,t=0;this.indexBuffer=new lt(ns(this.size),!0,!0),r.addIndex(this.indexBuffer),this.dynamicStride=0;for(var e=0;e<this.dynamicProperties.length;++e){var n=this.dynamicProperties[e];n.offset=t,t+=n.size,this.dynamicStride+=n.size}var a=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(a),this.dynamicDataUint32=new Uint32Array(a),this.dynamicBuffer=new lt(this.dynamicData,!1,!1);var s=0;this.staticStride=0;for(var e=0;e<this.staticProperties.length;++e){var n=this.staticProperties[e];n.offset=s,s+=n.size,this.staticStride+=n.size}var o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new lt(this.staticData,!0,!1);for(var e=0;e<this.dynamicProperties.length;++e){var n=this.dynamicProperties[e];r.addAttribute(n.attributeName,this.dynamicBuffer,0,n.type===ot.UNSIGNED_BYTE,n.type,this.dynamicStride*4,n.offset*4)}for(var e=0;e<this.staticProperties.length;++e){var n=this.staticProperties[e];r.addAttribute(n.attributeName,this.staticBuffer,0,n.type===ot.UNSIGNED_BYTE,n.type,this.staticStride*4,n.offset*4)}},i.prototype.uploadDynamic=function(r,t,e){for(var n=0;n<this.dynamicProperties.length;n++){var a=this.dynamicProperties[n];a.uploadFunction(r,t,e,a.type===ot.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++},i.prototype.uploadStatic=function(r,t,e){for(var n=0;n<this.staticProperties.length;n++){var a=this.staticProperties[n];a.uploadFunction(r,t,e,a.type===ot.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++},i.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},i}(),Zu=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,Ku=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,vo=function(i){po(r,i);function r(t){var e=i.call(this,t)||this;return e.shader=null,e.properties=null,e.tempMatrix=new ht,e.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:e.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:e.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:e.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:e.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ot.UNSIGNED_BYTE,uploadFunction:e.uploadTint,offset:0}],e.shader=Wt.from(Ku,Zu,{}),e.state=qt.for2d(),e}return r.prototype.render=function(t){var e=t.children,n=t._maxSize,a=t._batchSize,s=this.renderer,o=e.length;if(o!==0){o>n&&!t.autoResize&&(o=n);var h=t._buffers;h||(h=t._buffers=this.generateBuffers(t));var u=e[0]._texture.baseTexture;this.state.blendMode=_n(t.blendMode,u.alphaMode),s.state.set(this.state);var c=s.gl,f=t.worldTransform.copyTo(this.tempMatrix);f.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=is(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,u.alphaMode),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);for(var l=!1,d=0,p=0;d<o;d+=a,p+=1){var v=o-d;v>a&&(v=a),p>=h.length&&h.push(this._generateOneMoreBuffer(t));var m=h[p];m.uploadDynamic(e,d,v);var y=t._bufferUpdateIDs[p]||0;l=l||m._updateID<y,l&&(m._updateID=t._updateID,m.uploadStatic(e,d,v)),s.geometry.bind(m.geometry),c.drawElements(c.TRIANGLES,v*6,c.UNSIGNED_SHORT,0)}}},r.prototype.generateBuffers=function(t){for(var e=[],n=t._maxSize,a=t._batchSize,s=t._properties,o=0;o<n;o+=a)e.push(new Pa(this.properties,s,a));return e},r.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,n=t._properties;return new Pa(this.properties,n,e)},r.prototype.uploadVertices=function(t,e,n,a,s,o){for(var h=0,u=0,c=0,f=0,l=0;l<n;++l){var d=t[e+l],p=d._texture,v=d.scale.x,m=d.scale.y,y=p.trim,x=p.orig;y?(u=y.x-d.anchor.x*x.width,h=u+y.width,f=y.y-d.anchor.y*x.height,c=f+y.height):(h=x.width*(1-d.anchor.x),u=x.width*-d.anchor.x,c=x.height*(1-d.anchor.y),f=x.height*-d.anchor.y),a[o]=u*v,a[o+1]=f*m,a[o+s]=h*v,a[o+s+1]=f*m,a[o+s*2]=h*v,a[o+s*2+1]=c*m,a[o+s*3]=u*v,a[o+s*3+1]=c*m,o+=s*4}},r.prototype.uploadPosition=function(t,e,n,a,s,o){for(var h=0;h<n;h++){var u=t[e+h].position;a[o]=u.x,a[o+1]=u.y,a[o+s]=u.x,a[o+s+1]=u.y,a[o+s*2]=u.x,a[o+s*2+1]=u.y,a[o+s*3]=u.x,a[o+s*3+1]=u.y,o+=s*4}},r.prototype.uploadRotation=function(t,e,n,a,s,o){for(var h=0;h<n;h++){var u=t[e+h].rotation;a[o]=u,a[o+s]=u,a[o+s*2]=u,a[o+s*3]=u,o+=s*4}},r.prototype.uploadUvs=function(t,e,n,a,s,o){for(var h=0;h<n;++h){var u=t[e+h]._texture._uvs;u?(a[o]=u.x0,a[o+1]=u.y0,a[o+s]=u.x1,a[o+s+1]=u.y1,a[o+s*2]=u.x2,a[o+s*2+1]=u.y2,a[o+s*3]=u.x3,a[o+s*3+1]=u.y3,o+=s*4):(a[o]=0,a[o+1]=0,a[o+s]=0,a[o+s+1]=0,a[o+s*2]=0,a[o+s*2+1]=0,a[o+s*3]=0,a[o+s*3+1]=0,o+=s*4)}},r.prototype.uploadTint=function(t,e,n,a,s,o){for(var h=0;h<n;++h){var u=t[e+h],c=u._texture.baseTexture.alphaMode>0,f=u.alpha,l=f<1&&c?jr(u._tintRGB,f):u._tintRGB+(f*255<<24);a[o]=l,a[o+s]=l,a[o+s*2]=l,a[o+s*3]=l,o+=s*4}},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},r}(ir);/*!
 * @pixi/graphics - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Nt;(function(i){i.MITER="miter",i.BEVEL="bevel",i.ROUND="round"})(Nt||(Nt={}));var Dt;(function(i){i.BUTT="butt",i.ROUND="round",i.SQUARE="square"})(Dt||(Dt={}));var Se={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(i,r){if(r===void 0&&(r=20),!this.adaptive||!i||isNaN(i))return r;var t=Math.ceil(i/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}},Rn=function(){function i(){this.color=16777215,this.alpha=1,this.texture=G.WHITE,this.matrix=null,this.visible=!1,this.reset()}return i.prototype.clone=function(){var r=new i;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r},i.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=G.WHITE,this.matrix=null,this.visible=!1},i.prototype.destroy=function(){this.texture=null,this.matrix=null},i}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var zi=function(i,r){return zi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},zi(i,r)};function Yr(i,r){zi(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Mn={build:function(i){i.points=i.shape.points.slice()},triangulate:function(i,r){var t=i.points,e=i.holes,n=r.points,a=r.indices;if(t.length>=6){for(var s=[],o=0;o<e.length;o++){var h=e[o];s.push(t.length/2),t=t.concat(h.points)}var u=er.exports(t,s,2);if(!u)return;for(var c=n.length/2,o=0;o<u.length;o+=3)a.push(u[o]+c),a.push(u[o+1]+c),a.push(u[o+2]+c);for(var o=0;o<t.length;o++)n.push(t[o])}}},Vi={build:function(i){var r=i.shape,t=i.points,e=r.x,n=r.y,a,s;if(t.length=0,i.type===nt.CIRC)a=r.radius,s=r.radius;else{var o=i.shape;a=o.width,s=o.height}if(!(a===0||s===0)){var h=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(a+s));h/=2.3;for(var u=Math.PI*2/h,c=0;c<h-.5;c++)t.push(e+Math.sin(-u*c)*a,n+Math.cos(-u*c)*s);t.push(t[0],t[1])}},triangulate:function(i,r){var t=i.points,e=r.points,n=r.indices,a=e.length/2,s=a,o=i.shape,h=i.matrix,u=o.x,c=o.y;e.push(i.matrix?h.a*u+h.c*c+h.tx:u,i.matrix?h.b*u+h.d*c+h.ty:c);for(var f=0;f<t.length;f+=2)e.push(t[f],t[f+1]),n.push(a++,s,a)}},mo={build:function(i){var r=i.shape,t=r.x,e=r.y,n=r.width,a=r.height,s=i.points;s.length=0,s.push(t,e,t+n,e,t+n,e+a,t,e+a)},triangulate:function(i,r){var t=i.points,e=r.points,n=e.length/2;e.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),r.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function ve(i,r,t){var e=r-i;return i+e*t}function Ir(i,r,t,e,n,a,s){s===void 0&&(s=[]);for(var o=20,h=s,u=0,c=0,f=0,l=0,d=0,p=0,v=0,m=0;v<=o;++v)m=v/o,u=ve(i,t,m),c=ve(r,e,m),f=ve(t,n,m),l=ve(e,a,m),d=ve(u,f,m),p=ve(c,l,m),h.push(d,p);return h}var go={build:function(i){var r=i.shape,t=i.points,e=r.x,n=r.y,a=r.width,s=r.height,o=Math.max(0,Math.min(r.radius,Math.min(a,s)/2));t.length=0,o?(Ir(e,n+o,e,n,e+o,n,t),Ir(e+a-o,n,e+a,n,e+a,n+o,t),Ir(e+a,n+s-o,e+a,n+s,e+a-o,n+s,t),Ir(e+o,n+s,e,n+s,e,n+s-o,t)):t.push(e,n,e+a,n,e+a,n+s,e,n+s)},triangulate:function(i,r){for(var t=i.points,e=r.points,n=r.indices,a=e.length/2,s=er.exports(t,null,2),o=0,h=s.length;o<h;o+=3)n.push(s[o]+a),n.push(s[o+1]+a),n.push(s[o+2]+a);for(var o=0,h=t.length;o<h;o++)e.push(t[o],t[++o])}};function Ia(i,r,t,e,n,a,s,o){var h=i-t*n,u=r-e*n,c=i+t*a,f=r+e*a,l,d;s?(l=e,d=-t):(l=-e,d=t);var p=h+l,v=u+d,m=c+l,y=f+d;return o.push(p,v),o.push(m,y),2}function me(i,r,t,e,n,a,s,o){var h=t-i,u=e-r,c=Math.atan2(h,u),f=Math.atan2(n-i,a-r);o&&c<f?c+=Math.PI*2:!o&&c>f&&(f+=Math.PI*2);var l=c,d=f-c,p=Math.abs(d),v=Math.sqrt(h*h+u*u),m=(15*p*Math.sqrt(v)/Math.PI>>0)+1,y=d/m;if(l+=y,o){s.push(i,r),s.push(t,e);for(var x=1,g=l;x<m;x++,g+=y)s.push(i,r),s.push(i+Math.sin(g)*v,r+Math.cos(g)*v);s.push(i,r),s.push(n,a)}else{s.push(t,e),s.push(i,r);for(var x=1,g=l;x<m;x++,g+=y)s.push(i+Math.sin(g)*v,r+Math.cos(g)*v),s.push(i,r);s.push(n,a),s.push(i,r)}return m*2}function Ju(i,r){var t=i.shape,e=i.points||t.points.slice(),n=r.closePointEps;if(e.length!==0){var a=i.lineStyle,s=new ct(e[0],e[1]),o=new ct(e[e.length-2],e[e.length-1]),h=t.type!==nt.POLY||t.closeStroke,u=Math.abs(s.x-o.x)<n&&Math.abs(s.y-o.y)<n;if(h){e=e.slice(),u&&(e.pop(),e.pop(),o.set(e[e.length-2],e[e.length-1]));var c=(s.x+o.x)*.5,f=(o.y+s.y)*.5;e.unshift(c,f),e.push(c,f)}var l=r.points,d=e.length/2,p=e.length,v=l.length/2,m=a.width/2,y=m*m,x=a.miterLimit*a.miterLimit,g=e[0],w=e[1],b=e[2],T=e[3],M=0,S=0,_=-(w-T),P=g-b,C=0,N=0,D=Math.sqrt(_*_+P*P);_/=D,P/=D,_*=m,P*=m;var $=a.alignment,R=(1-$)*2,F=$*2;h||(a.cap===Dt.ROUND?p+=me(g-_*(R-F)*.5,w-P*(R-F)*.5,g-_*R,w-P*R,g+_*F,w+P*F,l,!0)+2:a.cap===Dt.SQUARE&&(p+=Ia(g,w,_,P,R,F,!0,l))),l.push(g-_*R,w-P*R),l.push(g+_*F,w+P*F);for(var A=1;A<d-1;++A){g=e[(A-1)*2],w=e[(A-1)*2+1],b=e[A*2],T=e[A*2+1],M=e[(A+1)*2],S=e[(A+1)*2+1],_=-(w-T),P=g-b,D=Math.sqrt(_*_+P*P),_/=D,P/=D,_*=m,P*=m,C=-(T-S),N=b-M,D=Math.sqrt(C*C+N*N),C/=D,N/=D,C*=m,N*=m;var St=b-g,At=w-T,O=b-M,B=S-T,j=At*O-B*St,Y=j<0;if(Math.abs(j)<.1){l.push(b-_*R,T-P*R),l.push(b+_*F,T+P*F);continue}var q=(-_+g)*(-P+T)-(-_+b)*(-P+w),et=(-C+M)*(-N+T)-(-C+b)*(-N+S),Z=(St*et-O*q)/j,Q=(B*q-At*et)/j,st=(Z-b)*(Z-b)+(Q-T)*(Q-T),H=b+(Z-b)*R,rt=T+(Q-T)*R,V=b-(Z-b)*F,X=T-(Q-T)*F,it=Math.min(St*St+At*At,O*O+B*B),pt=Y?R:F,vt=it+pt*pt*y,Ht=st<=vt;Ht?a.join===Nt.BEVEL||st/y>x?(Y?(l.push(H,rt),l.push(b+_*F,T+P*F),l.push(H,rt),l.push(b+C*F,T+N*F)):(l.push(b-_*R,T-P*R),l.push(V,X),l.push(b-C*R,T-N*R),l.push(V,X)),p+=2):a.join===Nt.ROUND?Y?(l.push(H,rt),l.push(b+_*F,T+P*F),p+=me(b,T,b+_*F,T+P*F,b+C*F,T+N*F,l,!0)+4,l.push(H,rt),l.push(b+C*F,T+N*F)):(l.push(b-_*R,T-P*R),l.push(V,X),p+=me(b,T,b-_*R,T-P*R,b-C*R,T-N*R,l,!1)+4,l.push(b-C*R,T-N*R),l.push(V,X)):(l.push(H,rt),l.push(V,X)):(l.push(b-_*R,T-P*R),l.push(b+_*F,T+P*F),a.join===Nt.BEVEL||st/y>x||(a.join===Nt.ROUND?Y?p+=me(b,T,b+_*F,T+P*F,b+C*F,T+N*F,l,!0)+2:p+=me(b,T,b-_*R,T-P*R,b-C*R,T-N*R,l,!1)+2:(Y?(l.push(V,X),l.push(V,X)):(l.push(H,rt),l.push(H,rt)),p+=2)),l.push(b-C*R,T-N*R),l.push(b+C*F,T+N*F),p+=2)}g=e[(d-2)*2],w=e[(d-2)*2+1],b=e[(d-1)*2],T=e[(d-1)*2+1],_=-(w-T),P=g-b,D=Math.sqrt(_*_+P*P),_/=D,P/=D,_*=m,P*=m,l.push(b-_*R,T-P*R),l.push(b+_*F,T+P*F),h||(a.cap===Dt.ROUND?p+=me(b-_*(R-F)*.5,T-P*(R-F)*.5,b-_*R,T-P*R,b+_*F,T+P*F,l,!1)+2:a.cap===Dt.SQUARE&&(p+=Ia(b,T,_,P,R,F,!1,l)));for(var lr=r.indices,fr=Se.epsilon*Se.epsilon,A=v;A<p+v-2;++A)g=l[A*2],w=l[A*2+1],b=l[(A+1)*2],T=l[(A+1)*2+1],M=l[(A+2)*2],S=l[(A+2)*2+1],!(Math.abs(g*(T-S)+b*(S-w)+M*(w-T))<fr)&&lr.push(A,A+1,A+2)}}function Qu(i,r){var t=0,e=i.shape,n=i.points||e.points,a=e.type!==nt.POLY||e.closeStroke;if(n.length!==0){var s=r.points,o=r.indices,h=n.length/2,u=s.length/2,c=u;for(s.push(n[0],n[1]),t=1;t<h;t++)s.push(n[t*2],n[t*2+1]),o.push(c,c+1),c++;a&&o.push(c,u)}}function Yi(i,r){i.lineStyle.native?Qu(i,r):Ju(i,r)}var yo=function(i){Yr(r,i);function r(t,e,n,a,s,o){o===void 0&&(o=0);var h=this;s=s||a/2;for(var u=-1*Math.PI/2+o,c=n*2,f=Ie/c,l=[],d=0;d<c;d++){var p=d%2?s:a,v=d*f+u;l.push(t+p*Math.cos(v),e+p*Math.sin(v))}return h=i.call(this,l)||this,h}return r}(be),Wi=function(){function i(){}return i.curveTo=function(r,t,e,n,a,s){var o=s[s.length-2],h=s[s.length-1],u=h-t,c=o-r,f=n-t,l=e-r,d=Math.abs(u*l-c*f);if(d<1e-8||a===0)return(s[s.length-2]!==r||s[s.length-1]!==t)&&s.push(r,t),null;var p=u*u+c*c,v=f*f+l*l,m=u*f+c*l,y=a*Math.sqrt(p)/d,x=a*Math.sqrt(v)/d,g=y*m/p,w=x*m/v,b=y*l+x*c,T=y*f+x*u,M=c*(x+g),S=u*(x+g),_=l*(y+w),P=f*(y+w),C=Math.atan2(S-T,M-b),N=Math.atan2(P-T,_-b);return{cx:b+r,cy:T+t,radius:a,startAngle:C,endAngle:N,anticlockwise:c*f>l*u}},i.arc=function(r,t,e,n,a,s,o,h,u){for(var c=o-s,f=Se._segmentsCount(Math.abs(c)*a,Math.ceil(Math.abs(c)/Ie)*40),l=c/(f*2),d=l*2,p=Math.cos(l),v=Math.sin(l),m=f-1,y=m%1/m,x=0;x<=m;++x){var g=x+y*x,w=l+s+d*g,b=Math.cos(w),T=-Math.sin(w);u.push((p*b+v*T)*a+e,(p*-T+v*b)*a+n)}},i}(),_o=function(){function i(){}return i.curveLength=function(r,t,e,n,a,s,o,h){for(var u=10,c=0,f=0,l=0,d=0,p=0,v=0,m=0,y=0,x=0,g=0,w=0,b=r,T=t,M=1;M<=u;++M)f=M/u,l=f*f,d=l*f,p=1-f,v=p*p,m=v*p,y=m*r+3*v*f*e+3*p*l*a+d*o,x=m*t+3*v*f*n+3*p*l*s+d*h,g=b-y,w=T-x,b=y,T=x,c+=Math.sqrt(g*g+w*w);return c},i.curveTo=function(r,t,e,n,a,s,o){var h=o[o.length-2],u=o[o.length-1];o.length-=2;var c=Se._segmentsCount(i.curveLength(h,u,r,t,e,n,a,s)),f=0,l=0,d=0,p=0,v=0;o.push(h,u);for(var m=1,y=0;m<=c;++m)y=m/c,f=1-y,l=f*f,d=l*f,p=y*y,v=p*y,o.push(d*h+3*l*y*r+3*f*p*e+v*a,d*u+3*l*y*t+3*f*p*n+v*s)},i}(),xo=function(){function i(){}return i.curveLength=function(r,t,e,n,a,s){var o=r-2*e+a,h=t-2*n+s,u=2*e-2*r,c=2*n-2*t,f=4*(o*o+h*h),l=4*(o*u+h*c),d=u*u+c*c,p=2*Math.sqrt(f+l+d),v=Math.sqrt(f),m=2*f*v,y=2*Math.sqrt(d),x=l/v;return(m*p+v*l*(p-y)+(4*d*f-l*l)*Math.log((2*v+x+p)/(x+y)))/(4*m)},i.curveTo=function(r,t,e,n,a){for(var s=a[a.length-2],o=a[a.length-1],h=Se._segmentsCount(i.curveLength(s,o,r,t,e,n)),u=0,c=0,f=1;f<=h;++f){var l=f/h;u=s+(r-s)*l,c=o+(t-o)*l,a.push(u+(r+(e-r)*l-u)*l,c+(t+(n-t)*l-c)*l)}},i}(),bo=function(){function i(){this.reset()}return i.prototype.begin=function(r,t,e){this.reset(),this.style=r,this.start=t,this.attribStart=e},i.prototype.end=function(r,t){this.attribSize=t-this.attribStart,this.size=r-this.start},i.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},i}(),Jt,Fr=(Jt={},Jt[nt.POLY]=Mn,Jt[nt.CIRC]=Vi,Jt[nt.ELIP]=Vi,Jt[nt.RECT]=mo,Jt[nt.RREC]=go,Jt),$i=[],Ge=[],tl={buildPoly:Mn,buildCircle:Vi,buildRectangle:mo,buildRoundedRectangle:go,FILL_COMMANDS:Fr,BATCH_POOL:$i,DRAW_CALL_POOL:Ge,buildLine:Yi,Star:yo,ArcUtils:Wi,BezierUtils:_o,QuadraticUtils:xo,BatchPart:bo},qi=function(){function i(r,t,e,n){t===void 0&&(t=null),e===void 0&&(e=null),n===void 0&&(n=null),this.shape=r,this.lineStyle=e,this.fillStyle=t,this.matrix=n,this.type=r.type,this.points=[],this.holes=[]}return i.prototype.clone=function(){return new i(this.shape,this.fillStyle,this.lineStyle,this.matrix)},i.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},i}(),ge=new ct,el=new Ke,To=function(i){Yr(r,i);function r(){var t=i.call(this)||this;return t.uvsFloat32=null,t.indicesUint16=null,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.dirty=0,t.batchDirty=-1,t.cacheDirty=-1,t.clearDirty=0,t.drawCalls=[],t.batches=[],t.shapeIndex=0,t._bounds=new Ke,t.boundsDirty=-1,t.boundsPadding=0,t.batchable=!1,t.indicesUint16=null,t.uvsFloat32=null,t.closePointEps=1e-4,t}return Object.defineProperty(r.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),r.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Ge.push(this.drawCalls[t]);this.drawCalls.length=0;for(var t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),$i.push(e)}this.batches.length=0},r.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},r.prototype.drawShape=function(t,e,n,a){e===void 0&&(e=null),n===void 0&&(n=null),a===void 0&&(a=null);var s=new qi(t,e,n,a);return this.graphicsData.push(s),this.dirty++,this},r.prototype.drawHole=function(t,e){if(e===void 0&&(e=null),!this.graphicsData.length)return null;var n=new qi(t,null,null,e),a=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=a.lineStyle,a.holes.push(n),this.dirty++,this},r.prototype.destroy=function(){i.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},r.prototype.containsPoint=function(t){for(var e=this.graphicsData,n=0;n<e.length;++n){var a=e[n];if(!!a.fillStyle.visible&&a.shape&&(a.matrix?a.matrix.applyInverse(t,ge):ge.copyFrom(t),a.shape.contains(ge.x,ge.y))){var s=!1;if(a.holes)for(var o=0;o<a.holes.length;o++){var h=a.holes[o];if(h.shape.contains(ge.x,ge.y)){s=!0;break}}if(!s)return!0}}return!1},r.prototype.updateBatches=function(t){if(!this.graphicsData.length){this.batchable=!0;return}if(!!this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,n=this.graphicsData,a=null,s=null;this.batches.length>0&&(a=this.batches[this.batches.length-1],s=a.style);for(var o=this.shapeIndex;o<n.length;o++){this.shapeIndex++;var h=n[o],u=h.fillStyle,c=h.lineStyle,f=Fr[h.type];f.build(h),h.matrix&&this.transformPoints(h.points,h.matrix);for(var l=0;l<2;l++){var d=l===0?u:c;if(!!d.visible){var p=d.texture.baseTexture,v=this.indices.length,m=this.points.length/2;p.wrapMode=Ut.REPEAT,l===0?this.processFill(h):this.processLine(h);var y=this.points.length/2-m;y!==0&&(a&&!this._compareStyles(s,d)&&(a.end(v,m),a=null),a||(a=$i.pop()||new bo,a.begin(d,v,m),this.batches.push(a),s=d),this.addUvs(this.points,e,d.texture,m,y,d.matrix))}}}var x=this.indices.length,g=this.points.length/2;if(a&&a.end(x,g),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var w=g>65535&&t;this.indicesUint16=w?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},r.prototype._compareStyles=function(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)},r.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var n=this.graphicsData[t],a=n.fillStyle,s=n.lineStyle;if(a&&!a.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0},r.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,n=t.length;e<n;e++)for(var a=t[e],s=0;s<a.size;s++){var o=a.start+s;this.indicesUint16[o]=this.indicesUint16[o]-a.attribStart}},r.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var t=this.batches,e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<r.BATCHABLE_SIZE*2},r.prototype.buildDrawCalls=function(){for(var t=++K._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Ge.push(this.drawCalls[e]);this.drawCalls.length=0;var n=this.colors,a=this.textureIds,s=Ge.pop();s||(s=new Nr,s.texArray=new Dr),s.texArray.count=0,s.start=0,s.size=0,s.type=bt.TRIANGLES;var o=0,h=null,u=0,c=!1,f=bt.TRIANGLES,l=0;this.drawCalls.push(s);for(var e=0;e<this.batches.length;e++){var d=this.batches[e],p=8,v=d.style,m=v.texture.baseTexture;c!==!!v.native&&(c=!!v.native,f=c?bt.LINES:bt.TRIANGLES,h=null,o=p,t++),h!==m&&(h=m,m._batchEnabled!==t&&(o===p&&(t++,o=0,s.size>0&&(s=Ge.pop(),s||(s=new Nr,s.texArray=new Dr),this.drawCalls.push(s)),s.start=l,s.size=0,s.texArray.count=0,s.type=f),m.touched=1,m._batchEnabled=t,m._batchLocation=o,m.wrapMode=10497,s.texArray.elements[s.texArray.count++]=m,o++)),s.size+=d.size,l+=d.size,u=m._batchLocation,this.addColors(n,v.color,v.alpha,d.attribSize,d.attribStart),this.addTextureIds(a,u,d.attribSize,d.attribStart)}K._globalBatch=t,this.packAttributes()},r.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,n=this.colors,a=this.textureIds,s=new ArrayBuffer(t.length*3*4),o=new Float32Array(s),h=new Uint32Array(s),u=0,c=0;c<t.length/2;c++)o[u++]=t[c*2],o[u++]=t[c*2+1],o[u++]=e[c*2],o[u++]=e[c*2+1],h[u++]=n[c],o[u++]=a[c];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)},r.prototype.processFill=function(t){if(t.holes.length)this.processHoles(t.holes),Mn.triangulate(t,this);else{var e=Fr[t.type];e.triangulate(t,this)}},r.prototype.processLine=function(t){Yi(t,this);for(var e=0;e<t.holes.length;e++)Yi(t.holes[e],this)},r.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var n=t[e],a=Fr[n.type];a.build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},r.prototype.calculateBounds=function(){var t=this._bounds,e=el,n=ht.IDENTITY;this._bounds.clear(),e.clear();for(var a=0;a<this.graphicsData.length;a++){var s=this.graphicsData[a],o=s.shape,h=s.type,u=s.lineStyle,c=s.matrix||ht.IDENTITY,f=0;if(u&&u.visible){var l=u.alignment;f=u.width,h===nt.POLY?f=f*(.5+Math.abs(.5-l)):f=f*Math.max(0,l)}if(n!==c&&(e.isEmpty()||(t.addBoundsMatrix(e,n),e.clear()),n=c),h===nt.RECT||h===nt.RREC){var d=o;e.addFramePad(d.x,d.y,d.x+d.width,d.y+d.height,f,f)}else if(h===nt.CIRC){var p=o;e.addFramePad(p.x,p.y,p.x,p.y,p.radius+f,p.radius+f)}else if(h===nt.ELIP){var v=o;e.addFramePad(v.x,v.y,v.x,v.y,v.width+f,v.height+f)}else{var m=o;t.addVerticesMatrix(n,m.points,0,m.points.length,f,f)}}e.isEmpty()||t.addBoundsMatrix(e,n),t.pad(this.boundsPadding,this.boundsPadding)},r.prototype.transformPoints=function(t,e){for(var n=0;n<t.length/2;n++){var a=t[n*2],s=t[n*2+1];t[n*2]=e.a*a+e.c*s+e.tx,t[n*2+1]=e.b*a+e.d*s+e.ty}},r.prototype.addColors=function(t,e,n,a,s){s===void 0&&(s=0);var o=(e>>16)+(e&65280)+((e&255)<<16),h=jr(o,n);t.length=Math.max(t.length,s+a);for(var u=0;u<a;u++)t[s+u]=h},r.prototype.addTextureIds=function(t,e,n,a){a===void 0&&(a=0),t.length=Math.max(t.length,a+n);for(var s=0;s<n;s++)t[a+s]=e},r.prototype.addUvs=function(t,e,n,a,s,o){o===void 0&&(o=null);for(var h=0,u=e.length,c=n.frame;h<s;){var f=t[(a+h)*2],l=t[(a+h)*2+1];if(o){var d=o.a*f+o.c*l+o.tx;l=o.b*f+o.d*l+o.ty,f=d}h++,e.push(f/c.width,l/c.height)}var p=n.baseTexture;(c.width<p.width||c.height<p.height)&&this.adjustUvs(e,n,u,s)},r.prototype.adjustUvs=function(t,e,n,a){for(var s=e.baseTexture,o=1e-6,h=n+a*2,u=e.frame,c=u.width/s.width,f=u.height/s.height,l=u.x/u.width,d=u.y/u.height,p=Math.floor(t[n]+o),v=Math.floor(t[n+1]+o),m=n+2;m<h;m+=2)p=Math.min(p,Math.floor(t[m]+o)),v=Math.min(v,Math.floor(t[m+1]+o));l-=p,d-=v;for(var m=n;m<h;m+=2)t[m]=(t[m]+l)*c,t[m+1]=(t[m+1]+d)*f},r.BATCHABLE_SIZE=100,r}(Fn),wo=function(i){Yr(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=Dt.BUTT,t.join=Nt.MITER,t.miterLimit=10,t}return r.prototype.clone=function(){var t=new r;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},r.prototype.reset=function(){i.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},r}(Rn),rl=new Float32Array(3),mi={},Ln=function(i){Yr(r,i);function r(t){t===void 0&&(t=null);var e=i.call(this)||this;return e._geometry=t||new To,e._geometry.refCount++,e.shader=null,e.state=qt.for2d(),e._fillStyle=new Rn,e._lineStyle=new wo,e._matrix=null,e._holeMode=!1,e.currentPath=null,e.batches=[],e.batchTint=-1,e.batchDirty=-1,e.vertexData=null,e.pluginName="batch",e._transformID=-1,e.tint=16777215,e.blendMode=U.NORMAL,e}return Object.defineProperty(r.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return this.finishPoly(),new r(this._geometry)},Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),r.prototype.lineStyle=function(t){if(t===void 0&&(t=null),typeof t=="number"){var e=arguments;t={width:e[0]||0,color:e[1]||0,alpha:e[2]!==void 0?e[2]:1,alignment:e[3]!==void 0?e[3]:.5,native:!!e[4]}}return this.lineTextureStyle(t)},r.prototype.lineTextureStyle=function(t){if(typeof t=="number"){I("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var e=arguments,n=e[0],a=e[1],s=e[2],o=e[3],h=e[4],u=e[5],c=e[6];t={width:n,texture:a,color:s,alpha:o,matrix:h,alignment:u,native:c},Object.keys(t).forEach(function(l){return t[l]===void 0&&delete t[l]})}t=Object.assign({width:0,texture:G.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Dt.BUTT,join:Nt.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var f=t.width>0&&t.alpha>0;return f?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:f},t)):this._lineStyle.reset(),this},r.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new be,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new be,this.currentPath.closeStroke=!1},r.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},r.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},r.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,a=n[n.length-2],s=n[n.length-1];return(a!==t||s!==e)&&n.push(t,e),this},r.prototype._initCurve=function(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},r.prototype.quadraticCurveTo=function(t,e,n,a){this._initCurve();var s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),xo.curveTo(t,e,n,a,s),this},r.prototype.bezierCurveTo=function(t,e,n,a,s,o){return this._initCurve(),_o.curveTo(t,e,n,a,s,o,this.currentPath.points),this},r.prototype.arcTo=function(t,e,n,a,s){this._initCurve(t,e);var o=this.currentPath.points,h=Wi.curveTo(t,e,n,a,s,o);if(h){var u=h.cx,c=h.cy,f=h.radius,l=h.startAngle,d=h.endAngle,p=h.anticlockwise;this.arc(u,c,f,l,d,p)}return this},r.prototype.arc=function(t,e,n,a,s,o){if(o===void 0&&(o=!1),a===s)return this;!o&&s<=a?s+=Ie:o&&a<=s&&(a+=Ie);var h=s-a;if(h===0)return this;var u=t+Math.cos(a)*n,c=e+Math.sin(a)*n,f=this._geometry.closePointEps,l=this.currentPath?this.currentPath.points:null;if(l){var d=Math.abs(l[l.length-2]-u),p=Math.abs(l[l.length-1]-c);d<f&&p<f||l.push(u,c)}else this.moveTo(u,c),l=this.currentPath.points;return Wi.arc(u,c,t,e,n,a,s,o,l),this},r.prototype.beginFill=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=1),this.beginTextureFill({texture:G.WHITE,color:t,alpha:e})},r.prototype.beginTextureFill=function(t){if(t instanceof G){I("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var e=arguments,n=e[0],a=e[1],s=e[2],o=e[3];t={texture:n,color:a,alpha:s,matrix:o},Object.keys(t).forEach(function(u){return t[u]===void 0&&delete t[u]})}t=Object.assign({texture:G.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var h=t.alpha>0;return h?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:h},t)):this._fillStyle.reset(),this},r.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},r.prototype.drawRect=function(t,e,n,a){return this.drawShape(new W(t,e,n,a))},r.prototype.drawRoundedRect=function(t,e,n,a,s){return this.drawShape(new ds(t,e,n,a,s))},r.prototype.drawCircle=function(t,e,n){return this.drawShape(new fs(t,e,n))},r.prototype.drawEllipse=function(t,e,n,a){return this.drawShape(new cs(t,e,n,a))},r.prototype.drawPolygon=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];var a,s=!0,o=e[0];o.points?(s=o.closeStroke,a=o.points):Array.isArray(e[0])?a=e[0]:a=e;var h=new be(a);return h.closeStroke=s,this.drawShape(h),this},r.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},r.prototype.drawStar=function(t,e,n,a,s,o){return o===void 0&&(o=0),this.drawPolygon(new yo(t,e,n,a,s,o))},r.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},r.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===nt.RECT&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},r.prototype._render=function(t){this.finishPoly();var e=this._geometry,n=t.context.supports.uint32Indices;e.updateBatches(n),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},r.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(var a=0;a<n;a++){var s=t.batches[a],o=s.style.color,h=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),u=new Float32Array(t.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),c=new Uint16Array(t.indicesUint16.buffer,s.start*2,s.size),f={vertexData:h,blendMode:e,indices:c,uvs:u,_batchRGB:he(o),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[a]=f}},r.prototype._renderBatched=function(t){if(!!this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,n=this.batches.length;e<n;e++){var a=this.batches[e];a.worldAlpha=this.worldAlpha*a.alpha,t.plugins[this.pluginName].render(a)}}},r.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),n=this._geometry,a=this.tint,s=this.worldAlpha,o=e.uniforms,h=n.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(a>>16&255)/255*s,o.tint[1]=(a>>8&255)/255*s,o.tint[2]=(a&255)/255*s,o.tint[3]=s,t.shader.bind(e),t.geometry.bind(n,e),t.state.set(this.state);for(var u=0,c=h.length;u<c;u++)this._renderDrawCallDirect(t,n.drawCalls[u])},r.prototype._renderDrawCallDirect=function(t,e){for(var n=e.texArray,a=e.type,s=e.size,o=e.start,h=n.count,u=0;u<h;u++)t.texture.bind(n.elements[u],u);t.geometry.draw(a,s,o)},r.prototype._resolveDirectShader=function(t){var e=this.shader,n=this.pluginName;if(!e){if(!mi[n]){for(var a=t.plugins.batch.MAX_TEXTURES,s=new Int32Array(a),o=0;o<a;o++)s[o]=o;var h={tint:new Float32Array([1,1,1,1]),translationMatrix:new ht,default:Yt.from({uSamplers:s},!0)},u=t.plugins[n]._shader.program;mi[n]=new Wt(u,h)}e=mi[n]}return e},r.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(!!t.graphicsData.length){var e=t.bounds,n=e.minX,a=e.minY,s=e.maxX,o=e.maxY;this._bounds.addFrame(this.transform,n,a,s,o)}},r.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,r._TEMP_POINT),this._geometry.containsPoint(r._TEMP_POINT)},r.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=he(this.tint,rl),e=0;e<this.batches.length;e++){var n=this.batches[e],a=n._batchRGB,s=t[0]*a[0]*255,o=t[1]*a[1]*255,h=t[2]*a[2]*255,u=(s<<16)+(o<<8)+(h|0);n._tintRGB=(u>>16)+(u&65280)+((u&255)<<16)}}},r.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,n=e.a,a=e.b,s=e.c,o=e.d,h=e.tx,u=e.ty,c=this._geometry.points,f=this.vertexData,l=0,d=0;d<c.length;d+=2){var p=c[d],v=c[d+1];f[l++]=n*p+s*v+h,f[l++]=o*v+a*p+u}}},r.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},r.prototype.setMatrix=function(t){return this._matrix=t,this},r.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},r.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},r.prototype.destroy=function(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,i.prototype.destroy.call(this,t)},r._TEMP_POINT=new ct,r}(Et);/*!
 * @pixi/sprite - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Zi=function(i,r){return Zi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Zi(i,r)};function il(i,r){Zi(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var ke=new ct,nl=new Uint16Array([0,1,2,0,2,3]),Re=function(i){il(r,i);function r(t){var e=i.call(this)||this;return e._anchor=new ne(e._onAnchorUpdate,e,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),e._texture=null,e._width=0,e._height=0,e._tint=null,e._tintRGB=null,e.tint=16777215,e.blendMode=U.NORMAL,e._cachedTint=16777215,e.uvs=null,e.texture=t||G.EMPTY,e.vertexData=new Float32Array(8),e.vertexTrimmedData=null,e._transformID=-1,e._textureID=-1,e._transformTrimmedID=-1,e._textureTrimmedID=-1,e.indices=nl,e.pluginName="batch",e.isSprite=!0,e._roundPixels=L.ROUND_PIXELS,e}return r.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=ie(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=ie(this.scale.y)*this._height/this._texture.orig.height)},r.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},r.prototype.calculateVertices=function(){var t=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===t._updateID)){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,n=e.a,a=e.b,s=e.c,o=e.d,h=e.tx,u=e.ty,c=this.vertexData,f=t.trim,l=t.orig,d=this._anchor,p=0,v=0,m=0,y=0;if(f?(v=f.x-d._x*l.width,p=v+f.width,y=f.y-d._y*l.height,m=y+f.height):(v=-d._x*l.width,p=v+l.width,y=-d._y*l.height,m=y+l.height),c[0]=n*v+s*y+h,c[1]=o*y+a*v+u,c[2]=n*p+s*y+h,c[3]=o*y+a*p+u,c[4]=n*p+s*m+h,c[5]=o*m+a*p+u,c[6]=n*v+s*m+h,c[7]=o*m+a*v+u,this._roundPixels)for(var x=L.RESOLUTION,g=0;g<c.length;++g)c[g]=Math.round((c[g]*x|0)/x)}},r.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,n=t.orig,a=this._anchor,s=this.transform.worldTransform,o=s.a,h=s.b,u=s.c,c=s.d,f=s.tx,l=s.ty,d=-a._x*n.width,p=d+n.width,v=-a._y*n.height,m=v+n.height;e[0]=o*d+u*v+f,e[1]=c*v+h*d+l,e[2]=o*p+u*v+f,e[3]=c*v+h*p+l,e[4]=o*p+u*m+f,e[5]=c*m+h*p+l,e[6]=o*d+u*m+f,e[7]=c*m+h*d+l},r.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},r.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},r.prototype.getLocalBounds=function(t){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new W),t=this._localBoundsRect),this._bounds.getRectangle(t)):i.prototype.getLocalBounds.call(this,t)},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,ke);var e=this._texture.orig.width,n=this._texture.orig.height,a=-e*this.anchor.x,s=0;return ke.x>=a&&ke.x<a+e&&(s=-n*this.anchor.y,ke.y>=s&&ke.y<s+n)},r.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var e=typeof t=="boolean"?t:t&&t.texture;if(e){var n=typeof t=="boolean"?t:t&&t.baseTexture;this._texture.destroy(!!n)}this._texture=null},r.from=function(t,e){var n=t instanceof G?t:G.from(t,e);return new r(n)},Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=ie(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=ie(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||G.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),r}(Et);/*!
 * @pixi/text - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ki=function(i,r){return Ki=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Ki(i,r)};function al(i,r){Ki(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Ae;(function(i){i[i.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",i[i.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(Ae||(Ae={}));var gi={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Ae.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},sl=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],ce=function(){function i(r){this.styleID=0,this.reset(),_i(this,r,r)}return i.prototype.clone=function(){var r={};return _i(r,this,gi),new i(r)},i.prototype.reset=function(){_i(this,gi,gi)},Object.defineProperty(i.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"breakWords",{get:function(){return this._breakWords},set:function(r){this._breakWords!==r&&(this._breakWords=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(r){this._dropShadow!==r&&(this._dropShadow=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(r){this._dropShadowAlpha!==r&&(this._dropShadowAlpha=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(r){this._dropShadowAngle!==r&&(this._dropShadowAngle=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(r){this._dropShadowBlur!==r&&(this._dropShadowBlur=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(r){var t=yi(r);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(r){this._dropShadowDistance!==r&&(this._dropShadowDistance=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fill",{get:function(){return this._fill},set:function(r){var t=yi(r);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(r){this._fillGradientType!==r&&(this._fillGradientType=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(r){ol(this._fillGradientStops,r)||(this._fillGradientStops=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(r){this.fontFamily!==r&&(this._fontFamily=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this._fontSize},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(r){this._fontStyle!==r&&(this._fontStyle=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(r){this._fontVariant!==r&&(this._fontVariant=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(r){this._fontWeight!==r&&(this._fontWeight=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(r){this._lineHeight!==r&&(this._lineHeight=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leading",{get:function(){return this._leading},set:function(r){this._leading!==r&&(this._leading=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(r){this._lineJoin!==r&&(this._lineJoin=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(r){this._miterLimit!==r&&(this._miterLimit=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return this._padding},set:function(r){this._padding!==r&&(this._padding=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stroke",{get:function(){return this._stroke},set:function(r){var t=yi(r);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(r){this._strokeThickness!==r&&(this._strokeThickness=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(r){this._textBaseline!==r&&(this._textBaseline=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trim",{get:function(){return this._trim},set:function(r){this._trim!==r&&(this._trim=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(r){this._whiteSpace!==r&&(this._whiteSpace=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(r){this._wordWrap!==r&&(this._wordWrap=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(r){this._wordWrapWidth!==r&&(this._wordWrapWidth=r,this.styleID++)},enumerable:!1,configurable:!0}),i.prototype.toFontString=function(){var r=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var e=t.length-1;e>=0;e--){var n=t[e].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&sl.indexOf(n)<0&&(n='"'+n+'"'),t[e]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+r+" "+t.join(",")},i}();function Ea(i){return typeof i=="number"?mn(i):(typeof i=="string"&&i.indexOf("0x")===0&&(i=i.replace("0x","#")),i)}function yi(i){if(Array.isArray(i)){for(var r=0;r<i.length;++r)i[r]=Ea(i[r]);return i}else return Ea(i)}function ol(i,r){if(!Array.isArray(i)||!Array.isArray(r)||i.length!==r.length)return!1;for(var t=0;t<i.length;++t)if(i[t]!==r[t])return!1;return!0}function _i(i,r,t){for(var e in t)Array.isArray(r[e])?i[e]=r[e].slice():i[e]=r[e]}var wt=function(){function i(r,t,e,n,a,s,o,h,u){this.text=r,this.style=t,this.width=e,this.height=n,this.lines=a,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=h,this.fontProperties=u}return i.measureText=function(r,t,e,n){n===void 0&&(n=i._canvas),e=e==null?t.wordWrap:e;var a=t.toFontString(),s=i.measureFont(a);s.fontSize===0&&(s.fontSize=t.fontSize,s.ascent=t.fontSize);var o=n.getContext("2d");o.font=a;for(var h=e?i.wordWrap(r,t,n):r,u=h.split(/(?:\r\n|\r|\n)/),c=new Array(u.length),f=0,l=0;l<u.length;l++){var d=o.measureText(u[l]).width+(u[l].length-1)*t.letterSpacing;c[l]=d,f=Math.max(f,d)}var p=f+t.strokeThickness;t.dropShadow&&(p+=t.dropShadowDistance);var v=t.lineHeight||s.fontSize+t.strokeThickness,m=Math.max(v,s.fontSize+t.strokeThickness)+(u.length-1)*(v+t.leading);return t.dropShadow&&(m+=t.dropShadowDistance),new i(r,t,p,m,u,c,v+t.leading,f,s)},i.wordWrap=function(r,t,e){e===void 0&&(e=i._canvas);for(var n=e.getContext("2d"),a=0,s="",o="",h=Object.create(null),u=t.letterSpacing,c=t.whiteSpace,f=i.collapseSpaces(c),l=i.collapseNewlines(c),d=!f,p=t.wordWrapWidth+u,v=i.tokenize(r),m=0;m<v.length;m++){var y=v[m];if(i.isNewline(y)){if(!l){o+=i.addLine(s),d=!f,s="",a=0;continue}y=" "}if(f){var x=i.isBreakingSpace(y),g=i.isBreakingSpace(s[s.length-1]);if(x&&g)continue}var w=i.getFromCache(y,u,h,n);if(w>p)if(s!==""&&(o+=i.addLine(s),s="",a=0),i.canBreakWords(y,t.breakWords))for(var b=i.wordWrapSplit(y),T=0;T<b.length;T++){for(var M=b[T],S=1;b[T+S];){var _=b[T+S],P=M[M.length-1];if(!i.canBreakChars(P,_,y,T,t.breakWords))M+=_;else break;S++}T+=M.length-1;var C=i.getFromCache(M,u,h,n);C+a>p&&(o+=i.addLine(s),d=!1,s="",a=0),s+=M,a+=C}else{s.length>0&&(o+=i.addLine(s),s="",a=0);var N=m===v.length-1;o+=i.addLine(y,!N),d=!1,s="",a=0}else w+a>p&&(d=!1,o+=i.addLine(s),s="",a=0),(s.length>0||!i.isBreakingSpace(y)||d)&&(s+=y,a+=w)}return o+=i.addLine(s,!1),o},i.addLine=function(r,t){return t===void 0&&(t=!0),r=i.trimRight(r),r=t?r+`
`:r,r},i.getFromCache=function(r,t,e,n){var a=e[r];if(typeof a!="number"){var s=r.length*t;a=n.measureText(r).width+s,e[r]=a}return a},i.collapseSpaces=function(r){return r==="normal"||r==="pre-line"},i.collapseNewlines=function(r){return r==="normal"},i.trimRight=function(r){if(typeof r!="string")return"";for(var t=r.length-1;t>=0;t--){var e=r[t];if(!i.isBreakingSpace(e))break;r=r.slice(0,-1)}return r},i.isNewline=function(r){return typeof r!="string"?!1:i._newlines.indexOf(r.charCodeAt(0))>=0},i.isBreakingSpace=function(r){return typeof r!="string"?!1:i._breakingSpaces.indexOf(r.charCodeAt(0))>=0},i.tokenize=function(r){var t=[],e="";if(typeof r!="string")return t;for(var n=0;n<r.length;n++){var a=r[n];if(i.isBreakingSpace(a)||i.isNewline(a)){e!==""&&(t.push(e),e=""),t.push(a);continue}e+=a}return e!==""&&t.push(e),t},i.canBreakWords=function(r,t){return t},i.canBreakChars=function(r,t,e,n,a){return!0},i.wordWrapSplit=function(r){return r.split("")},i.measureFont=function(r){if(i._fonts[r])return i._fonts[r];var t={ascent:0,descent:0,fontSize:0},e=i._canvas,n=i._context;n.font=r;var a=i.METRICS_STRING+i.BASELINE_SYMBOL,s=Math.ceil(n.measureText(a).width),o=Math.ceil(n.measureText(i.BASELINE_SYMBOL).width),h=2*o;o=o*i.BASELINE_MULTIPLIER|0,e.width=s,e.height=h,n.fillStyle="#f00",n.fillRect(0,0,s,h),n.font=r,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(a,0,o);var u=n.getImageData(0,0,s,h).data,c=u.length,f=s*4,l=0,d=0,p=!1;for(l=0;l<o;++l){for(var v=0;v<f;v+=4)if(u[d+v]!==255){p=!0;break}if(!p)d+=f;else break}for(t.ascent=o-l,d=c-f,p=!1,l=h;l>o;--l){for(var v=0;v<f;v+=4)if(u[d+v]!==255){p=!0;break}if(!p)d-=f;else break}return t.descent=l-o,t.fontSize=t.ascent+t.descent,i._fonts[r]=t,t},i.clearMetrics=function(r){r===void 0&&(r=""),r?delete i._fonts[r]:i._fonts={}},i}(),Ur=function(){try{var i=new OffscreenCanvas(0,0),r=i.getContext("2d");return r&&r.measureText?i:document.createElement("canvas")}catch{return document.createElement("canvas")}}();Ur.width=Ur.height=10;wt._canvas=Ur;wt._context=Ur.getContext("2d");wt._fonts={};wt.METRICS_STRING="|\xC9q\xC5";wt.BASELINE_SYMBOL="M";wt.BASELINE_MULTIPLIER=1.4;wt._newlines=[10,13];wt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var hl={texture:!0,children:!1,baseTexture:!0},Nn=function(i){al(r,i);function r(t,e,n){var a=this,s=!1;n||(n=document.createElement("canvas"),s=!0),n.width=3,n.height=3;var o=G.from(n);return o.orig=new W,o.trim=new W,a=i.call(this,o)||this,a._ownCanvas=s,a.canvas=n,a.context=a.canvas.getContext("2d"),a._resolution=L.RESOLUTION,a._autoResolution=!0,a._text=null,a._style=null,a._styleListener=null,a._font="",a.text=t,a.style=e,a.localStyleID=-1,a}return r.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!(!this.dirty&&t)){this._font=this._style.toFontString();var n=this.context,a=wt.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=a.width,o=a.height,h=a.lines,u=a.lineHeight,c=a.lineWidths,f=a.maxLineWidth,l=a.fontProperties;this.canvas.width=Math.ceil((Math.max(1,s)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,o)+e.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit;for(var d,p,v=e.dropShadow?2:1,m=0;m<v;++m){var y=e.dropShadow&&m===0,x=y?Math.ceil(Math.max(1,o)+e.padding*2):0,g=x*this._resolution;if(y){n.fillStyle="black",n.strokeStyle="black";var w=e.dropShadowColor,b=he(typeof w=="number"?w:gn(w)),T=e.dropShadowBlur*this._resolution,M=e.dropShadowDistance*this._resolution;n.shadowColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+e.dropShadowAlpha+")",n.shadowBlur=T,n.shadowOffsetX=Math.cos(e.dropShadowAngle)*M,n.shadowOffsetY=Math.sin(e.dropShadowAngle)*M+g}else n.fillStyle=this._generateFillStyle(e,h,a),n.strokeStyle=e.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;for(var S=0;S<h.length;S++)d=e.strokeThickness/2,p=e.strokeThickness/2+S*u+l.ascent,e.align==="right"?d+=f-c[S]:e.align==="center"&&(d+=(f-c[S])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(h[S],d+e.padding,p+e.padding-x,!0),e.fill&&this.drawLetterSpacing(h[S],d+e.padding,p+e.padding-x)}this.updateTexture()}},r.prototype.drawLetterSpacing=function(t,e,n,a){a===void 0&&(a=!1);var s=this._style,o=s.letterSpacing;if(o===0){a?this.context.strokeText(t,e,n):this.context.fillText(t,e,n);return}for(var h=e,u=Array.from?Array.from(t):t.split(""),c=this.context.measureText(t).width,f=0,l=0;l<u.length;++l){var d=u[l];a?this.context.strokeText(d,h,n):this.context.fillText(d,h,n),f=this.context.measureText(t.substring(l+1)).width,h+=c-f+o,c=f}},r.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=ss(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var n=this._texture,a=this._style,s=a.trim?0:a.padding,o=n.baseTexture;n.trim.width=n._frame.width=Math.ceil(t.width/this._resolution),n.trim.height=n._frame.height=Math.ceil(t.height/this._resolution),n.trim.x=-s,n.trim.y=-s,n.orig.width=n._frame.width-s*2,n.orig.height=n._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},r.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),i.prototype._render.call(this,t)},r.prototype.getLocalBounds=function(t){return this.updateText(!0),i.prototype.getLocalBounds.call(this,t)},r.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},r.prototype._generateFillStyle=function(t,e,n){var a=t.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;var s,o=t.dropShadow?t.dropShadowDistance:0,h=t.padding||0,u=Math.ceil(this.canvas.width/this._resolution)-o-h*2,c=Math.ceil(this.canvas.height/this._resolution)-o-h*2,f=a.slice(),l=t.fillGradientStops.slice();if(!l.length)for(var d=f.length+1,p=1;p<d;++p)l.push(p/d);if(f.unshift(a[0]),l.unshift(0),f.push(a[a.length-1]),l.push(1),t.fillGradientType===Ae.LINEAR_VERTICAL){s=this.context.createLinearGradient(u/2,h,u/2,c+h);for(var v=0,m=n.fontProperties.fontSize+t.strokeThickness,y=m/c,p=0;p<e.length;p++)for(var x=n.lineHeight*p,g=0;g<f.length;g++){var w=0;typeof l[g]=="number"?w=l[g]:w=g/f.length;var b=x/c+w*y,T=Math.max(v,b);T=Math.min(T,1),s.addColorStop(T,f[g]),v=T}}else{s=this.context.createLinearGradient(h,c/2,u+h,c/2);for(var M=f.length+1,S=1,p=0;p<f.length;p++){var _=void 0;typeof l[p]=="number"?_=l[p]:_=S/M,s.addColorStop(_,f[p]),S++}}return s},r.prototype.destroy=function(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},hl,t),i.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(r.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=ie(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=ie(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},t instanceof ce?this._style=t:this._style=new ce(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t==null?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),r}(Re);/*!
 * @pixi/prepare - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */L.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ji=function(i,r){return Ji=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Ji(i,r)};function ul(i,r){Ji(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Po=function(){function i(r){this.maxItemsPerFrame=r,this.itemsLeft=0}return i.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},i.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},i}();function ll(i,r){var t=!1;if(i&&i._textures&&i._textures.length){for(var e=0;e<i._textures.length;e++)if(i._textures[e]instanceof G){var n=i._textures[e].baseTexture;r.indexOf(n)===-1&&(r.push(n),t=!0)}}return t}function fl(i,r){if(i.baseTexture instanceof K){var t=i.baseTexture;return r.indexOf(t)===-1&&r.push(t),!0}return!1}function cl(i,r){if(i._texture&&i._texture instanceof G){var t=i._texture.baseTexture;return r.indexOf(t)===-1&&r.push(t),!0}return!1}function dl(i,r){return r instanceof Nn?(r.updateText(!0),!0):!1}function pl(i,r){if(r instanceof ce){var t=r.toFontString();return wt.measureFont(t),!0}return!1}function vl(i,r){if(i instanceof Nn){r.indexOf(i.style)===-1&&r.push(i.style),r.indexOf(i)===-1&&r.push(i);var t=i._texture.baseTexture;return r.indexOf(t)===-1&&r.push(t),!0}return!1}function ml(i,r){return i instanceof ce?(r.indexOf(i)===-1&&r.push(i),!0):!1}var Io=function(){function i(r){var t=this;this.limiter=new Po(L.UPLOADS_PER_FRAME),this.renderer=r,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!t.queue||t.prepareItems()},this.registerFindHook(vl),this.registerFindHook(ml),this.registerFindHook(ll),this.registerFindHook(fl),this.registerFindHook(cl),this.registerUploadHook(dl),this.registerUploadHook(pl)}return i.prototype.upload=function(r,t){typeof r=="function"&&(t=r,r=null),r&&this.add(r),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,ft.system.addOnce(this.tick,this,Rt.UTILITY))):t&&t()},i.prototype.tick=function(){setTimeout(this.delayedTick,0)},i.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var r=this.queue[0],t=!1;if(r&&!r._destroyed){for(var e=0,n=this.uploadHooks.length;e<n;e++)if(this.uploadHooks[e](this.uploadHookHelper,r)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)ft.system.addOnce(this.tick,this,Rt.UTILITY);else{this.ticking=!1;var a=this.completes.slice(0);this.completes.length=0;for(var e=0,n=a.length;e<n;e++)a[e]()}},i.prototype.registerFindHook=function(r){return r&&this.addHooks.push(r),this},i.prototype.registerUploadHook=function(r){return r&&this.uploadHooks.push(r),this},i.prototype.add=function(r){for(var t=0,e=this.addHooks.length;t<e&&!this.addHooks[t](r,this.queue);t++);if(r instanceof Et)for(var t=r.children.length-1;t>=0;t--)this.add(r.children[t]);return this},i.prototype.destroy=function(){this.ticking&&ft.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},i}();function Eo(i,r){return r instanceof K?(r._glTextures[i.CONTEXT_UID]||i.texture.bind(r),!0):!1}function gl(i,r){if(!(r instanceof Ln))return!1;var t=r.geometry;r.finishPoly(),t.updateBatches();for(var e=t.batches,n=0;n<e.length;n++){var a=e[n].style.texture;a&&Eo(i,a.baseTexture)}return t.batchable||i.geometry.bind(t,r._resolveDirectShader(i)),!0}function yl(i,r){return i instanceof Ln?(r.push(i),!0):!1}var So=function(i){ul(r,i);function r(t){var e=i.call(this,t)||this;return e.uploadHookHelper=e.renderer,e.registerFindHook(yl),e.registerUploadHook(Eo),e.registerUploadHook(gl),e}return r}(Io),_l=function(){function i(r){this.maxMilliseconds=r,this.frameStart=0}return i.prototype.beginFrame=function(){this.frameStart=Date.now()},i.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},i}();/*!
 * @pixi/spritesheet - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ao=function(){function i(r,t,e){e===void 0&&(e=null),this._texture=r instanceof G?r:null,this.baseTexture=r instanceof K?r:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var n=this.baseTexture.resource;this.resolution=this._updateResolution(e||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return i.prototype._updateResolution=function(r){r===void 0&&(r=null);var t=this.data.meta.scale,e=Ze(r,null);return e===null&&(e=t!==void 0?parseFloat(t):1),e!==1&&this.baseTexture.setResolution(e),e},i.prototype.parse=function(r){this._batchIndex=0,this._callback=r,this._frameKeys.length<=i.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},i.prototype._processFrames=function(r){for(var t=r,e=i.BATCH_SIZE;t-r<e&&t<this._frameKeys.length;){var n=this._frameKeys[t],a=this._frames[n],s=a.frame;if(s){var o=null,h=null,u=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,c=new W(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);a.rotated?o=new W(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):o=new W(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(h=new W(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[n]=new G(this.baseTexture,o,c,h,a.rotated?2:0,a.anchor),G.addToCache(this.textures[n],n)}t++}},i.prototype._processAnimations=function(){var r=this.data.animations||{};for(var t in r){this.animations[t]=[];for(var e=0;e<r[t].length;e++){var n=r[t][e];this.animations[t].push(this.textures[n])}}},i.prototype._parseComplete=function(){var r=this._callback;this._callback=null,this._batchIndex=0,r.call(this,this.textures)},i.prototype._nextBatch=function(){var r=this;this._processFrames(this._batchIndex*i.BATCH_SIZE),this._batchIndex++,setTimeout(function(){r._batchIndex*i.BATCH_SIZE<r._frameKeys.length?r._nextBatch():(r._processAnimations(),r._parseComplete())},0)},i.prototype.destroy=function(r){var t;r===void 0&&(r=!1);for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,r&&((t=this._texture)===null||t===void 0||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},i.BATCH_SIZE=1e3,i}(),Co=function(){function i(){}return i.use=function(r,t){var e=this,n=r.name+"_image";if(!r.data||r.type!==He.TYPE.JSON||!r.data.frames||e.resources[n]){t();return}var a={crossOrigin:r.crossOrigin,metadata:r.metadata.imageMetadata,parentResource:r},s=i.getResourcePath(r,e.baseUrl);e.add(n,s,a,function(h){if(h.error){t(h.error);return}var u=new Ao(h.texture,r.data,r.url);u.parse(function(){r.spritesheet=u,r.textures=u.textures,t()})})},i.getResourcePath=function(r,t){return r.isDataUrl?r.data.meta.image:de.resolve(r.url.replace(t,""),r.data.meta.image)},i}();/*!
 * @pixi/sprite-tiling - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Qi=function(i,r){return Qi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Qi(i,r)};function Oo(i,r){Qi(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Xe=new ct,xl=function(i){Oo(r,i);function r(t,e,n){e===void 0&&(e=100),n===void 0&&(n=100);var a=i.call(this,t)||this;return a.tileTransform=new bn,a._width=e,a._height=n,a.uvMatrix=a.texture.uvMatrix||new Vr(t),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return Object.defineProperty(r.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),r.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},r.prototype._render=function(t){var e=this._texture;!e||!e.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},r.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),a=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,n,a)},r.prototype.getLocalBounds=function(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new W),t=this._localBoundsRect),this._bounds.getRectangle(t)):i.prototype.getLocalBounds.call(this,t)},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Xe);var e=this._width,n=this._height,a=-e*this.anchor._x;if(Xe.x>=a&&Xe.x<a+e){var s=-n*this.anchor._y;if(Xe.y>=s&&Xe.y<s+n)return!0}return!1},r.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},r.from=function(t,e){return typeof e=="number"&&(I("5.3.0","TilingSprite.from use options instead of width and height args"),e={width:e,height:arguments[2]}),new r(G.from(t,e),e.width,e.height)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),r}(Re),Sa=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,bl=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture2D(uSampler, coord);
    gl_FragColor = texSample * uColor;
}
`,Tl=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,Er=new ht,Fo=function(i){Oo(r,i);function r(t){var e=i.call(this,t)||this,n={globals:e.renderer.globalUniforms};return e.shader=Wt.from(Sa,bl,n),e.simpleShader=Wt.from(Sa,Tl,n),e.quad=new Cn,e.state=qt.for2d(),e}return r.prototype.render=function(t){var e=this.renderer,n=this.quad,a=n.vertices;a[0]=a[6]=t._width*-t.anchor.x,a[1]=a[3]=t._height*-t.anchor.y,a[2]=a[4]=t._width*(1-t.anchor.x),a[5]=a[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&(a=n.uvs,a[0]=a[6]=-t.anchor.x,a[1]=a[3]=-t.anchor.y,a[2]=a[4]=1-t.anchor.x,a[5]=a[7]=1-t.anchor.y),n.invalidate();var s=t._texture,o=s.baseTexture,h=t.tileTransform.localTransform,u=t.uvMatrix,c=o.isPowerOfTwo&&s.frame.width===o.width&&s.frame.height===o.height;c&&(o._glTextures[e.CONTEXT_UID]?c=o.wrapMode!==Ut.CLAMP:o.wrapMode===Ut.CLAMP&&(o.wrapMode=Ut.REPEAT));var f=c?this.simpleShader:this.shader,l=s.width,d=s.height,p=t._width,v=t._height;Er.set(h.a*l/p,h.b*l/v,h.c*d/p,h.d*d/v,h.tx/p,h.ty/v),Er.invert(),c?Er.prepend(u.mapCoord):(f.uniforms.uMapCoord=u.mapCoord.toArray(!0),f.uniforms.uClampFrame=u.uClampFrame,f.uniforms.uClampOffset=u.uClampOffset),f.uniforms.uTransform=Er.toArray(!0),f.uniforms.uColor=xn(t.tint,t.worldAlpha,f.uniforms.uColor,o.alphaMode),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=s,e.shader.bind(f),e.geometry.bind(n),this.state.blendMode=_n(t.blendMode,o.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},r}(ir);/*!
 * @pixi/mesh - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var tn=function(i,r){return tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},tn(i,r)};function Dn(i,r){tn(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Ro=function(){function i(r,t){this.uvBuffer=r,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return i.prototype.update=function(r){if(!(!r&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},i}(),xi=new ct,Aa=new be,Ce=function(i){Dn(r,i);function r(t,e,n,a){a===void 0&&(a=bt.TRIANGLES);var s=i.call(this)||this;return s.geometry=t,t.refCount++,s.shader=e,s.state=n||qt.for2d(),s.drawMode=a,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=0,s._transformID=-1,s._roundPixels=L.ROUND_PIXELS,s.batchUvs=null,s}return Object.defineProperty(r.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this.shader.tint},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),r.prototype._render=function(t){var e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===bt.TRIANGLES&&e.length<r.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)},r.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},r.prototype._renderToBatch=function(t){var e=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)},r.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(!(t.vertexDirtyId===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var n=this.transform.worldTransform,a=n.a,s=n.b,o=n.c,h=n.d,u=n.tx,c=n.ty,f=this.vertexData,l=0;l<f.length/2;l++){var d=e[l*2],p=e[l*2+1];f[l*2]=a*d+o*p+u,f[l*2+1]=s*d+h*p+c}if(this._roundPixels)for(var v=L.RESOLUTION,l=0;l<f.length;++l)f[l]=Math.round((f[l]*v|0)/v);this.vertexDirty=t.vertexDirtyId}},r.prototype.calculateUvs=function(){var t=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Ro(t,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},r.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},r.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,xi);for(var e=this.geometry.getBuffer("aVertexPosition").data,n=Aa.points,a=this.geometry.getIndex().data,s=a.length,o=this.drawMode===4?3:1,h=0;h+2<s;h+=o){var u=a[h]*2,c=a[h+1]*2,f=a[h+2]*2;if(n[0]=e[u],n[1]=e[u+1],n[2]=e[c],n[3]=e[c+1],n[4]=e[f],n[5]=e[f+1],Aa.contains(xi.x,xi.y))return!0}return!1},r.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this.geometry.refCount--,this.geometry.refCount===0&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},r.BATCHABLE_SIZE=100,r}(Et),wl=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,Pl=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,sr=function(i){Dn(r,i);function r(t,e){var n=this,a={uSampler:t,alpha:1,uTextureMatrix:ht.IDENTITY,uColor:new Float32Array([1,1,1,1])};return e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(a,e.uniforms),n=i.call(this,e.program||nr.from(Pl,wl),a)||this,n._colorDirty=!1,n.uvMatrix=new Vr(t),n.batchable=e.program===void 0,n.pluginName=e.pluginName,n.tint=e.tint,n.alpha=e.alpha,n}return Object.defineProperty(r.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),r.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;xn(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},r}(Wt),or=function(i){Dn(r,i);function r(t,e,n){var a=i.call(this)||this,s=new lt(t),o=new lt(e,!0),h=new lt(n,!0,!0);return a.addAttribute("aVertexPosition",s,2,!1,ot.FLOAT).addAttribute("aTextureCoord",o,2,!1,ot.FLOAT).addIndex(h),a._updateId=-1,a}return Object.defineProperty(r.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),r}(Fe);/*!
 * @pixi/text-bitmap - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var en=function(i,r){return en=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},en(i,r)};function Il(i,r){en(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Je=function(){function i(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]}return i}(),El=function(){function i(){}return i.test=function(r){return typeof r=="string"&&r.indexOf("info face=")===0},i.parse=function(r){var t=r.match(/^[a-z]+\s+.+$/gm),e={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var n in t){var a=t[n].match(/^[a-z]+/gm)[0],s=t[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(var h in s){var u=s[h].split("="),c=u[0],f=u[1].replace(/"/gm,""),l=parseFloat(f),d=isNaN(l)?f:l;o[c]=d}e[a].push(o)}var p=new Je;return e.info.forEach(function(v){return p.info.push({face:v.face,size:parseInt(v.size,10)})}),e.common.forEach(function(v){return p.common.push({lineHeight:parseInt(v.lineHeight,10)})}),e.page.forEach(function(v){return p.page.push({id:parseInt(v.id,10),file:v.file})}),e.char.forEach(function(v){return p.char.push({id:parseInt(v.id,10),page:parseInt(v.page,10),x:parseInt(v.x,10),y:parseInt(v.y,10),width:parseInt(v.width,10),height:parseInt(v.height,10),xoffset:parseInt(v.xoffset,10),yoffset:parseInt(v.yoffset,10),xadvance:parseInt(v.xadvance,10)})}),e.kerning.forEach(function(v){return p.kerning.push({first:parseInt(v.first,10),second:parseInt(v.second,10),amount:parseInt(v.amount,10)})}),p},i}(),rn=function(){function i(){}return i.test=function(r){return r instanceof XMLDocument&&r.getElementsByTagName("page").length&&r.getElementsByTagName("info")[0].getAttribute("face")!==null},i.parse=function(r){for(var t=new Je,e=r.getElementsByTagName("info"),n=r.getElementsByTagName("common"),a=r.getElementsByTagName("page"),s=r.getElementsByTagName("char"),o=r.getElementsByTagName("kerning"),h=0;h<e.length;h++)t.info.push({face:e[h].getAttribute("face"),size:parseInt(e[h].getAttribute("size"),10)});for(var h=0;h<n.length;h++)t.common.push({lineHeight:parseInt(n[h].getAttribute("lineHeight"),10)});for(var h=0;h<a.length;h++)t.page.push({id:parseInt(a[h].getAttribute("id"),10)||0,file:a[h].getAttribute("file")});for(var h=0;h<s.length;h++){var u=s[h];t.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(var h=0;h<o.length;h++)t.kerning.push({first:parseInt(o[h].getAttribute("first"),10),second:parseInt(o[h].getAttribute("second"),10),amount:parseInt(o[h].getAttribute("amount"),10)});return t},i}(),Sl=function(){function i(){}return i.test=function(r){if(typeof r=="string"&&r.indexOf("<font>")>-1){var t=new self.DOMParser().parseFromString(r,"text/xml");return rn.test(t)}return!1},i.parse=function(r){var t=new window.DOMParser().parseFromString(r,"text/xml");return rn.parse(t)},i}(),bi=[El,rn,Sl];function Mo(i){for(var r=0;r<bi.length;r++)if(bi[r].test(i))return bi[r];return null}function Al(i,r,t,e,n,a){var s=t.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var o,h=t.dropShadow?t.dropShadowDistance:0,u=t.padding||0,c=Math.ceil(i.width/e)-h-u*2,f=Math.ceil(i.height/e)-h-u*2,l=s.slice(),d=t.fillGradientStops.slice();if(!d.length)for(var p=l.length+1,v=1;v<p;++v)d.push(v/p);if(l.unshift(s[0]),d.unshift(0),l.push(s[s.length-1]),d.push(1),t.fillGradientType===Ae.LINEAR_VERTICAL){o=r.createLinearGradient(c/2,u,c/2,f+u);for(var m=0,y=a.fontProperties.fontSize+t.strokeThickness,x=y/f,v=0;v<n.length;v++)for(var g=a.lineHeight*v,w=0;w<l.length;w++){var b=0;typeof d[w]=="number"?b=d[w]:b=w/l.length;var T=g/f+b*x,M=Math.max(m,T);M=Math.min(M,1),o.addColorStop(M,l[w]),m=M}}else{o=r.createLinearGradient(u,f/2,c+u,f/2);for(var S=l.length+1,_=1,v=0;v<l.length;v++){var P=void 0;typeof d[v]=="number"?P=d[v]:P=_/S,o.addColorStop(P,l[v]),_++}}return o}function Cl(i,r,t,e,n,a,s){var o=t.text,h=t.fontProperties;r.translate(e,n),r.scale(a,a);var u=s.strokeThickness/2,c=-(s.strokeThickness/2);if(r.font=s.toFontString(),r.lineWidth=s.strokeThickness,r.textBaseline=s.textBaseline,r.lineJoin=s.lineJoin,r.miterLimit=s.miterLimit,r.fillStyle=Al(i,r,s,a,[o],t),r.strokeStyle=s.stroke,s.dropShadow){var f=s.dropShadowColor,l=he(typeof f=="number"?f:gn(f)),d=s.dropShadowBlur*a,p=s.dropShadowDistance*a;r.shadowColor="rgba("+l[0]*255+","+l[1]*255+","+l[2]*255+","+s.dropShadowAlpha+")",r.shadowBlur=d,r.shadowOffsetX=Math.cos(s.dropShadowAngle)*p,r.shadowOffsetY=Math.sin(s.dropShadowAngle)*p}else r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;s.stroke&&s.strokeThickness&&r.strokeText(o,u,c+t.lineHeight-h.descent),s.fill&&r.fillText(o,u,c+t.lineHeight-h.descent),r.setTransform(1,0,0,1,0,0),r.fillStyle="rgba(0, 0, 0, 0)"}function Ol(i){typeof i=="string"&&(i=[i]);for(var r=[],t=0,e=i.length;t<e;t++){var n=i[t];if(Array.isArray(n)){if(n.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var a=n[0].charCodeAt(0),s=n[1].charCodeAt(0);if(s<a)throw new Error("[BitmapFont]: Invalid character range.");for(var o=a,h=s;o<=h;o++)r.push(String.fromCharCode(o))}else r.push.apply(r,n.split(""))}if(r.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return r}var zt=function(){function i(r,t,e){var n=r.info[0],a=r.common[0],s=r.page[0],o=Ze(s.file),h={};this._ownsTextures=e,this.font=n.face,this.size=n.size,this.lineHeight=a.lineHeight/o,this.chars={},this.pageTextures=h;for(var u=0;u<r.page.length;u++){var c=r.page[u],f=c.id,l=c.file;h[f]=t instanceof Array?t[u]:t[l]}for(var u=0;u<r.char.length;u++){var d=r.char[u],f=d.id,p=d.page,v=r.char[u],m=v.x,y=v.y,x=v.width,g=v.height,w=v.xoffset,b=v.yoffset,T=v.xadvance;m/=o,y/=o,x/=o,g/=o,w/=o,b/=o,T/=o;var M=new W(m+h[p].frame.x/o,y+h[p].frame.y/o,x,g);this.chars[f]={xOffset:w,yOffset:b,xAdvance:T,kerning:{},texture:new G(h[p].baseTexture,M),page:p}}for(var u=0;u<r.kerning.length;u++){var S=r.kerning[u],_=S.first,P=S.second,C=S.amount;_/=o,P/=o,C/=o,this.chars[P]&&(this.chars[P].kerning[_]=C)}}return i.prototype.destroy=function(){for(var r in this.chars)this.chars[r].texture.destroy(),this.chars[r].texture=null;for(var r in this.pageTextures)this._ownsTextures&&this.pageTextures[r].destroy(!0),this.pageTextures[r]=null;this.chars=null,this.pageTextures=null},i.install=function(r,t,e){var n;if(r instanceof Je)n=r;else{var a=Mo(r);if(!a)throw new Error("Unrecognized data format for font.");n=a.parse(r)}t instanceof G&&(t=[t]);var s=new i(n,t,e);return i.available[s.font]=s,s},i.uninstall=function(r){var t=i.available[r];if(!t)throw new Error("No font found named '"+r+"'");t.destroy(),delete i.available[r]},i.from=function(r,t,e){if(!r)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},i.defaultOptions,e),a=n.chars,s=n.padding,o=n.resolution,h=n.textureWidth,u=n.textureHeight,c=Ol(a),f=t instanceof ce?t:new ce(t),l=h,d=new Je;d.info[0]={face:f.fontFamily,size:f.fontSize},d.common[0]={lineHeight:f.fontSize};for(var p=0,v=0,m,y,x,g=0,w=[],b=0;b<c.length;b++){m||(m=document.createElement("canvas"),m.width=h,m.height=u,y=m.getContext("2d"),x=new K(m,{resolution:o}),w.push(new G(x)),d.page.push({id:w.length-1,file:""}));var T=wt.measureText(c[b],f,!1,m),M=T.width,S=Math.ceil(T.height),_=Math.ceil((f.fontStyle==="italic"?2:1)*M);if(v>=u-S*o){if(v===0)throw new Error("[BitmapFont] textureHeight "+u+"px is "+("too small for "+f.fontSize+"px fonts"));--b,m=null,y=null,x=null,v=0,p=0,g=0;continue}if(g=Math.max(S+T.fontProperties.descent,g),_*o+p>=l){--b,v+=g*o,v=Math.ceil(v),p=0,g=0;continue}Cl(m,y,T,p,v,o,f);var P=T.text.charCodeAt(0);d.char.push({id:P,page:w.length-1,x:p/o,y:v/o,width:_,height:S,xoffset:0,yoffset:0,xadvance:Math.ceil(M-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),p+=(_+2*s)*o,p=Math.ceil(p)}var C=new i(d,w,!0);return i.available[r]!==void 0&&i.uninstall(r),i.available[r]=C,C},i.ALPHA=[["a","z"],["A","Z"]," "],i.NUMERIC=[["0","9"]],i.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],i.ASCII=[[" ","~"]],i.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:i.ALPHANUMERIC},i.available={},i}(),Ca=[],Oa=[],Fl=function(i){Il(r,i);function r(t,e){e===void 0&&(e={});var n=i.call(this)||this;n._tint=16777215,e.font&&(I("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),n._upgradeStyle(e));var a=Object.assign({},r.styleDefaults,e),s=a.align,o=a.tint,h=a.maxWidth,u=a.letterSpacing,c=a.fontName,f=a.fontSize;if(!zt.available[c])throw new Error('Missing BitmapFont "'+c+'"');return n._activePagesMeshData=[],n._textWidth=0,n._textHeight=0,n._align=s,n._tint=o,n._fontName=c,n._fontSize=f||zt.available[c].size,n._text=t,n._maxWidth=h,n._maxLineHeight=0,n._letterSpacing=u,n._anchor=new ne(function(){n.dirty=!0},n,0,0),n._roundPixels=L.ROUND_PIXELS,n.dirty=!0,n._textureCache={},n}return r.prototype.updateText=function(){for(var t,e=zt.available[this._fontName],n=this._fontSize/e.size,a=new ct,s=[],o=[],h=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=h.length,c=this._maxWidth*e.size/this._fontSize,f=null,l=0,d=0,p=0,v=-1,m=0,y=0,x=0,g=0;g<u;g++){var w=h.charCodeAt(g),b=h.charAt(g);if(/(?:\s)/.test(b)&&(v=g,m=l),b==="\r"||b===`
`){o.push(l),d=Math.max(d,l),++p,++y,a.x=0,a.y+=e.lineHeight,f=null;continue}var T=e.chars[w];if(!!T){f&&T.kerning[f]&&(a.x+=T.kerning[f]);var M=Oa.pop()||{texture:G.EMPTY,line:0,charCode:0,position:new ct};M.texture=T.texture,M.line=p,M.charCode=w,M.position.x=a.x+T.xOffset+this._letterSpacing/2,M.position.y=a.y+T.yOffset,s.push(M),a.x+=T.xAdvance+this._letterSpacing,l=a.x,x=Math.max(x,T.yOffset+T.texture.height),f=w,v!==-1&&c>0&&a.x>c&&(++y,ae(s,1+v-y,1+g-v),g=v,v=-1,o.push(m),d=Math.max(d,m),p++,a.x=0,a.y+=e.lineHeight,f=null)}}var S=h.charAt(h.length-1);S!=="\r"&&S!==`
`&&(/(?:\s)/.test(S)&&(l=m),o.push(l),d=Math.max(d,l));for(var _=[],g=0;g<=p;g++){var P=0;this._align==="right"?P=d-o[g]:this._align==="center"&&(P=(d-o[g])/2),_.push(P)}for(var C=s.length,N={},D=[],$=this._activePagesMeshData,g=0;g<$.length;g++)Ca.push($[g]);for(var g=0;g<C;g++){var R=s[g].texture,F=R.baseTexture.uid;if(!N[F]){var A=Ca.pop();if(!A){var St=new or,At=new sr(G.EMPTY),O=new Ce(St,At);A={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:O,vertices:null,uvs:null,indices:null}}A.index=0,A.indexCount=0,A.vertexCount=0,A.uvsCount=0,A.total=0;var B=this._textureCache;B[F]=B[F]||new G(R.baseTexture),A.mesh.texture=B[F],A.mesh.tint=this._tint,D.push(A),N[F]=A}N[F].total++}for(var g=0;g<$.length;g++)D.indexOf($[g])===-1&&this.removeChild($[g].mesh);for(var g=0;g<D.length;g++)D[g].mesh.parent!==this&&this.addChild(D[g].mesh);this._activePagesMeshData=D;for(var g in N){var A=N[g],j=A.total;if(!(((t=A.indices)===null||t===void 0?void 0:t.length)>6*j)||A.vertices.length<Ce.BATCHABLE_SIZE*2)A.vertices=new Float32Array(4*2*j),A.uvs=new Float32Array(4*2*j),A.indices=new Uint16Array(6*j);else for(var Y=A.total,q=A.vertices,et=Y*4*2;et<q.length;et++)q[et]=0;A.mesh.size=6*j}for(var g=0;g<C;g++){var b=s[g],Z=b.position.x+_[b.line];this._roundPixels&&(Z=Math.round(Z));var Q=Z*n,st=b.position.y*n,R=b.texture,H=N[R.baseTexture.uid],rt=R.frame,V=R._uvs,X=H.index++;H.indices[X*6+0]=0+X*4,H.indices[X*6+1]=1+X*4,H.indices[X*6+2]=2+X*4,H.indices[X*6+3]=0+X*4,H.indices[X*6+4]=2+X*4,H.indices[X*6+5]=3+X*4,H.vertices[X*8+0]=Q,H.vertices[X*8+1]=st,H.vertices[X*8+2]=Q+rt.width*n,H.vertices[X*8+3]=st,H.vertices[X*8+4]=Q+rt.width*n,H.vertices[X*8+5]=st+rt.height*n,H.vertices[X*8+6]=Q,H.vertices[X*8+7]=st+rt.height*n,H.uvs[X*8+0]=V.x0,H.uvs[X*8+1]=V.y0,H.uvs[X*8+2]=V.x1,H.uvs[X*8+3]=V.y1,H.uvs[X*8+4]=V.x2,H.uvs[X*8+5]=V.y2,H.uvs[X*8+6]=V.x3,H.uvs[X*8+7]=V.y3}this._textWidth=d*n,this._textHeight=(a.y+e.lineHeight)*n;for(var g in N){var A=N[g];if(this.anchor.x!==0||this.anchor.y!==0)for(var it=0,pt=this._textWidth*this.anchor.x,vt=this._textHeight*this.anchor.y,Ht=0;Ht<A.total;Ht++)A.vertices[it++]-=pt,A.vertices[it++]-=vt,A.vertices[it++]-=pt,A.vertices[it++]-=vt,A.vertices[it++]-=pt,A.vertices[it++]-=vt,A.vertices[it++]-=pt,A.vertices[it++]-=vt;this._maxLineHeight=x*n;var lr=A.mesh.geometry.getBuffer("aVertexPosition"),fr=A.mesh.geometry.getBuffer("aTextureCoord"),Un=A.mesh.geometry.getIndex();lr.data=A.vertices,fr.data=A.uvs,Un.data=A.indices,lr.update(),fr.update(),Un.update()}for(var g=0;g<s.length;g++)Oa.push(s[g])},r.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},r.prototype.getLocalBounds=function(){return this.validate(),i.prototype.getLocalBounds.call(this)},r.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!zt.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchor",{get:function(){return this._anchor},set:function(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t==null?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),r.prototype._upgradeStyle=function(t){if(typeof t.font=="string"){var e=t.font.split(" ");t.fontName=e.length===1?e[0]:e.slice(1).join(" "),e.length>=2&&(t.fontSize=parseInt(e[0],10))}else t.fontName=t.font.name,t.fontSize=typeof t.font.size=="number"?t.font.size:parseInt(t.font.size,10)},r.prototype.destroy=function(t){var e=this._textureCache;for(var n in e){var a=e[n];a.destroy(),delete e[n]}this._textureCache=null,i.prototype.destroy.call(this,t)},r.registerFont=function(t,e){return I("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),zt.install(t,e)},Object.defineProperty(r,"fonts",{get:function(){return I("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),zt.available},enumerable:!1,configurable:!0}),r.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},r}(Et),Lo=function(){function i(){}return i.add=function(){He.setExtensionXhrType("fnt",He.XHR_RESPONSE_TYPE.TEXT)},i.use=function(r,t){var e=Mo(r.data);if(!e){t();return}for(var n=i.getBaseUrl(this,r),a=e.parse(r.data),s={},o=function(v){s[v.metadata.pageFile]=v.texture,Object.keys(s).length===a.page.length&&(r.bitmapFont=zt.install(a,s,!0),t())},h=0;h<a.page.length;++h){var u=a.page[h].file,c=n+u,f=!1;for(var l in this.resources){var d=this.resources[l];if(d.url===c){d.metadata.pageFile=u,d.texture?o(d):d.onAfterMiddleware.add(o),f=!0;break}}if(!f){var p={crossOrigin:r.crossOrigin,loadType:He.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},r.metadata.imageMetadata),parentResource:r};this.add(c,p,o)}}},i.getBaseUrl=function(r,t){var e=t.isDataUrl?"":i.dirname(t.url);return t.isDataUrl&&(e==="."&&(e=""),r.baseUrl&&e&&r.baseUrl.charAt(r.baseUrl.length-1)==="/"&&(e+="/")),e=e.replace(r.baseUrl,""),e&&e.charAt(e.length-1)!=="/"&&(e+="/"),e},i.dirname=function(r){var t=r.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===r?".":t===""?"/":t},i}();/*!
 * @pixi/filter-alpha - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var nn=function(i,r){return nn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},nn(i,r)};function Rl(i,r){nn(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Ml=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,Ll=function(i){Rl(r,i);function r(t){t===void 0&&(t=1);var e=i.call(this,ro,Ml,{uAlpha:1})||this;return e.alpha=t,e}return Object.defineProperty(r.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),r}(Gt);/*!
 * @pixi/filter-blur - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var an=function(i,r){return an=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},an(i,r)};function No(i,r){an(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Nl=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function Dl(i,r){var t=Math.ceil(i/2),e=Nl,n="",a;r?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<i;s++){var o=a.replace("%index%",s.toString());o=o.replace("%sampleIndex%",s-(t-1)+".0"),n+=o,n+=`
`}return e=e.replace("%blur%",n),e=e.replace("%size%",i.toString()),e}var Ul={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Bl=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function kl(i){for(var r=Ul[i],t=r.length,e=Bl,n="",a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",s,o=0;o<i;o++){var h=a.replace("%index%",o.toString());s=o,o>=t&&(s=i-o-1),h=h.replace("%value%",r[s].toString()),n+=h,n+=`
`}return e=e.replace("%blur%",n),e=e.replace("%size%",i.toString()),e}var Fa;(function(i){i[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2"})(Fa||(Fa={}));var Ra;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS"})(Ra||(Ra={}));var Ma;(function(i){i[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL"})(Ma||(Ma={}));var La;(function(i){i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR"})(La||(La={}));var Na;(function(i){i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Na||(Na={}));var Da;(function(i){i[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Da||(Da={}));var Ua;(function(i){i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Ua||(Ua={}));var Ba;(function(i){i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.FLOAT=5126]="FLOAT",i[i.HALF_FLOAT=36193]="HALF_FLOAT"})(Ba||(Ba={}));var ka;(function(i){i[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR"})(ka||(ka={}));var Xa;(function(i){i[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Xa||(Xa={}));var Ga;(function(i){i[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON"})(Ga||(Ga={}));var ja;(function(i){i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(ja||(ja={}));var Qe;(function(i){i[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT"})(Qe||(Qe={}));var Ha;(function(i){i[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL"})(Ha||(Ha={}));var za;(function(i){i.LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp"})(za||(za={}));var Va;(function(i){i[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE"})(Va||(Va={}));var Ya;(function(i){i[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH"})(Ya||(Ya={}));var sn=function(i){No(r,i);function r(t,e,n,a,s){e===void 0&&(e=8),n===void 0&&(n=4),a===void 0&&(a=L.FILTER_RESOLUTION),s===void 0&&(s=5);var o=this,h=Dl(s,t),u=kl(s);return o=i.call(this,h,u)||this,o.horizontal=t,o.resolution=a,o._quality=0,o.quality=n,o.blur=e,o}return r.prototype.apply=function(t,e,n,a){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/e.width):this.uniforms.strength=1/n.height*(n.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,e,n,a);else{var s=t.getFilterTexture(),o=t.renderer,h=e,u=s;this.state.blend=!1,t.applyFilter(this,h,u,Qe.CLEAR);for(var c=1;c<this.passes-1;c++){t.bindAndClear(h,Qe.BLIT),this.uniforms.uSampler=u;var f=u;u=h,h=f,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,u,n,a),t.returnFilterTexture(s)}},Object.defineProperty(r.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+Math.abs(t)*2,this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),r}(Gt),Xl=function(i){No(r,i);function r(t,e,n,a){t===void 0&&(t=8),e===void 0&&(e=4),n===void 0&&(n=L.FILTER_RESOLUTION),a===void 0&&(a=5);var s=i.call(this)||this;return s.blurXFilter=new sn(!0,t,e,n,a),s.blurYFilter=new sn(!1,t,e,n,a),s.resolution=n,s.quality=e,s.blur=t,s.repeatEdgePixels=!1,s}return r.prototype.apply=function(t,e,n,a){var s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){var h=t.getFilterTexture();this.blurXFilter.apply(t,e,h,Qe.CLEAR),this.blurYFilter.apply(t,h,n,a),t.returnFilterTexture(h)}else o?this.blurYFilter.apply(t,e,n,a):this.blurXFilter.apply(t,e,n,a)},r.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(r.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),r}(Gt);/*!
 * @pixi/filter-color-matrix - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var on=function(i,r){return on=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},on(i,r)};function Gl(i,r){on(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var jl=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,hn=function(i){Gl(r,i);function r(){var t=this,e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return t=i.call(this,On,jl,e)||this,t.alpha=1,t}return r.prototype._loadMatrix=function(t,e){e===void 0&&(e=!1);var n=t;e&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n},r.prototype._multiply=function(t,e,n){return t[0]=e[0]*n[0]+e[1]*n[5]+e[2]*n[10]+e[3]*n[15],t[1]=e[0]*n[1]+e[1]*n[6]+e[2]*n[11]+e[3]*n[16],t[2]=e[0]*n[2]+e[1]*n[7]+e[2]*n[12]+e[3]*n[17],t[3]=e[0]*n[3]+e[1]*n[8]+e[2]*n[13]+e[3]*n[18],t[4]=e[0]*n[4]+e[1]*n[9]+e[2]*n[14]+e[3]*n[19]+e[4],t[5]=e[5]*n[0]+e[6]*n[5]+e[7]*n[10]+e[8]*n[15],t[6]=e[5]*n[1]+e[6]*n[6]+e[7]*n[11]+e[8]*n[16],t[7]=e[5]*n[2]+e[6]*n[7]+e[7]*n[12]+e[8]*n[17],t[8]=e[5]*n[3]+e[6]*n[8]+e[7]*n[13]+e[8]*n[18],t[9]=e[5]*n[4]+e[6]*n[9]+e[7]*n[14]+e[8]*n[19]+e[9],t[10]=e[10]*n[0]+e[11]*n[5]+e[12]*n[10]+e[13]*n[15],t[11]=e[10]*n[1]+e[11]*n[6]+e[12]*n[11]+e[13]*n[16],t[12]=e[10]*n[2]+e[11]*n[7]+e[12]*n[12]+e[13]*n[17],t[13]=e[10]*n[3]+e[11]*n[8]+e[12]*n[13]+e[13]*n[18],t[14]=e[10]*n[4]+e[11]*n[9]+e[12]*n[14]+e[13]*n[19]+e[14],t[15]=e[15]*n[0]+e[16]*n[5]+e[17]*n[10]+e[18]*n[15],t[16]=e[15]*n[1]+e[16]*n[6]+e[17]*n[11]+e[18]*n[16],t[17]=e[15]*n[2]+e[16]*n[7]+e[17]*n[12]+e[18]*n[17],t[18]=e[15]*n[3]+e[16]*n[8]+e[17]*n[13]+e[18]*n[18],t[19]=e[15]*n[4]+e[16]*n[9]+e[17]*n[14]+e[18]*n[19]+e[19],t},r.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},r.prototype.brightness=function(t,e){var n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.greyscale=function(t,e){var n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var n=Math.cos(t),a=Math.sin(t),s=Math.sqrt,o=1/3,h=s(o),u=n+(1-n)*o,c=o*(1-n)-h*a,f=o*(1-n)+h*a,l=o*(1-n)+h*a,d=n+o*(1-n),p=o*(1-n)-h*a,v=o*(1-n)-h*a,m=o*(1-n)+h*a,y=n+o*(1-n),x=[u,c,f,0,0,l,d,p,0,0,v,m,y,0,0,0,0,0,1,0];this._loadMatrix(x,e)},r.prototype.contrast=function(t,e){var n=(t||0)+1,a=-.5*(n-1),s=[n,0,0,0,a,0,n,0,0,a,0,0,n,0,a,0,0,0,1,0];this._loadMatrix(s,e)},r.prototype.saturate=function(t,e){t===void 0&&(t=0);var n=t*2/3+1,a=(n-1)*-.5,s=[n,a,a,0,0,a,n,a,0,0,a,a,n,0,0,0,0,0,1,0];this._loadMatrix(s,e)},r.prototype.desaturate=function(){this.saturate(-1)},r.prototype.negative=function(t){var e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.colorTone=function(t,e,n,a,s){t=t||.2,e=e||.15,n=n||16770432,a=a||3375104;var o=(n>>16&255)/255,h=(n>>8&255)/255,u=(n&255)/255,c=(a>>16&255)/255,f=(a>>8&255)/255,l=(a&255)/255,d=[.3,.59,.11,0,0,o,h,u,t,0,c,f,l,e,0,o-c,h-f,u-l,0,0];this._loadMatrix(d,s)},r.prototype.night=function(t,e){t=t||.1;var n=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.predator=function(t,e){var n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},Object.defineProperty(r.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),r}(Gt);hn.prototype.grayscale=hn.prototype.greyscale;/*!
 * @pixi/filter-displacement - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var un=function(i,r){return un=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},un(i,r)};function Hl(i,r){un(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var zl=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,Vl=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,Yl=function(i){Hl(r,i);function r(t,e){var n=this,a=new ht;return t.renderable=!1,n=i.call(this,Vl,zl,{mapSampler:t._texture,filterMatrix:a,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,n.maskSprite=t,n.maskMatrix=a,e==null&&(e=20),n.scale=new ct(e,e),n}return r.prototype.apply=function(t,e,n,a){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),h=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&h!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/h,this.uniforms.rotation[3]=s.d/h),t.applyFilter(this,e,n,a)},Object.defineProperty(r.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),r}(Gt);/*!
 * @pixi/filter-fxaa - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ln=function(i,r){return ln=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},ln(i,r)};function Wl(i,r){ln(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var $l=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputPixel;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,ql=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputPixel;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,Zl=function(i){Wl(r,i);function r(){return i.call(this,$l,ql)||this}return r}(Gt);/*!
 * @pixi/filter-noise - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var fn=function(i,r){return fn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},fn(i,r)};function Kl(i,r){fn(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Jl=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,Ql=function(i){Kl(r,i);function r(t,e){t===void 0&&(t=.5),e===void 0&&(e=Math.random());var n=i.call(this,On,Jl,{uNoise:0,uSeed:0})||this;return n.noise=t,n.seed=e,n}return Object.defineProperty(r.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),r}(Gt);/*!
 * @pixi/mixin-cache-as-bitmap - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Do=new ht;ut.prototype._cacheAsBitmap=!1;ut.prototype._cacheData=null;var tf=function(){function i(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return i}();Object.defineProperties(ut.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(i){if(this._cacheAsBitmap!==i){this._cacheAsBitmap=i;var r;i?(this._cacheData||(this._cacheData=new tf),r=this._cacheData,r.originalRender=this.render,r.originalRenderCanvas=this.renderCanvas,r.originalUpdateTransform=this.updateTransform,r.originalCalculateBounds=this.calculateBounds,r.originalGetLocalBounds=this.getLocalBounds,r.originalDestroy=this.destroy,r.originalContainsPoint=this.containsPoint,r.originalMask=this._mask,r.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(r=this._cacheData,r.sprite&&this._destroyCachedDisplayObject(),this.render=r.originalRender,this.renderCanvas=r.originalRenderCanvas,this.calculateBounds=r.originalCalculateBounds,this.getLocalBounds=r.originalGetLocalBounds,this.destroy=r.originalDestroy,this.updateTransform=r.originalUpdateTransform,this.containsPoint=r.originalContainsPoint,this._mask=r.originalMask,this.filterArea=r.originalFilterArea)}}}});ut.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};ut.prototype._initCachedDisplayObject=function(r){if(!(this._cacheData&&this._cacheData.sprite)){var t=this.alpha;this.alpha=1,r.batch.flush();var e=this.getLocalBounds(null,!0).clone();if(this.filters){var n=this.filters[0].padding;e.pad(n)}e.ceil(L.RESOLUTION);var a=r.renderTexture.current,s=r.renderTexture.sourceFrame.clone(),o=r.renderTexture.destinationFrame.clone(),h=r.projection.transform,u=le.create({width:e.width,height:e.height}),c="cacheAsBitmap_"+ue();this._cacheData.textureCacheId=c,K.addToCache(u.baseTexture,c),G.addToCache(u,c);var f=this.transform.localTransform.copyTo(Do).invert().translate(-e.x,-e.y);this.render=this._cacheData.originalRender,r.render(this,u,!0,f,!1),r.projection.transform=h,r.renderTexture.bind(a,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var l=new Re(u);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-(e.x/e.width),l.anchor.y=-(e.y/e.height),l.alpha=t,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=l.containsPoint.bind(l)}};ut.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};ut.prototype._initCachedDisplayObjectCanvas=function(r){if(!(this._cacheData&&this._cacheData.sprite)){var t=this.getLocalBounds(null,!0),e=this.alpha;this.alpha=1;var n=r.context,a=r._projTransform;t.ceil(L.RESOLUTION);var s=le.create({width:t.width,height:t.height}),o="cacheAsBitmap_"+ue();this._cacheData.textureCacheId=o,K.addToCache(s.baseTexture,o),G.addToCache(s,o);var h=Do;this.transform.localTransform.copyTo(h),h.invert(),h.tx-=t.x,h.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,s,!0,h,!1),r.context=n,r._projTransform=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var u=new Re(s);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(t.x/t.width),u.anchor.y=-(t.y/t.height),u.alpha=e,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}};ut.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};ut.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};ut.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,K.removeFromCache(this._cacheData.textureCacheId),G.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};ut.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};/*!
 * @pixi/mixin-get-child-by-name - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ut.prototype.name=null;Et.prototype.getChildByName=function(r,t){for(var e=0,n=this.children.length;e<n;e++)if(this.children[e].name===r)return this.children[e];if(t)for(var e=0,n=this.children.length;e<n;e++){var a=this.children[e];if(!!a.getChildByName){var s=this.children[e].getChildByName(r,!0);if(s)return s}}return null};/*!
 * @pixi/mixin-get-global-position - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ut.prototype.getGlobalPosition=function(r,t){return r===void 0&&(r=new ct),t===void 0&&(t=!1),this.parent?this.parent.toGlobal(this.position,r,t):(r.x=this.position.x,r.y=this.position.y),r};/*!
 * @pixi/mesh-extras - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var cn=function(i,r){return cn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},cn(i,r)};function Me(i,r){cn(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Uo=function(i){Me(r,i);function r(t,e,n,a){t===void 0&&(t=100),e===void 0&&(e=100),n===void 0&&(n=10),a===void 0&&(a=10);var s=i.call(this)||this;return s.segWidth=n,s.segHeight=a,s.width=t,s.height=e,s.build(),s}return r.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],n=[],a=[],s=this.segWidth-1,o=this.segHeight-1,h=this.width/s,u=this.height/o,c=0;c<t;c++){var f=c%this.segWidth,l=c/this.segWidth|0;e.push(f*h,l*u),n.push(f/s,l/o)}for(var d=s*o,c=0;c<d;c++){var p=c%s,v=c/s|0,m=v*this.segWidth+p,y=v*this.segWidth+p+1,x=(v+1)*this.segWidth+p,g=(v+1)*this.segWidth+p+1;a.push(m,y,x,y,g,x)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(a),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},r}(or),Bo=function(i){Me(r,i);function r(t,e,n){t===void 0&&(t=200),n===void 0&&(n=0);var a=i.call(this,new Float32Array(e.length*4),new Float32Array(e.length*4),new Uint16Array((e.length-1)*6))||this;return a.points=e,a._width=t,a.textureScale=n,a.build(),a}return Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),r.prototype.build=function(){var t=this.points;if(!!t){var e=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),a=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(t.length*4),n.data=new Float32Array(t.length*4),a.data=new Uint16Array((t.length-1)*6));var s=n.data,o=a.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;for(var h=0,u=t[0],c=this._width*this.textureScale,f=t.length,l=0;l<f;l++){var d=l*4;if(this.textureScale>0){var p=u.x-t[l].x,v=u.y-t[l].y,m=Math.sqrt(p*p+v*v);u=t[l],h+=m/c}else h=l/(f-1);s[d]=h,s[d+1]=0,s[d+2]=h,s[d+3]=1}for(var y=0,l=0;l<f-1;l++){var d=l*2;o[y++]=d,o[y++]=d+1,o[y++]=d+2,o[y++]=d+2,o[y++]=d+1,o[y++]=d+3}n.update(),a.update(),this.updateVertices()}}},r.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e=t[0],n,a=0,s=0,o=this.buffers[0].data,h=t.length,u=0;u<h;u++){var c=t[u],f=u*4;u<t.length-1?n=t[u+1]:n=c,s=-(n.x-e.x),a=n.y-e.y;var l=Math.sqrt(a*a+s*s),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;a/=l,s/=l,a*=d,s*=d,o[f]=c.x+a,o[f+1]=c.y+s,o[f+2]=c.x-a,o[f+3]=c.y-s,e=c}this.buffers[0].update()}},r.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},r}(or),ef=function(i){Me(r,i);function r(t,e,n){n===void 0&&(n=0);var a=this,s=new Bo(t.height,e,n),o=new sr(t);return n>0&&(t.baseTexture.wrapMode=Ut.REPEAT),a=i.call(this,s,o)||this,a.autoUpdate=!0,a}return r.prototype._render=function(t){var e=this.geometry;(this.autoUpdate||e._width!==this.shader.texture.height)&&(e._width=this.shader.texture.height,e.update()),i.prototype._render.call(this,t)},r}(Ce),ko=function(i){Me(r,i);function r(t,e,n){var a=this,s=new Uo(t.width,t.height,e,n),o=new sr(G.WHITE);return a=i.call(this,s,o)||this,a.texture=t,a}return r.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry;t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build()},Object.defineProperty(r.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),r.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),i.prototype._render.call(this,t)},r.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),i.prototype.destroy.call(this,t)},r}(Ce),rf=function(i){Me(r,i);function r(t,e,n,a,s){t===void 0&&(t=G.EMPTY);var o=this,h=new or(e,n,a);h.getBuffer("aVertexPosition").static=!1;var u=new sr(t);return o=i.call(this,h,u,null,s)||this,o.autoUpdate=!0,o}return Object.defineProperty(r.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),r.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),i.prototype._render.call(this,t)},r}(Ce),Sr=10,nf=function(i){Me(r,i);function r(t,e,n,a,s){e===void 0&&(e=Sr),n===void 0&&(n=Sr),a===void 0&&(a=Sr),s===void 0&&(s=Sr);var o=i.call(this,G.WHITE,4,4)||this;return o._origWidth=t.orig.width,o._origHeight=t.orig.height,o._width=o._origWidth,o._height=o._origHeight,o._leftWidth=e,o._rightWidth=a,o._topHeight=n,o._bottomHeight=s,o.texture=t,o}return r.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(r.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),r.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},r.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},r.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,n=this._topHeight+this._bottomHeight,a=this._height>n?1:this._height/n,s=Math.min(e,a);return s},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),r.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var n=1/this._origWidth,a=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[9]=e[11]=e[13]=e[15]=a*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-a*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},r}(ko);/*!
 * @pixi/sprite-animated - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var dn=function(i,r){return dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},dn(i,r)};function af(i,r){dn(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var sf=function(i){af(r,i);function r(t,e){e===void 0&&(e=!0);var n=i.call(this,t[0]instanceof G?t[0]:t[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=e,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=t,n}return r.prototype.stop=function(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(ft.shared.remove(this.update,this),this._isConnectedToTicker=!1))},r.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(ft.shared.add(this.update,this,Rt.HIGH),this._isConnectedToTicker=!0))},r.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},r.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},r.prototype.update=function(t){if(!!this._playing){var e=this.animationSpeed*t,n=this.currentFrame;if(this._durations!==null){var a=this._currentTime%1*this._durations[this.currentFrame];for(a+=e/60*1e3;a<0;)this._currentTime--,a+=this._durations[this.currentFrame];var s=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);a>=this._durations[this.currentFrame];)a-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=a/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n?this.onLoop():this.animationSpeed<0&&this.currentFrame>n&&this.onLoop()),this.updateTexture())}},r.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},r.prototype.destroy=function(t){this.stop(),i.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},r.fromFrames=function(t){for(var e=[],n=0;n<t.length;++n)e.push(G.from(t[n]));return new r(e)},r.fromImages=function(t){for(var e=[],n=0;n<t.length;++n)e.push(G.from(t[n]));return new r(e)},Object.defineProperty(r.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof G)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(ft.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(ft.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),r}(Re);/*!
 * pixi.js - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var pn=function(i,r){return pn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},pn(i,r)};function Wa(i,r){pn(i,r);function t(){this.constructor=i}i.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var E="5.0.0";function of(){var i=this;Object.defineProperties(i,{SVG_SIZE:{get:function(){return I(E,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),i.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return I(E,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),i.Transform}},TransformBase:{get:function(){return I(E,"PIXI.TransformBase class has been removed, use PIXI.Transform"),i.Transform}},TRANSFORM_MODE:{get:function(){return I(E,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return I(E,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),i.Renderer}},CanvasRenderTarget:{get:function(){return I(E,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),i.utils.CanvasRenderTarget}},loader:{get:function(){return I(E,"PIXI.loader instance has moved to PIXI.Loader.shared"),i.Loader.shared}},FilterManager:{get:function(){return I(E,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),i.systems.FilterSystem}},CanvasTinter:{get:function(){return I("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),i.canvasUtils}},GroupD8:{get:function(){return I("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),i.groupD8}}}),i.accessibility={},Object.defineProperties(i.accessibility,{AccessibilityManager:{get:function(){return I("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"),i.AccessibilityManager}}}),i.interaction={},Object.defineProperties(i.interaction,{InteractionManager:{get:function(){return I("5.3.0","PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"),i.InteractionManager}},InteractionData:{get:function(){return I("5.3.0","PIXI.interaction.InteractionData moved to PIXI.InteractionData"),i.InteractionData}},InteractionEvent:{get:function(){return I("5.3.0","PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"),i.InteractionEvent}}}),i.prepare={},Object.defineProperties(i.prepare,{BasePrepare:{get:function(){return I("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),i.BasePrepare}},Prepare:{get:function(){return I("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),i.Prepare}},CanvasPrepare:{get:function(){return I("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),i.CanvasPrepare}}}),i.extract={},Object.defineProperties(i.extract,{Extract:{get:function(){return I("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),i.Extract}},CanvasExtract:{get:function(){return I("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),i.CanvasExtract}}}),i.extras={},Object.defineProperties(i.extras,{TilingSprite:{get:function(){return I(E,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),i.TilingSprite}},TilingSpriteRenderer:{get:function(){return I(E,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),i.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return I(E,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),i.AnimatedSprite}},BitmapText:{get:function(){return I(E,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),i.BitmapText}}}),i.TilingSprite.fromFrame=function(l,d,p){return I("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from"),i.TilingSprite.from(l,{width:d,height:p})},i.TilingSprite.fromImage=function(l,d,p,v){return v===void 0&&(v={}),I("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from"),v&&typeof v!="object"&&(v={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),v.width=d,v.height=p,i.TilingSprite.from(l,v)},Object.defineProperties(i.utils,{getSvgSize:{get:function(){return I(E,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),i.resources.SVGResource.getSize}}}),i.mesh={},Object.defineProperties(i.mesh,{Mesh:{get:function(){return I(E,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),i.SimpleMesh}},NineSlicePlane:{get:function(){return I(E,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),i.NineSlicePlane}},Plane:{get:function(){return I(E,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),i.SimplePlane}},Rope:{get:function(){return I(E,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),i.SimpleRope}},RawMesh:{get:function(){return I(E,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),i.Mesh}},CanvasMeshRenderer:{get:function(){return I(E,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),i.CanvasMeshRenderer}},MeshRenderer:{get:function(){return I(E,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),i.MeshRenderer}}}),i.particles={},Object.defineProperties(i.particles,{ParticleContainer:{get:function(){return I(E,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),i.ParticleContainer}},ParticleRenderer:{get:function(){return I(E,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),i.ParticleRenderer}}}),i.ticker={},Object.defineProperties(i.ticker,{Ticker:{get:function(){return I(E,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),i.Ticker}},shared:{get:function(){return I(E,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),i.Ticker.shared}}}),i.loaders={},Object.defineProperties(i.loaders,{Loader:{get:function(){return I(E,"PIXI.loaders.Loader class has moved to PIXI.Loader"),i.Loader}},Resource:{get:function(){return I(E,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),i.LoaderResource}},bitmapFontParser:{get:function(){return I(E,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),i.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){I(E,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function(){return I(E,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),i.SpritesheetLoader.use}},getResourcePath:{get:function(){return I(E,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),i.SpritesheetLoader.getResourcePath}}}),i.Loader.addPixiMiddleware=function(l){return I(E,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),i.loaders.Loader.registerPlugin({use:l()})};var r=function(f){return"on"+f.charAt(0).toUpperCase()+f.slice(1)};Object.assign(i.Loader.prototype,{on:function(f){var l=r(f);I(E,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+l+".add")},once:function(f){var l=r(f);I(E,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+l+".once")},off:function(f){var l=r(f);I(E,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+l+".detach")}}),Object.defineProperty(i.extract,"WebGLExtract",{get:function(){return I(E,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),i.Extract}}),Object.defineProperty(i.prepare,"WebGLPrepare",{get:function(){return I(E,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),i.Prepare}}),i.Container.prototype._renderWebGL=function(l){I(E,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(l)},i.Container.prototype.renderWebGL=function(l){I(E,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(l)},i.DisplayObject.prototype.renderWebGL=function(l){I(E,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(l)},i.Container.prototype.renderAdvancedWebGL=function(l){I(E,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(l)},Object.defineProperties(i.settings,{TRANSFORM_MODE:{get:function(){return I(E,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){I(E,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var t=i.BaseTexture;t.prototype.loadSource=function(l){I(E,"PIXI.BaseTexture.loadSource method has been deprecated");var d=i.resources.autoDetectResource(l);d.internal=!0,this.setResource(d),this.update()};var e=!1;Object.defineProperties(t.prototype,{hasLoaded:{get:function(){return I(E,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){var f;return I(E,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),(f=this.resource)===null||f===void 0?void 0:f.url},set:function(f){I(E,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=f)}},source:{get:function(){return I(E,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource.source},set:function(f){I(E,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=f)}},premultiplyAlpha:{get:function(){return I("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode!==0},set:function(f){I("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(f)}},_id:{get:function(){return e||(I("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),e=!0),this._batchLocation},set:function(f){this._batchLocation=f}}}),t.fromImage=function(l,d,p,v){I(E,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var m={scale:v,crossorigin:d};return t.from(l,{scaleMode:p,resourceOptions:m})},t.fromCanvas=function(l,d){return I(E,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),t.from(l,{scaleMode:d})},t.fromSVG=function(l,d,p,v){I(E,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var m={scale:v,crossorigin:d};return t.from(l,{scaleMode:p,resourceOptions:m})},Object.defineProperties(i.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return I("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode!==0},set:function(f){I("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(f)}}}),i.Point.prototype.copy=function(l){return I(E,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(l)},i.ObservablePoint.prototype.copy=function(l){return I(E,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(l)},i.Rectangle.prototype.copy=function(l){return I(E,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(l)},i.Matrix.prototype.copy=function(l){return I(E,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(l)},i.systems.StateSystem.prototype.setState=function(l){return I("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(l)},Object.assign(i.systems.FilterSystem.prototype,{getRenderTarget:function(f,l){return I(E,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(null,l)},returnRenderTarget:function(f){I(E,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(f)},calculateScreenSpaceMatrix:function(f){I(E,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var l=f.identity(),d=this.activeState,p=d.sourceFrame,v=d.destinationFrame;return l.translate(p.x/v.width,p.y/v.height),l.scale(v.width,v.height),l},calculateNormalizedScreenSpaceMatrix:function(f){I(E,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var l=this.activeState,d=l.sourceFrame,p=l.destinationFrame,v=f.identity();v.translate(d.x/p.width,d.y/p.height);var m=p.width/d.width,y=p.height/d.height;return v.scale(m,y),v}}),Object.defineProperties(i.RenderTexture.prototype,{sourceFrame:{get:function(){return I(E,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return I(E,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var n=function(f){Wa(l,f);function l(d,p,v,m){var y=this;return I(E,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),y=f.call(this,!0,d,p,v,m)||this,y}return l}(i.filters.BlurFilterPass),a=function(f){Wa(l,f);function l(d,p,v,m){var y=this;return I(E,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),y=f.call(this,!1,d,p,v,m)||this,y}return l}(i.filters.BlurFilterPass);Object.assign(i.filters,{BlurXFilter:n,BlurYFilter:a});var s=i.Sprite,o=i.Texture,h=i.Graphics;h.prototype.generateCanvasTexture||(h.prototype.generateCanvasTexture=function(){I(E,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(h.prototype,"graphicsData",{get:function(){return I(E,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}});function u(f,l,d,p){return I(E,"PIXI.Sprite."+f+" method is deprecated, use PIXI.Sprite.from"),s.from(l,{resourceOptions:{scale:p,crossorigin:d}})}s.fromImage=u.bind(null,"fromImage"),s.fromSVG=u.bind(null,"fromSVG"),s.fromCanvas=u.bind(null,"fromCanvas"),s.fromVideo=u.bind(null,"fromVideo"),s.fromFrame=u.bind(null,"fromFrame");function c(f,l,d,p){return I(E,"PIXI.Texture."+f+" method is deprecated, use PIXI.Texture.from"),o.from(l,{resourceOptions:{scale:p,crossorigin:d}})}o.fromImage=c.bind(null,"fromImage"),o.fromSVG=c.bind(null,"fromSVG"),o.fromCanvas=c.bind(null,"fromCanvas"),o.fromVideo=c.bind(null,"fromVideo"),o.fromFrame=c.bind(null,"fromFrame"),Object.defineProperty(i.AbstractRenderer.prototype,"autoResize",{get:function(){return I(E,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(f){I(E,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=f}}),Object.defineProperty(i.Renderer.prototype,"textureManager",{get:function(){return I(E,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),i.utils.mixins={mixin:function(){I(E,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){I(E,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){I(E,"PIXI.utils.mixins.performMixins function is no longer available")}},Object.defineProperty(i.BitmapText.prototype,"font",{get:function(){return I("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function(f){if(I("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),!!f){var l={font:f};this._upgradeStyle(l),l.fontSize=l.fontSize||i.BitmapFont.available[l.fontName].size,this._fontName=l.fontName,this._fontSize=l.fontSize,this.dirty=!0}}})}jt.registerPlugin("accessibility",ms);jt.registerPlugin("extract",ho);jt.registerPlugin("interaction",xs);jt.registerPlugin("particle",vo);jt.registerPlugin("prepare",So);jt.registerPlugin("batch",oo);jt.registerPlugin("tilingSprite",Fo);fe.registerPlugin(Lo);fe.registerPlugin(Co);ar.registerPlugin(gs);ar.registerPlugin(co);var hf="5.3.12",uf={AlphaFilter:Ll,BlurFilter:Xl,BlurFilterPass:sn,ColorMatrixFilter:hn,DisplacementFilter:Yl,FXAAFilter:Zl,NoiseFilter:Ql};const lf=Object.freeze(Object.defineProperty({__proto__:null,utils:kh,VERSION:hf,filters:uf,useDeprecated:of,AccessibilityManager:ms,accessibleTarget:vs,InteractionData:Bi,InteractionEvent:ys,InteractionManager:xs,InteractionTrackingData:Ar,interactiveTarget:_s,Application:ar,AbstractBatchRenderer:no,AbstractRenderer:to,Attribute:Gi,BaseRenderTexture:je,BaseTexture:K,BatchDrawCall:Nr,BatchGeometry:Fn,BatchPluginFactory:so,BatchRenderer:oo,BatchShaderGenerator:ao,BatchTextureArray:Dr,Buffer:lt,Filter:Gt,FilterState:Cs,Framebuffer:Lr,GLFramebuffer:Ms,GLProgram:qs,GLTexture:Or,Geometry:Fe,IGLUniformData:Pu,MaskData:Ds,ObjectRenderer:ir,Program:nr,Quad:As,QuadUv:Cn,RenderTexture:le,RenderTexturePool:Es,Renderer:jt,Shader:Wt,SpriteMaskFilter:js,State:qt,System:yt,Texture:G,TextureMatrix:Vr,TextureUvs:An,UniformGroup:Yt,ViewableBuffer:io,autoDetectRenderer:eo,checkMaxIfStatementsInShader:Gs,defaultFilterVertex:On,defaultVertex:ro,resources:Kh,systems:Ru,uniformParsers:Cr,Extract:ho,AppLoaderPlugin:co,Loader:fe,LoaderResource:He,TextureLoader:fo,ParticleContainer:qu,ParticleRenderer:vo,BasePrepare:Io,CountLimiter:Po,Prepare:So,TimeLimiter:_l,Spritesheet:Ao,SpritesheetLoader:Co,TilingSprite:xl,TilingSpriteRenderer:Fo,BitmapFont:zt,BitmapFontData:Je,BitmapFontLoader:Lo,BitmapText:Fl,Ticker:ft,TickerPlugin:gs,get UPDATE_PRIORITY(){return Rt},get ALPHA_MODES(){return kt},get BLEND_MODES(){return U},get BUFFER_BITS(){return $e},get CLEAR_MODES(){return Pt},get DRAW_MODES(){return bt},get ENV(){return Ft},get FORMATS(){return we},get GC_MODES(){return Rr},get MASK_TYPES(){return mt},get MIPMAP_MODES(){return Pe},get MSAA_QUALITY(){return oe},get PRECISION(){return It},get RENDERER_TYPE(){return Te},get SCALE_MODES(){return Ot},get TARGETS(){return Vt},get TYPES(){return ot},get WRAP_MODES(){return Ut},Bounds:Ke,Container:Et,DisplayObject:ut,TemporaryDisplayObject:wn,FillStyle:Rn,GRAPHICS_CURVES:Se,Graphics:Ln,GraphicsData:qi,GraphicsGeometry:To,get LINE_CAP(){return Dt},get LINE_JOIN(){return Nt},LineStyle:wo,graphicsUtils:tl,Circle:fs,DEG_TO_RAD:ls,Ellipse:cs,Matrix:ht,ObservablePoint:ne,PI_2:Ie,Point:ct,Polygon:be,RAD_TO_DEG:us,Rectangle:W,RoundedRectangle:ds,get SHAPES(){return nt},Transform:bn,groupD8:J,Mesh:Ce,MeshBatchUvs:Ro,MeshGeometry:or,MeshMaterial:sr,NineSlicePlane:nf,PlaneGeometry:Uo,RopeGeometry:Bo,SimpleMesh:rf,SimplePlane:ko,SimpleRope:ef,Runner:dt,Sprite:Re,AnimatedSprite:sf,get TEXT_GRADIENT(){return Ae},Text:Nn,TextMetrics:wt,TextStyle:ce,isMobile:xt,settings:L},Symbol.toStringTag,{value:"Module"})),hr=Xo(lf);var ff=at&&at.__extends||function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},i(r,t)};return function(r,t){i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();Object.defineProperty($t,"__esModule",{value:!0});$t.DisplayObject=void 0;var cf=hr,ye=hr,df=function(i){ff(r,i);function r(t,e){var n=i.call(this)||this;return e=typeof e>"u"?!0:e,n.id=r.ID++,n.stage=t,n.graphics=void 0,n.velocity=new ye.Point(0,0),n.acceleration=new ye.Point(0,0),n.friction=new ye.Point(0,0),n.forces={},n.mass=1,e&&(n.graphics=new cf.Graphics,n.addChild(n.graphics)),n}return r.prototype.setForce=function(t,e){this.forces[t]={x:e.x,y:e.y}},r.prototype.clearForce=function(t){delete this.forces[t]},r.prototype.clearForces=function(){this.forces={}},r.prototype.setFriction=function(t){typeof t=="number"?this.friction=new ye.Point(t,t):this.friction.set(t.x,t.y)},r.prototype.update=function(t){this.setForce("friction",new ye.Point(-this.friction.x*this.velocity.x,-this.friction.y*this.velocity.y)),this.acceleration.set(0,0);for(var e in this.forces)this.acceleration.x+=this.forces[e].x,this.acceleration.y+=this.forces[e].y;this.acceleration.x/=this.mass,this.acceleration.y/=this.mass,this.velocity.x+=t*this.acceleration.x,this.velocity.y+=t*this.acceleration.y,this.position.x+=t*this.velocity.x,this.position.y+=t*this.velocity.y},r.ID=1,r}(ye.Container);$t.DisplayObject=df;var pf=at&&at.__extends||function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},i(r,t)};return function(r,t){i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();Object.defineProperty(tr,"__esModule",{value:!0});tr.DisplayObjectContainer=void 0;var vf=$t,mf=function(i){pf(r,i);function r(t){return i.call(this,t,!1)||this}return r.prototype.update=function(t){i.prototype.update.call(this,t);for(var e=0,n=this.children.length;e<n;++e){var a=this.children[e];a.update&&a.update(t)}},r}(vf.DisplayObject);tr.DisplayObjectContainer=mf;var Wr={},$r={},gf=at&&at.__extends||function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},i(r,t)};return function(r,t){i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();Object.defineProperty($r,"__esModule",{value:!0});$r.Node=void 0;var yf=$t,_f=function(i){gf(r,i);function r(t){var e=i.call(this,t)||this;return e.radius=2+Math.random()*4,e.color=16777215*(Math.random()*.5+.5),e.setFriction(1),e}return r.prototype.update=function(t){i.prototype.update.call(this,t);var e=Math.max(.1,this.stage.viz.waveform.averageGain*8);this.position.x+=t*this.velocity.x*(e-1),this.position.y+=t*this.velocity.y*(e-1),this.x<0?this.x=this.stage.getWidth():this.x>this.stage.getWidth()&&(this.x=0),this.y<0?this.y=this.stage.getHeight():this.y>this.stage.getHeight()&&(this.y=0),this.redraw()},r.prototype.redraw=function(){if(!(typeof this.graphics>"u")){var t=.5+Math.min(8,64*this.stage.viz.waveform.averageGain)/16,e=t*255|0,n=parseInt("0x"+(e<<16|e<<8|e).toString(16),16);this.graphics.clear();var a=(this.radius+this.stage.viz.waveform.averageGainFirstOrder*4)*6*(1-Math.exp(-3*this.stage.viz.waveform.averageGain));this.graphics.lineStyle(4,this.stage.viz.waveform.averageGain>.15?this.color:n,.3),this.graphics.drawCircle(0,0,a),this.graphics.lineStyle(0),this.graphics.beginFill(this.stage.viz.waveform.averageGain>.15?this.color:n),this.graphics.drawCircle(0,0,this.radius+this.stage.viz.waveform.averageGainFirstOrder*4),this.graphics.endFill()}},r}(yf.DisplayObject);$r.Node=_f;var qr={},ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.Point=void 0;var xf=function(){function i(){}return i.distance=function(r,t){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},i}();ur.Point=xf;var bf=at&&at.__extends||function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},i(r,t)};return function(r,t){i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();Object.defineProperty(qr,"__esModule",{value:!0});qr.NodeLinker=void 0;var Tf=$t,Ti=ur,wi=hr,wf=function(i){bf(r,i);function r(t,e){var n=i.call(this,t)||this;return n.nodeParent=e,n.centerPosition=new wi.Point(0,0),n}return r.prototype.update=function(t){i.prototype.update.call(this,t);var e=this.nodeParent.children.length,n=this.parent;this.centerPosition.x=n.circle.position.x,this.centerPosition.y=n.circle.position.y;for(var a=0;a<e;a++){var s=this.nodeParent.children[a],o=Math.atan2(s.position.y-this.centerPosition.y,s.position.x-this.centerPosition.x),h=Ti.Point.distance(s.position,this.centerPosition),u=-Math.cos(o)*1e5/h,c=-Math.sin(o)*1e5/h;s.setForce("tocenter",{x:u,y:c});for(var f=a+1;f<e;f++){var l=this.nodeParent.children[f],d=Ti.Point.distance(s.position,l.position);if(d>300){s.clearForce("node_"+l.id),l.clearForce("node_"+s.id);continue}var p=Math.atan2(s.position.y-l.position.y,s.position.x-l.position.x),v=0,m=0;d!=0&&(v=Math.cos(p)*1e4/d,m=Math.sin(p)*1e4/d),s.setForce("node_"+l.id,new wi.Point(-v,-m)),l.setForce("node_"+s.id,new wi.Point(v,m))}}this.redraw()},r.prototype.redraw=function(){if(!(typeof this.graphics>"u")){this.graphics.clear(),this.graphics.lineStyle(1,16777215,.2);for(var t=this.nodeParent.children.length,e=0;e<t;++e){var n=this.nodeParent.children[e],a=Ti.Point.distance(n.position,this.centerPosition);a>this.parent.circle.radius*2||(this.graphics.moveTo(n.position.x,n.position.y),this.graphics.lineTo(this.centerPosition.x,this.centerPosition.y))}}},r}(Tf.DisplayObject);qr.NodeLinker=wf;var Pf=at&&at.__extends||function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},i(r,t)};return function(r,t){i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();Object.defineProperty(Wr,"__esModule",{value:!0});Wr.NodeContainer=void 0;var $a=tr,If=$r,Ef=qr,Sf=function(i){Pf(r,i);function r(t,e){var n=i.call(this,t)||this;return n.nodes=new $a.DisplayObjectContainer(n.stage),n.addChild(n.nodes),n.addChildAt(new Ef.NodeLinker(n.stage,n.nodes),0),n.circle=e,n}return r.prototype.populate=function(){for(var t=10;t<this.stage.getWidth();t+=200)for(var e=10;e<this.stage.getHeight();e+=200)this.addNode(t+12*Math.random(),e+12*Math.random(),0,0)},r.prototype.addNode=function(t,e,n,a){var s=new If.Node(this.stage);s.position.set(t,e),s.velocity.set(n,a),this.nodes.addChild(s)},r}($a.DisplayObjectContainer);Wr.NodeContainer=Sf;var Zr={},Af=at&&at.__extends||function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},i(r,t)};return function(r,t){i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();Object.defineProperty(Zr,"__esModule",{value:!0});Zr.PowerCircle=void 0;var Cf=$t,qa=hr,Of=ur,Ff=function(i){Af(r,i);function r(t,e,n,a){var s=i.call(this,t)||this;return s.baseRadius=e,s.centerX=n,s.centerY=a,s.lineWidth=1,s.eyesClosed=!1,s.targetPosition=new qa.Point(0,0),s.rotationAcceleration=0,s.rotationVelocity=0,s.targetRotation=0,s.targetBaseRotation=0,s.lastUpdateRandomPosition=0,s.lastUpdateRandomRotation=0,s.randomAngle=0,s.radius=s.baseRadius,s.filter=new qa.filters.BlurFilter,s.filters=[s.filter],s.setFriction(1),s.position.x=n,s.position.y=a,s}return r.prototype.setBaseRadius=function(t){this.baseRadius=t},r.prototype.setCenter=function(t,e){this.centerX=t,this.centerY=e},r.prototype.update=function(t){i.prototype.update.call(this,t),this.eyesClosed=Math.floor(10*Date.now()/1e3)%30===0,this.lineWidth=1+this.stage.viz.waveform.averageGainLinearized*8,this.filter.blur=Math.floor(.2+4*Math.exp(-24*this.stage.viz.waveform.averageGainLinearized)),this.radius=this.baseRadius+100*this.stage.viz.waveform.averageGainLinearized,this.setForce("main",{x:(this.targetPosition.x-this.position.x)*this.stage.viz.waveform.averageGainFirstOrder*16,y:(this.targetPosition.y-this.position.y)*this.stage.viz.waveform.averageGainFirstOrder*16}),Date.now()>800+this.lastUpdateRandomPosition&&(this.randomAngle=Math.random()*2*Math.PI,this.lastUpdateRandomPosition=Date.now()),Date.now()>1400+this.lastUpdateRandomRotation&&(this.targetRotation=this.stage.viz.waveform.averageGainFirstOrder*2*(Math.random()-.5),Math.random()<.05&&this.stage.viz.waveform.averageGainFirstOrder>=.25&&(this.targetBaseRotation-=Math.PI*2),this.lastUpdateRandomRotation=Date.now()),this.rotationAcceleration=(this.targetRotation+this.targetBaseRotation-this.rotation)*this.stage.viz.waveform.averageGainFirstOrder*16,this.rotationAcceleration+=-this.rotationVelocity*2,this.rotationVelocity+=this.rotationAcceleration*t,this.rotation+=this.rotationVelocity*t,this.updatePosition(),this.redraw()},r.prototype.updatePosition=function(){var t=this.stage.viz.waveform.averageGainFirstOrder*256,e=Math.cos(this.randomAngle)*t,n=Math.sin(this.randomAngle)*t,a=this.stage.renderer.plugins.interaction.mouse.global,s=Math.min(t,Of.Point.distance(a,this.position)),o=Math.atan2(a.y-this.position.x,a.x-this.position.y),h=Math.cos(o)*s,u=Math.sin(o)*s;this.targetPosition.x=this.centerX+e+h,this.targetPosition.y=this.centerY+n+u},r.prototype.redraw=function(){if(!(typeof this.graphics>"u")){this.graphics.clear();for(var t=this.stage.viz.waveform.timeDomainDataSmooth,e=t.reduce(function(M,S){return M+S},0)/t.length,n=t.reduce(function(M,S){return Math.min(M,S)},t[0]),a=this.radius,s=[],o=[],h=0,u=Math.PI/2-.5*Math.PI/t.length;h<t.length;++h,u+=Math.PI/t.length){var c=Math.max(0,t[h]-n),f=Math.cos(u)*(this.radius+a*c),l=Math.sin(u)*(this.radius+a*c),d=Math.max(0,t[h]-e),p=Math.cos(u)*(5+this.radius+a*d),v=Math.sin(u)*(5+this.radius+a*d);s.push({x:f,y:l}),o.push({x:p,y:v})}for(var h=s.length-1;h>=0;--h)s.push({x:-s[h].x,y:s[h].y}),o.push({x:-o[h].x,y:o[h].y});this.graphics.beginFill(16777215,.02),this.graphics.lineStyle(this.lineWidth,16777215,.2),this.graphics.moveTo(s[0].x,s[0].y);for(var m=0,y=s;m<y.length;m++){var x=y[m];this.graphics.lineTo(x.x,x.y)}this.graphics.beginFill(16777215,.2),this.graphics.lineStyle(this.lineWidth,16777215,1),this.graphics.moveTo(o[0].x,o[0].y);for(var g=0,w=o;g<w.length;g++){var x=w[g];this.graphics.lineTo(x.x,x.y)}this.graphics.beginFill(1118481,1),this.graphics.lineStyle(this.lineWidth,16777215),this.graphics.drawCircle(0,0,this.radius),this.graphics.endFill(),this.graphics.lineStyle(this.lineWidth,16777215),this.graphics.drawCircle(0,0,this.radius);var b=this.eyesClosed?this.radius*.02:this.radius*.1,T=-this.radius*.3;this.graphics.lineStyle(1,16777215),this.graphics.beginFill(16777215,1),this.graphics.drawRect(-b*.5,T-b*.5,b,b),this.graphics.drawRect(this.radius*.3-b*.5,T-b*.5,b,b)}},r.prototype.flip=function(){this.rotationVelocity=-Math.PI*4,this.targetBaseRotation-=Math.PI*2},r}(Cf.DisplayObject);Zr.PowerCircle=Ff;var Kr={},Rf=at&&at.__extends||function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},i(r,t)};return function(r,t){i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();Object.defineProperty(Kr,"__esModule",{value:!0});Kr.AnimatedBackground=void 0;var Mf=$t,Lf=function(i){Rf(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.redraw=function(){if(!(typeof this.graphics>"u")){var t=Math.min(50,256*this.stage.viz.waveform.averageGainFirstOrder)/50,e=t*17|0,n=parseInt("0x"+(e<<16|e<<8|e).toString(16),16);this.graphics.clear(),this.graphics.beginFill(n),this.graphics.drawRect(0,0,this.stage.getWidth(),this.stage.getHeight()),this.graphics.endFill()}},r}(Mf.DisplayObject);Kr.AnimatedBackground=Lf;var Nf=at&&at.__extends||function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},i(r,t)};return function(r,t){i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();Object.defineProperty(kr,"__esModule",{value:!0});kr.Stage=void 0;var Df=tr,Uf=Wr,Bf=Zr,kf=Kr,Xf=hr,Gf=function(i){Nf(r,i);function r(t,e){var n=i.call(this,null)||this;return n.lastUpdateDelta=0,n.lastDelta=0,n.viz=e,n.canvasContainer=t,n.renderer=Xf.autoDetectRenderer({width:n.canvasContainer.clientWidth,height:n.canvasContainer.clientHeight}),n.canvasContainer.appendChild(n.renderer.view),n.renderer.render(n),n}return r.prototype.getWidth=function(){return this.canvasContainer.clientWidth},r.prototype.getHeight=function(){return this.canvasContainer.clientHeight},r.prototype.resize=function(){this.renderer.resize(this.canvasContainer.clientWidth,this.canvasContainer.clientHeight),this.powerCircle&&(this.powerCircle.setBaseRadius(Math.min(this.getWidth(),this.getHeight())/12),this.powerCircle.setCenter(this.getWidth()/2,6*this.getHeight()/10))},r.prototype.update=function(){var t=Date.now()/1e3;this.lastDelta=t-this.lastUpdateDelta,this.lastUpdateDelta=t,this.lastDelta>1&&(this.lastDelta=0),i.prototype.update.call(this,this.lastDelta),this.renderer.render(this),requestAnimationFrame(this.update.bind(this))},r.prototype.start=function(){for(;this.children.length>0;)this.removeChildAt(0);this.powerCircle=new Bf.PowerCircle(this,Math.min(this.getWidth(),this.getHeight())/12,this.getWidth()/2,6*this.getHeight()/10),this.addChild(this.powerCircle);var t=new Uf.NodeContainer(this,this.powerCircle);t.populate(),this.addChildAt(t,0),this.addChildAt(new kf.AnimatedBackground(this),0),this.run()},r.prototype.run=function(){this.lastUpdateDelta=Date.now()/1e3,requestAnimationFrame(this.update.bind(this))},r}(Df.DisplayObjectContainer);kr.Stage=Gf;Object.defineProperty(Br,"__esModule",{value:!0});Br.Viz=void 0;var jf=kr,Hf=function(){function i(r){var t=this;this.options=r,this.waveform={timeDomainData:new Float32Array(i.BIN_COUNT),timeDomainDataSmooth:new Float32Array(i.BIN_COUNT),minimumGain:0,maximumGain:0,averageGain:0,averageGainLinearized:0,averageGainFirstOrder:0};var e;if(typeof r.container=="string"?e=document.querySelector(r.container):e=r.container,!e)throw new Error("Container not found");this.stage=new jf.Stage(e,this),this.stage.start(),new ResizeObserver(function(n){return t.onContainerResized()}).observe(e),r.startAnalysis!==!1&&this.start()}return i.prototype.start=function(){this.context=new AudioContext,this.gain=this.context.createGain(),this.audio=this.options.source;var r=this.context.createMediaElementSource(this.audio);this.analyser=this.context.createAnalyser(),this.analyser.fftSize=i.BIN_COUNT,r.connect(this.gain),this.gain.connect(this.analyser),this.analyser.connect(this.context.destination),this.lastUpdateDate=new Date,this.updateStats()},i.prototype.updateStats=function(){var r=(Date.now()-this.lastUpdateDate.getTime())/1e3;if(r>1){this.lastUpdateDate=new Date,requestAnimationFrame(this.updateStats.bind(this));return}this.analyser.getFloatTimeDomainData(this.waveform.timeDomainData),this.waveform.averageGain=this.waveform.timeDomainData.reduce(function(n,a){return n+Math.abs(a)},0)/this.analyser.frequencyBinCount,this.waveform.minimumGain=this.waveform.timeDomainData.reduce(function(n,a){return Math.min(n,a)},this.waveform.timeDomainData[0]),this.waveform.maximumGain=this.waveform.timeDomainData.reduce(function(n,a){return Math.max(n,a)},this.waveform.timeDomainData[0]),this.waveform.averageGainLinearized+=r*(this.waveform.averageGain>this.waveform.averageGainLinearized?1:-1),this.waveform.averageGainFirstOrder+=(this.waveform.averageGain-this.waveform.averageGainFirstOrder)*.5*r;for(var t=0;t<this.waveform.timeDomainData.length;++t){var e=this.waveform.timeDomainData[t];e>this.waveform.timeDomainDataSmooth[t]?this.waveform.timeDomainDataSmooth[t]=e:this.waveform.timeDomainDataSmooth[t]+=(e-this.waveform.timeDomainDataSmooth[t])*.5*r}this.lastUpdateDate=new Date,requestAnimationFrame(this.updateStats.bind(this))},i.prototype.onContainerResized=function(){this.stage.resize()},i.prototype.flip=function(){var r=this.stage.powerCircle;if(!r)throw new Error("Unable to make the PowerCircle flip");r.flip()},i.BIN_COUNT=256,i}();Br.Viz=Hf;Object.defineProperty(vn,"__esModule",{value:!0});var zf=vn.PowerAudio=void 0,Vf=Br;zf=vn.PowerAudio={Viz:Vf.Viz};export{zf as P,at as c,Yf as g};
